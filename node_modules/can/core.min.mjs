(function(e,t){"undefined"==typeof process&&(e.process={argv:[],cwd:function(){return""},browser:!0,env:{NODE_ENV:t||"development"},version:"",platform:e.navigator&&e.navigator.userAgent&&/Windows/.test(e.navigator.userAgent)?"win":""})})("object"==typeof self&&self.Object==Object?self:"object"==typeof process&&"[object process]"===Object.prototype.toString.call(process)?global:window,"development");var canNamespace_1_0_0_canNamespace={},supportsNativeSymbols=function(){var e="undefined"!=typeof Symbol&&"function"==typeof Symbol.for;if(!e)return!1;var t=Symbol("a symbol for testing symbols");return"symbol"==typeof t}(),CanSymbol;if(supportsNativeSymbols)CanSymbol=Symbol;else{var symbolNum=0;CanSymbol=function(e){var t="@@symbol"+symbolNum++ +e,a={};return Object.defineProperties(a,{toString:{value:function(){return t}}}),a};var descriptionToSymbol={},symbolToDescription={};CanSymbol.for=function(e){var t=descriptionToSymbol[e];return t||(t=descriptionToSymbol[e]=CanSymbol(e),symbolToDescription[t]=e),t},CanSymbol.keyFor=function(e){return symbolToDescription[e]},["hasInstance","isConcatSpreadable","iterator","match","prototype","replace","search","species","split","toPrimitive","toStringTag","unscopables"].forEach(function(e){CanSymbol[e]=CanSymbol("Symbol."+e)})}["isMapLike","isListLike","isValueLike","isFunctionLike","getOwnKeys","getOwnKeyDescriptor","proto","getOwnEnumerableKeys","hasOwnKey","hasKey","size","getName","getIdentity","assignDeep","updateDeep","getValue","setValue","getKeyValue","setKeyValue","updateValues","addValue","removeValues","apply","new","onValue","offValue","onKeyValue","offKeyValue","getKeyDependencies","getValueDependencies","keyHasDependencies","valueHasDependencies","onKeys","onKeysAdded","onKeysRemoved","onPatches"].forEach(function(e){CanSymbol.for("can."+e)});var canSymbol_1_6_5_canSymbol=canNamespace_1_0_0_canNamespace.Symbol=CanSymbol,helpers={makeGetFirstSymbolValue:function(e){var t=e.map(function(e){return canSymbol_1_6_5_canSymbol.for(e)}),a=t.length;return function(e){for(var n=-1;++n<a;)if(e[t[n]]!==void 0)return e[t[n]]}},hasLength:function(e){var t=typeof e;if("string"==t||Array.isArray(e))return!0;var a=e&&"boolean"!==t&&"number"!==t&&"length"in e&&e.length;return"function"!=typeof e&&(0===a||"number"==typeof a&&0<a&&a-1 in e)}},plainFunctionPrototypePropertyNames=Object.getOwnPropertyNames(function(){}.prototype),plainFunctionPrototypeProto=Object.getPrototypeOf(function(){}.prototype);function isConstructorLike(e){var t=e[canSymbol_1_6_5_canSymbol.for("can.new")];if(t!==void 0)return t;if("function"!=typeof e)return!1;var a=e.prototype;if(!a)return!1;if(plainFunctionPrototypeProto!==Object.getPrototypeOf(a))return!0;var n=Object.getOwnPropertyNames(a);if(n.length===plainFunctionPrototypePropertyNames.length){for(var r=0,s=n.length;r<s;r++)if(n[r]!==plainFunctionPrototypePropertyNames[r])return!0;return!1}return!0}var getNewOrApply=helpers.makeGetFirstSymbolValue(["can.new","can.apply"]);function isFunctionLike(e){var t=!!e&&e[canSymbol_1_6_5_canSymbol.for("can.isFunctionLike")],a;return void 0===t?(a=getNewOrApply(e),void 0===a?"function"==typeof e:!!a):t}function isPrimitive(e){var t=typeof e;return!(null!=e&&("function"===t||"object"===t))}var coreHasOwn=Object.prototype.hasOwnProperty,funcToString=Function.prototype.toString,objectCtorString=funcToString.call(Object);function isPlainObject(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(t===Object.prototype||null===t)return!0;var a=coreHasOwn.call(t,"constructor")&&t.constructor;return"function"==typeof a&&a instanceof a&&funcToString.call(a)===objectCtorString}function isBuiltIn(e){return!!(isPrimitive(e)||Array.isArray(e)||isPlainObject(e)||"[object Object]"!==Object.prototype.toString.call(e)&&-1!==Object.prototype.toString.call(e).indexOf("[object "))}function isValueLike(e){var t;if(isPrimitive(e))return!0;if(t=e[canSymbol_1_6_5_canSymbol.for("can.isValueLike")],"undefined"!=typeof t)return t;var a=e[canSymbol_1_6_5_canSymbol.for("can.getValue")];if(void 0!==a)return!!a}function isMapLike(e){if(isPrimitive(e))return!1;var t=e[canSymbol_1_6_5_canSymbol.for("can.isMapLike")];if("undefined"!=typeof t)return!!t;var a=e[canSymbol_1_6_5_canSymbol.for("can.getKeyValue")];return!(void 0!==a)||!!a}var onValueSymbol=canSymbol_1_6_5_canSymbol.for("can.onValue"),onKeyValueSymbol=canSymbol_1_6_5_canSymbol.for("can.onKeyValue"),onPatchesSymbol=canSymbol_1_6_5_canSymbol.for("can.onPatches");function isObservableLike(e){return!isPrimitive(e)&&!!(e[onValueSymbol]||e[onKeyValueSymbol]||e[onPatchesSymbol])}function isListLike(e){var t;if("string"==typeof e)return!0;if(isPrimitive(e))return!1;if(t=e[canSymbol_1_6_5_canSymbol.for("can.isListLike")],"undefined"!=typeof t)return t;var a=e[canSymbol_1_6_5_canSymbol.iterator];return void 0===a?!!Array.isArray(e)||helpers.hasLength(e):!!a}var supportsNativeSymbols$1=function(){var e="undefined"!=typeof Symbol&&"function"==typeof Symbol.for;if(!e)return!1;var t=Symbol("a symbol for testing symbols");return"symbol"==typeof t}(),isSymbolLike;if(supportsNativeSymbols$1)isSymbolLike=function(e){return"symbol"==typeof e};else{var symbolStart="@@symbol";isSymbolLike=function(e){return!("object"!=typeof e||Array.isArray(e))&&e.toString().substr(0,symbolStart.length)===symbolStart}}var type={isConstructorLike:isConstructorLike,isFunctionLike:isFunctionLike,isListLike:isListLike,isMapLike:isMapLike,isObservableLike:isObservableLike,isPrimitive:isPrimitive,isBuiltIn:isBuiltIn,isValueLike:isValueLike,isSymbolLike:isSymbolLike,isMoreListLikeThanMapLike:function(e){if(Array.isArray(e))return!0;if(e instanceof Array)return!0;if(null==e)return!1;var t=e[canSymbol_1_6_5_canSymbol.for("can.isMoreListLikeThanMapLike")];if(t!==void 0)return t;var a=this.isListLike(e),n=this.isMapLike(e);if(a&&!n)return!0;return(a||!n)&&void 0},isIteratorLike:function(e){return e&&"object"==typeof e&&"function"==typeof e.next&&0===e.next.length},isPromise:function(e){return e instanceof Promise||"[object Promise]"===Object.prototype.toString.call(e)},isPlainObject:isPlainObject},call={call:function(e,t){var a=[].slice.call(arguments,2),n=e[canSymbol_1_6_5_canSymbol.for("can.apply")];return n?n.call(e,t,a):e.apply(t,a)},apply:function(e,t,a){var n=e[canSymbol_1_6_5_canSymbol.for("can.apply")];return n?n.call(e,t,a):e.apply(t,a)},new:function(e){var t=[].slice.call(arguments,1),a=e[canSymbol_1_6_5_canSymbol.for("can.new")];if(a)return a.apply(e,t);var n=Object.create(e.prototype),r=e.apply(n,t);return type.isPrimitive(r)?n:r}},setKeyValueSymbol=canSymbol_1_6_5_canSymbol.for("can.setKeyValue"),getKeyValueSymbol=canSymbol_1_6_5_canSymbol.for("can.getKeyValue"),getValueSymbol=canSymbol_1_6_5_canSymbol.for("can.getValue"),setValueSymbol=canSymbol_1_6_5_canSymbol.for("can.setValue"),reflections={setKeyValue:function(e,t,a){if(type.isSymbolLike(t))return void("symbol"==typeof t?e[t]=a:Object.defineProperty(e,t,{enumerable:!1,configurable:!0,value:a,writable:!0}));var n=e[setKeyValueSymbol];return void 0===n?void(e[t]=a):n.call(e,t,a)},getKeyValue:function(e,t){var a=e[getKeyValueSymbol];return a?a.call(e,t):e[t]},deleteKeyValue:function(e,t){var a=e[canSymbol_1_6_5_canSymbol.for("can.deleteKeyValue")];return a?a.call(e,t):void delete e[t]},getValue:function(e){if(type.isPrimitive(e))return e;var t=e[getValueSymbol];return t?t.call(e):e},setValue:function(e,t){var a=e&&e[setValueSymbol];if(a)return a.call(e,t);throw new Error("can-reflect.setValue - Can not set value.")},splice:function(e,t,a,n){var r;if("number"!=typeof a){var s=e[canSymbol_1_6_5_canSymbol.for("can.updateValues")];if(s)return s.call(e,t,a,n);r=a.length}else r=a;3>=arguments.length&&(n=[]);var o=e[canSymbol_1_6_5_canSymbol.for("can.splice")];return o?o.call(e,t,r,n):[].splice.apply(e,[t,r].concat(n))},addValues:function(e,t,a){var n=e[canSymbol_1_6_5_canSymbol.for("can.addValues")];return n?n.call(e,t,a):Array.isArray(e)&&void 0===a?e.push.apply(e,t):reflections.splice(e,a,[],t)},removeValues:function(e,t,a){var n=e[canSymbol_1_6_5_canSymbol.for("can.removeValues")];return n?n.call(e,t,a):Array.isArray(e)&&void 0===a?void t.forEach(function(t){var a=e.indexOf(t);0<=a&&e.splice(a,1)}):reflections.splice(e,a,t,[])}};reflections.get=reflections.getKeyValue,reflections.set=reflections.setKeyValue,reflections["delete"]=reflections.deleteKeyValue;var getSet=reflections,slice=[].slice;function makeFallback(e,t){return function(a,n,r,s){var o=a[canSymbol_1_6_5_canSymbol.for(e)];return void 0===o?this[t].apply(this,arguments):o.call(a,n,r,s)}}function makeErrorIfMissing(e,t){return function(a){var n=a[canSymbol_1_6_5_canSymbol.for(e)];if(n!==void 0){var r=slice.call(arguments,1);return n.apply(a,r)}throw new Error(t)}}var observe={onKeyValue:makeFallback("can.onKeyValue","onEvent"),offKeyValue:makeFallback("can.offKeyValue","offEvent"),onKeys:makeErrorIfMissing("can.onKeys","can-reflect: can not observe an onKeys event"),onKeysAdded:makeErrorIfMissing("can.onKeysAdded","can-reflect: can not observe an onKeysAdded event"),onKeysRemoved:makeErrorIfMissing("can.onKeysRemoved","can-reflect: can not unobserve an onKeysRemoved event"),getKeyDependencies:makeErrorIfMissing("can.getKeyDependencies","can-reflect: can not determine dependencies"),getWhatIChange:makeErrorIfMissing("can.getWhatIChange","can-reflect: can not determine dependencies"),getChangesDependencyRecord:function(e){var t=e[canSymbol_1_6_5_canSymbol.for("can.getChangesDependencyRecord")];if("function"==typeof t)return t()},keyHasDependencies:makeErrorIfMissing("can.keyHasDependencies","can-reflect: can not determine if this has key dependencies"),onValue:makeErrorIfMissing("can.onValue","can-reflect: can not observe value change"),offValue:makeErrorIfMissing("can.offValue","can-reflect: can not unobserve value change"),getValueDependencies:makeErrorIfMissing("can.getValueDependencies","can-reflect: can not determine dependencies"),valueHasDependencies:makeErrorIfMissing("can.valueHasDependencies","can-reflect: can not determine if value has dependencies"),onPatches:makeErrorIfMissing("can.onPatches","can-reflect: can not observe patches on object"),offPatches:makeErrorIfMissing("can.offPatches","can-reflect: can not unobserve patches on object"),onInstancePatches:makeErrorIfMissing("can.onInstancePatches","can-reflect: can not observe onInstancePatches on Type"),offInstancePatches:makeErrorIfMissing("can.offInstancePatches","can-reflect: can not unobserve onInstancePatches on Type"),onInstanceBoundChange:makeErrorIfMissing("can.onInstanceBoundChange","can-reflect: can not observe bound state change in instances."),offInstanceBoundChange:makeErrorIfMissing("can.offInstanceBoundChange","can-reflect: can not unobserve bound state change"),isBound:makeErrorIfMissing("can.isBound","can-reflect: cannot determine if object is bound"),onEvent:function(e,t,a,n){if(e){var r=e[canSymbol_1_6_5_canSymbol.for("can.onEvent")];if(r!==void 0)return r.call(e,t,a,n);e.addEventListener&&e.addEventListener(t,a,n)}},offEvent:function(e,t,a,n){if(e){var r=e[canSymbol_1_6_5_canSymbol.for("can.offEvent")];if(r!==void 0)return r.call(e,t,a,n);e.removeEventListener&&e.removeEventListener(t,a,n)}},setPriority:function(e,t){if(e){var a=e[canSymbol_1_6_5_canSymbol.for("can.setPriority")];if(void 0!==a)return a.call(e,t),!0}return!1},getPriority:function(e){if(e){var t=e[canSymbol_1_6_5_canSymbol.for("can.getPriority")];if(t!==void 0)return t.call(e)}}},getPrototypeOfWorksWithPrimitives=!0;try{}catch(t){getPrototypeOfWorksWithPrimitives=!1}var ArrayMap;if("function"==typeof Map)ArrayMap=Map;else{var isEven=function(e){return 0==e%2};ArrayMap=function(){this.contents=[]},ArrayMap.prototype={_getIndex:function(e){var t;do t=this.contents.indexOf(e,t);while(-1!==t&&!isEven(t));return t},has:function(e){return-1!==this._getIndex(e)},get:function(e){var t=this._getIndex(e);if(-1!==t)return this.contents[t+1]},set:function(e,t){var a=this._getIndex(e);-1===a?(this.contents.push(e),this.contents.push(t)):this.contents[a+1]=t},delete:function(e){var t=this._getIndex(e);-1!==t&&this.contents.splice(t,2)}}}var hasOwnProperty=Object.prototype.hasOwnProperty,shiftFirstArgumentToThis=function(e){return function(){var t=[this];return t.push.apply(t,arguments),e.apply(null,t)}},getKeyValueSymbol$1=canSymbol_1_6_5_canSymbol.for("can.getKeyValue"),shiftedGetKeyValue=shiftFirstArgumentToThis(getSet.getKeyValue),setKeyValueSymbol$1=canSymbol_1_6_5_canSymbol.for("can.setKeyValue"),shiftedSetKeyValue=shiftFirstArgumentToThis(getSet.setKeyValue),sizeSymbol=canSymbol_1_6_5_canSymbol.for("can.size"),hasUpdateSymbol=helpers.makeGetFirstSymbolValue(["can.updateDeep","can.assignDeep","can.setKeyValue"]),shouldUpdateOrAssign=function(e){return type.isPlainObject(e)||Array.isArray(e)||!!hasUpdateSymbol(e)},shapeReflections;function isSerializedHelper(e){return!!type.isPrimitive(e)||!hasUpdateSymbol(e)&&type.isBuiltIn(e)&&!type.isPlainObject(e)&&!Array.isArray(e)&&!type.isObservableLike(e)}var Object_Keys;try{Object_Keys=Object.keys}catch(t){Object_Keys=function(e){return type.isPrimitive(e)?[]:Object.keys(e)}}function createSerializeMap(e){var t=e||ArrayMap;return{unwrap:new t,serialize:new t,isSerializing:{unwrap:new t,serialize:new t},circularReferenceIsSerializing:{unwrap:new t,serialize:new t}}}function makeSerializer(e,t){function a(e){this.first=!n,this.first&&(n=createSerializeMap(e)),this.map=n,this.result=null}var n=null;return a.prototype.end=function(){return this.first&&(n=null),this.result},function n(r,s){if(isSerializedHelper(r))return r;var o=new a(s);if(type.isValueLike(r))o.result=this[e](getSet.getValue(r));else{var l=type.isIteratorLike(r)||type.isMoreListLikeThanMapLike(r);if(o.result=l?[]:{},o.map[e].has(r))return o.map.isSerializing[e].has(r)&&o.map.circularReferenceIsSerializing[e].set(r,!0),o.map[e].get(r);o.map[e].set(r,o.result);for(var d=0,p=t.length,n;d<p;d++)if(n=r[t[d]],n){o.map.isSerializing[e].set(r,!0);var c=o.result;if(o.result=n.call(r,c),o.map.isSerializing[e].delete(r),o.result!==c){if(o.map.circularReferenceIsSerializing[e].has(r))throw o.end(),new Error("Cannot serialize cirular reference!");o.map[e].set(r,o.result)}return o.end()}"function"==typeof obj?(o.map[e].set(r,r),o.result=r):l?this.eachIndex(r,function(t,a){o.result[a]=this[e](t)},this):this.eachKey(r,function(t,a){o.result[a]=this[e](t)},this)}return o.end()}}var makeMap="undefined"==typeof Map?function(e){var t={};return e.forEach(function(e){t[e]=!0}),{get:function(e){return t[e]},set:function(e,a){t[e]=a},keys:function(){return e}}}:function(e){var t=new Map;return shapeReflections.eachIndex(e,function(e){t.set(e,!0)}),t};var fastHasOwnKey=function(e){var t=e[canSymbol_1_6_5_canSymbol.for("can.hasOwnKey")];if(t)return t.bind(e);var a=makeMap(shapeReflections.getOwnEnumerableKeys(e));return function(e){return a.get(e)}};function addPatch(e,t){var a=e[e.length-1];return a&&a.deleteCount===a.insert.length&&t.index-a.index===a.deleteCount?(a.insert.push.apply(a.insert,t.insert),void(a.deleteCount+=t.deleteCount)):void e.push(t)}function updateDeepList(e,t,a){var n=this.toArray(t),r=[],s=-1;this.eachIndex(e,function(t,o){if(s=o,o>=n.length)return a||addPatch(r,{index:o,deleteCount:e.length-o+1,insert:[]}),!1;var i=n[o];type.isPrimitive(t)||type.isPrimitive(i)||!1===shouldUpdateOrAssign(t)?addPatch(r,{index:o,deleteCount:1,insert:[i]}):!0===a?this.assignDeep(t,i):this.updateDeep(t,i)},this),n.length>s&&addPatch(r,{index:s+1,deleteCount:0,insert:n.slice(s+1)});for(var o=0,l=r.length,d;o<l;o++)d=r[o],getSet.splice(e,d.index,d.deleteCount,d.insert);return e}shapeReflections={each:function(e,t,a){return type.isIteratorLike(e)||type.isMoreListLikeThanMapLike(e)?shapeReflections.eachIndex(e,t,a):shapeReflections.eachKey(e,t,a)},eachIndex:function(e,t,a){if(Array.isArray(e))return shapeReflections.eachListLike(e,t,a);var n=e[canSymbol_1_6_5_canSymbol.iterator],r;if(type.isIteratorLike(e)?r=e:n&&(r=n.call(e)),r)for(var s=0,o;!(o=r.next()).done&&!1!==t.call(a||e,o.value,s++,e););else shapeReflections.eachListLike(e,t,a);return e},eachListLike:function(e,t,a){var n=-1,r=e.length;if(r===void 0){var s=e[sizeSymbol];if(s)r=s.call(e);else throw new Error("can-reflect: unable to iterate.")}for(;++n<r;){var o=e[n];if(!1===t.call(a||o,o,n,e))break}return e},toArray:function(e){var t=[];return shapeReflections.each(e,function(e){t.push(e)}),t},eachKey:function(e,t,a){if(e){var n=shapeReflections.getOwnEnumerableKeys(e),r=e[getKeyValueSymbol$1]||shiftedGetKeyValue;return shapeReflections.eachIndex(n,function(n){var s=r.call(e,n);return t.call(a||e,s,n,e)})}return e},hasOwnKey:function(e,t){var a=e[canSymbol_1_6_5_canSymbol.for("can.hasOwnKey")];if(a)return a.call(e,t);var n=e[canSymbol_1_6_5_canSymbol.for("can.getOwnKeys")];if(n){var r=!1;return shapeReflections.eachIndex(n.call(e),function(e){if(e===t)return r=!0,!1}),r}return hasOwnProperty.call(e,t)},getOwnEnumerableKeys:function(e){var t=e[canSymbol_1_6_5_canSymbol.for("can.getOwnEnumerableKeys")];if(t)return t.call(e);if(e[canSymbol_1_6_5_canSymbol.for("can.getOwnKeys")]&&e[canSymbol_1_6_5_canSymbol.for("can.getOwnKeyDescriptor")]){var a=[];return shapeReflections.eachIndex(shapeReflections.getOwnKeys(e),function(t){var n=shapeReflections.getOwnKeyDescriptor(e,t);n.enumerable&&a.push(t)},this),a}return Object_Keys(e)},getOwnKeys:function(e){var t=e[canSymbol_1_6_5_canSymbol.for("can.getOwnKeys")];return t?t.call(e):Object.getOwnPropertyNames(e)},getOwnKeyDescriptor:function(e,t){var a=e[canSymbol_1_6_5_canSymbol.for("can.getOwnKeyDescriptor")];return a?a.call(e,t):Object.getOwnPropertyDescriptor(e,t)},unwrap:makeSerializer("unwrap",[canSymbol_1_6_5_canSymbol.for("can.unwrap")]),serialize:makeSerializer("serialize",[canSymbol_1_6_5_canSymbol.for("can.serialize"),canSymbol_1_6_5_canSymbol.for("can.unwrap")]),assignMap:function(e,t){var a=fastHasOwnKey(e),n=e[getKeyValueSymbol$1]||shiftedGetKeyValue,r=e[setKeyValueSymbol$1]||shiftedSetKeyValue;return shapeReflections.eachKey(t,function(t,s){a(s)&&n.call(e,s)===t||r.call(e,s,t)}),e},assignList:function(e,t){var a=shapeReflections.toArray(t);return getSet.splice(e,0,a,a),e},assign:function(e,t){return type.isIteratorLike(t)||type.isMoreListLikeThanMapLike(t)?shapeReflections.assignList(e,t):shapeReflections.assignMap(e,t),e},assignDeepMap:function(e,t){var a=fastHasOwnKey(e),n=e[getKeyValueSymbol$1]||shiftedGetKeyValue,r=e[setKeyValueSymbol$1]||shiftedSetKeyValue;return shapeReflections.eachKey(t,function(t,s){if(!a(s))getSet.setKeyValue(e,s,t);else{var o=n.call(e,s);t===o||(type.isPrimitive(o)||type.isPrimitive(t)||!1===shouldUpdateOrAssign(o)?r.call(e,s,t):shapeReflections.assignDeep(o,t))}},this),e},assignDeepList:function(e,t){return updateDeepList.call(this,e,t,!0)},assignDeep:function(e,t){var a=e[canSymbol_1_6_5_canSymbol.for("can.assignDeep")];return a?a.call(e,t):type.isMoreListLikeThanMapLike(t)?shapeReflections.assignDeepList(e,t):shapeReflections.assignDeepMap(e,t),e},updateMap:function(e,t){var a=makeMap(shapeReflections.getOwnEnumerableKeys(t)),n=t[getKeyValueSymbol$1]||shiftedGetKeyValue,r=e[setKeyValueSymbol$1]||shiftedSetKeyValue;return shapeReflections.eachKey(e,function(s,o){if(!a.get(o))return void getSet.deleteKeyValue(e,o);a.set(o,!1);var i=n.call(t,o);i!==s&&r.call(e,o,i)},this),shapeReflections.eachIndex(a.keys(),function(s){a.get(s)&&r.call(e,s,n.call(t,s))}),e},updateList:function(e,t){var a=shapeReflections.toArray(t);return getSet.splice(e,0,e,a),e},update:function(e,t){return type.isIteratorLike(t)||type.isMoreListLikeThanMapLike(t)?shapeReflections.updateList(e,t):shapeReflections.updateMap(e,t),e},updateDeepMap:function(e,t){var a=makeMap(shapeReflections.getOwnEnumerableKeys(t)),n=t[getKeyValueSymbol$1]||shiftedGetKeyValue,r=e[setKeyValueSymbol$1]||shiftedSetKeyValue;return shapeReflections.eachKey(e,function(s,o){if(!a.get(o))return void getSet.deleteKeyValue(e,o);a.set(o,!1);var i=n.call(t,o);type.isPrimitive(s)||type.isPrimitive(i)||!1===shouldUpdateOrAssign(s)?r.call(e,o,i):shapeReflections.updateDeep(s,i)},this),shapeReflections.eachIndex(a.keys(),function(s){a.get(s)&&r.call(e,s,n.call(t,s))}),e},updateDeepList:function(e,t){return updateDeepList.call(this,e,t)},updateDeep:function(e,t){var a=e[canSymbol_1_6_5_canSymbol.for("can.updateDeep")];return a?a.call(e,t):type.isMoreListLikeThanMapLike(t)?shapeReflections.updateDeepList(e,t):shapeReflections.updateDeepMap(e,t),e},hasKey:function(e,t){if(null==e)return!1;if(type.isPrimitive(e)){if(hasOwnProperty.call(e,t))return!0;var a;return a=getPrototypeOfWorksWithPrimitives?Object.getPrototypeOf(e):e.__proto__,void 0===a?void 0!==e[t]:t in a}var n=e[canSymbol_1_6_5_canSymbol.for("can.hasKey")];if(n)return n.call(e,t);var r=shapeReflections.hasOwnKey(e,t);return r||t in e},getAllEnumerableKeys:function(){},getAllKeys:function(){},assignSymbols:function(e,t){return shapeReflections.eachKey(t,function(t,a){var n=type.isSymbolLike(canSymbol_1_6_5_canSymbol[a])?canSymbol_1_6_5_canSymbol[a]:canSymbol_1_6_5_canSymbol.for(a);getSet.setKeyValue(e,n,t)}),e},isSerialized:isSerializedHelper,size:function(e){if(null==e)return 0;var t=e[sizeSymbol],a=0;return t?t.call(e):helpers.hasLength(e)?e.length:type.isListLike(e)?(shapeReflections.eachIndex(e,function(){a++}),a):e?shapeReflections.getOwnEnumerableKeys(e).length:void 0},defineInstanceKey:function(e,t,a){var n=e[canSymbol_1_6_5_canSymbol.for("can.defineInstanceKey")];if(n)return n.call(e,t,a);var r=e.prototype;n=r[canSymbol_1_6_5_canSymbol.for("can.defineInstanceKey")],n?n.call(r,t,a):Object.defineProperty(r,t,shapeReflections.assign({configurable:!0,enumerable:!type.isSymbolLike(t),writable:!0},a))}},shapeReflections.isSerializable=shapeReflections.isSerialized,shapeReflections.keys=shapeReflections.getOwnEnumerableKeys;var shape=shapeReflections,getSchemaSymbol=canSymbol_1_6_5_canSymbol.for("can.getSchema"),isMemberSymbol=canSymbol_1_6_5_canSymbol.for("can.isMember"),newSymbol=canSymbol_1_6_5_canSymbol.for("can.new");function comparator(e,t){return e.localeCompare(t)}function sort(e){if(type.isPrimitive(e)||e instanceof Date)return e;var t;return type.isListLike(e)?(t=[],shape.eachKey(e,function(e){t.push(sort(e))}),t):type.isMapLike(e)?(t={},shape.getOwnKeys(e).sort(comparator).forEach(function(a){t[a]=sort(getSet.getKeyValue(e,a))}),t):e}function isPrimitiveConverter(e){return e===Number||e===String||e===Boolean}var schemaReflections={getSchema:function(e){if(void 0!==e){var t=e[getSchemaSymbol];return void 0===t&&(e=e.constructor,t=e&&e[getSchemaSymbol]),void 0===t?void 0:t.call(e)}},getIdentity:function(e,t){if(t=t||schemaReflections.getSchema(e),void 0===t)throw new Error("can-reflect.getIdentity - Unable to find a schema for the given value.");var a=t.identity;if(!a||0===a.length)throw new Error("can-reflect.getIdentity - Provided schema lacks an identity property.");else{if(1===a.length)return getSet.getKeyValue(e,a[0]);var n={};return a.forEach(function(t){n[t]=getSet.getKeyValue(e,t)}),JSON.stringify(schemaReflections.cloneKeySort(n))}},cloneKeySort:function(e){return sort(e)},convert:function(e,t){if(isPrimitiveConverter(t))return t(e);var a=t[isMemberSymbol],n=!1,r=typeof t,s=t[newSymbol];if(void 0===a?"function"===r&&type.isConstructorLike(t)&&(n=e instanceof t):n=a.call(t,e),n)return e;if(void 0!==s)return s.call(t,e);if("function"===r)return type.isConstructorLike(t)?new t(e):t(e);throw new Error("can-reflect: Can not convert values into type. Type must provide `can.new` symbol.")}},schema=schemaReflections,getNameSymbol=canSymbol_1_6_5_canSymbol.for("can.getName");function setName(e,t){if("function"!=typeof t){var a=t;t=function(){return a}}Object.defineProperty(e,getNameSymbol,{value:t})}var anonymousID=0;function getName(e){var t=typeof e;if(null===e||"object"!==t&&"function"!==t)return""+e;var a=e[getNameSymbol];if(a)return a.call(e);if("function"==t)return"name"in e||(e.name="functionIE"+anonymousID++),e.name;if(e.constructor&&e!==e.constructor){var n=getName(e.constructor);if(n){if(type.isValueLike(e))return n+"<>";if(type.isMoreListLikeThanMapLike(e))return n+"[]";if(type.isMapLike(e))return n+"{}"}}}var getName_1={setName:setName,getName:getName};function keysPolyfill(){var e=[],t=0;return this.forEach(function(t,a){e.push(a)}),{next:function(){return{value:e[t],done:t++===e.length}}}}"undefined"!=typeof Map&&(shape.assignSymbols(Map.prototype,{"can.getOwnEnumerableKeys":Map.prototype.keys,"can.setKeyValue":Map.prototype.set,"can.getKeyValue":Map.prototype.get,"can.deleteKeyValue":Map.prototype["delete"],"can.hasOwnKey":Map.prototype.has}),"function"!=typeof Map.prototype.keys&&(Map.prototype.keys=Map.prototype[canSymbol_1_6_5_canSymbol.for("can.getOwnEnumerableKeys")]=keysPolyfill)),"undefined"!=typeof WeakMap&&shape.assignSymbols(WeakMap.prototype,{"can.getOwnEnumerableKeys":function(){throw new Error("can-reflect: WeakMaps do not have enumerable keys.")},"can.setKeyValue":WeakMap.prototype.set,"can.getKeyValue":WeakMap.prototype.get,"can.deleteKeyValue":WeakMap.prototype["delete"],"can.hasOwnKey":WeakMap.prototype.has}),"undefined"!=typeof Set&&(shape.assignSymbols(Set.prototype,{"can.isMoreListLikeThanMapLike":!0,"can.updateValues":function(e,t,a){t!==a&&shape.each(t,function(e){this.delete(e)},this),shape.each(a,function(e){this.add(e)},this)},"can.size":function(){return this.size}}),"function"!=typeof Set.prototype[canSymbol_1_6_5_canSymbol.iterator]&&(Set.prototype[canSymbol_1_6_5_canSymbol.iterator]=function(){var e=[],t=0;return this.forEach(function(t){e.push(t)}),{next:function(){return{value:e[t],done:t++===e.length}}}})),"undefined"!=typeof WeakSet&&shape.assignSymbols(WeakSet.prototype,{"can.isListLike":!0,"can.isMoreListLikeThanMapLike":!0,"can.updateValues":function(e,t,a){t!==a&&shape.each(t,function(e){this.delete(e)},this),shape.each(a,function(e){this.add(e)},this)},"can.size":function(){throw new Error("can-reflect: WeakSets do not have enumerable keys.")}});var reflect={};[call,getSet,observe,shape,type,getName_1,schema].forEach(function(e){for(var t in e)reflect[t]=e[t]});var canReflect_1_18_0_canReflect=canNamespace_1_0_0_canNamespace.Reflect=reflect,commonjsGlobal="undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window:globalThis;function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function createCommonjsModule(e,t){return t={exports:{}},e(t,t.exports),t.exports}var warnTimeout=5e3,logLevel=0,warn=function(){var e=this.logLevel;2>e&&("undefined"!=typeof console&&console.warn?this._logger("warn",Array.prototype.slice.call(arguments)):"undefined"!=typeof console&&console.log&&this._logger("log",Array.prototype.slice.call(arguments)))},log=function(){var e=this.logLevel;1>e&&"undefined"!=typeof console&&console.log&&this._logger("log",Array.prototype.slice.call(arguments))},error=function(){var e=this.logLevel;1>e&&"undefined"!=typeof console&&console.error&&this._logger("error",Array.prototype.slice.call(arguments))},_logger=function(t,a){try{console[t].apply(console,a)}catch(n){console[t](a)}},canLog_1_0_2_canLog={warnTimeout:5000,logLevel:logLevel,warn:warn,log:log,error:error,_logger:_logger},dev={warnTimeout:5e3,logLevel:0,stringify:function(e){return JSON.stringify(e,function(e,t){return t===void 0?"/* void(undefined) */":t},"  ").replace(/"\/\* void\(undefined\) \*\/"/g,"undefined")},warn:function(){},log:function(){},error:function(){},_logger:canLog_1_0_2_canLog._logger},canQueues_1_3_1_queueState={lastTask:null},canAssign_1_3_3_canAssign=canNamespace_1_0_0_canNamespace.assign=function(e,t){for(var a in t){var n=Object.getOwnPropertyDescriptor(e,a);n&&!1===n.writable||(e[a]=t[a])}return e};function noOperation(){}var Queue=function(e,t){this.callbacks=canAssign_1_3_3_canAssign({onFirstTask:noOperation,onComplete:function(){canQueues_1_3_1_queueState.lastTask=null}},t||{}),this.name=e,this.index=0,this.tasks=[],this._log=!1};Queue.prototype.constructor=Queue,Queue.noop=noOperation,Queue.prototype.enqueue=function(e,t,a,n){var r=this.tasks.push({fn:e,context:t,args:a,meta:n||{}});1===r&&this.callbacks.onFirstTask(this)},Queue.prototype.flush=function(){for(;this.index<this.tasks.length;){var e=this.tasks[this.index++];e.fn.apply(e.context,e.args)}this.index=0,this.tasks=[],this.callbacks.onComplete(this)},Queue.prototype.log=function(){this._log=!arguments.length||arguments[0]};var canQueues_1_3_1_queue=Queue,PriorityQueue=function(){canQueues_1_3_1_queue.apply(this,arguments),this.taskMap=new Map,this.taskContainersByPriority=[],this.curPriorityIndex=1/0,this.curPriorityMax=0,this.isFlushing=!1,this.tasksRemaining=0};PriorityQueue.prototype=Object.create(canQueues_1_3_1_queue.prototype),PriorityQueue.prototype.constructor=PriorityQueue,PriorityQueue.prototype.enqueue=function(e,t,a,n){if(!this.taskMap.has(e)){this.tasksRemaining++;var r=0===this.taskContainersByPriority.length,s={fn:e,context:t,args:a,meta:n||{}},o=this.getTaskContainerAndUpdateRange(s);o.tasks.push(s),this.taskMap.set(e,s),r&&this.callbacks.onFirstTask(this)}},PriorityQueue.prototype.getTaskContainerAndUpdateRange=function(e){var t=e.meta.priority||0;t<this.curPriorityIndex&&(this.curPriorityIndex=t),t>this.curPriorityMax&&(this.curPriorityMax=t);var a=this.taskContainersByPriority,n=a[t];return n||(n=a[t]={tasks:[],index:0}),n},PriorityQueue.prototype.flush=function(){if(!this.isFlushing)for(this.isFlushing=!0;;)if(this.curPriorityIndex<=this.curPriorityMax){var e=this.taskContainersByPriority[this.curPriorityIndex];if(e&&e.tasks.length>e.index){var t=e.tasks[e.index++];this.tasksRemaining--,this.taskMap["delete"](t.fn),t.fn.apply(t.context,t.args)}else this.curPriorityIndex++}else return this.taskMap=new Map,this.curPriorityIndex=1/0,this.curPriorityMax=0,this.taskContainersByPriority=[],this.isFlushing=!1,void this.callbacks.onComplete(this)},PriorityQueue.prototype.isEnqueued=function(e){return this.taskMap.has(e)},PriorityQueue.prototype.flushQueuedTask=function(e){var t=this.dequeue(e);t&&t.fn.apply(t.context,t.args)},PriorityQueue.prototype.dequeue=function(e){var t=this.taskMap.get(e);if(t){var a=t.meta.priority||0,n=this.taskContainersByPriority[a],r=n.tasks.indexOf(t,n.index);if(0<=r)return n.tasks.splice(r,1),this.tasksRemaining--,this.taskMap["delete"](t.fn),t;console.warn("Task",e,"has already run")}},PriorityQueue.prototype.tasksRemainingCount=function(){return this.tasksRemaining};var canQueues_1_3_1_priorityQueue=PriorityQueue,CompletionQueue=function(){canQueues_1_3_1_queue.apply(this,arguments),this.flushCount=0};CompletionQueue.prototype=Object.create(canQueues_1_3_1_queue.prototype),CompletionQueue.prototype.constructor=CompletionQueue,CompletionQueue.prototype.flush=function(){if(0===this.flushCount){for(this.flushCount++;this.index<this.tasks.length;){var e=this.tasks[this.index++];e.fn.apply(e.context,e.args)}this.index=0,this.tasks=[],this.flushCount--,this.callbacks.onComplete(this)}};var canQueues_1_3_1_completionQueue=CompletionQueue,canQueues_1_3_1_sortedIndexBy=function(e,t,a){if(t&&t.length){if(-1===e(a,t[0]))return 0;if(1===e(a,t[t.length-1]))return t.length;for(var n=0,r=t.length;n<r;){var s=n+r>>>1,o=t[s],i=e(a,o);-1===i?r=s:n=s+1}return r}},sortStable=!0,indexOf=Array.prototype.indexOf,hasDuplicate,sortInput;function sortOrder(e,t){if(e===t)return hasDuplicate=!0,0;var a=!e.compareDocumentPosition-!t.compareDocumentPosition;return a?a:(a=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&a?e===document||e.ownerDocument===document&&document.documentElement.contains(e)?-1:t===document||t.ownerDocument===document&&document.documentElement.contains(t)?1:sortInput?indexOf.call(sortInput,e)-indexOf.call(sortInput,t):0:4&a?-1:1)}function uniqueSort(e){var t=[],a=0,n=0,r;if(hasDuplicate=!1,sortInput=!sortStable&&e.slice(0),e.sort(sortOrder),hasDuplicate){for(;r=e[n++];)r===e[n]&&(a=t.push(n));for(;a--;)e.splice(t[a],1)}return sortInput=null,e}var canQueues_1_3_1_elementSort={uniqueSort:uniqueSort,sortOrder:sortOrder},canElementSymbol=canSymbol_1_6_5_canSymbol.for("can.element");function sortTasks(e,t){return canQueues_1_3_1_elementSort.sortOrder(e.meta.element,t.meta.element)}var DomOrderQueue=function(){canQueues_1_3_1_queue.apply(this,arguments),this.taskMap=new Map,this.unsortable=[],this.isFlushing=!1};DomOrderQueue.prototype=Object.create(canQueues_1_3_1_queue.prototype),DomOrderQueue.prototype.constructor=DomOrderQueue,DomOrderQueue.prototype.enqueue=function(e,t,a,n){var r;if(!this.taskMap.has(e)){n||(n={}),n.element||(n.element=e[canElementSymbol]),r={fn:e,context:t,args:a,meta:n},this.taskMap.set(e,r);var s=canQueues_1_3_1_sortedIndexBy(sortTasks,this.tasks,r);this.tasks.splice(s,0,r),1===this.tasks.length&&this.callbacks.onFirstTask(this)}else r=this.taskMap.get(e),r.context=t,r.args=a,n||(n={}),n.element||(n.element=e[canElementSymbol]),r.meta=n},DomOrderQueue.prototype.flush=function(){if(!this.isFlushing){for(this.isFlushing=!0;this.tasks.length;){var e=this.tasks.shift();this.taskMap["delete"](e.fn),e.fn.apply(e.context,e.args)}this.isFlushing=!1,this.callbacks.onComplete(this)}},DomOrderQueue.prototype.isEnqueued=function(e){return this.taskMap.has(e)},DomOrderQueue.prototype.flushQueuedTask=function(e){var t=this.dequeue(e);t&&t.fn.apply(t.context,t.args)},DomOrderQueue.prototype.dequeue=function(e){var t=this.taskMap.get(e);if(t){var a=this.tasks.indexOf(t);if(0<=a)return this.tasks.splice(a,1),this.taskMap["delete"](t.fn),t;console.warn("Task",e,"has already run")}},DomOrderQueue.prototype.tasksRemainingCount=function(){return this.tasks.length};var canQueues_1_3_1_domOrderQueue=DomOrderQueue,canQueues_1_3_1_canQueues=createCommonjsModule(function(e){var t=0,a=!1,n=0,r=["notify","derive","domUI","dom","mutate"],s,o,i,l,d,p;o=new canQueues_1_3_1_queue("NOTIFY",{onComplete:function(){i.flush()},onFirstTask:function(){t?a=!0:o.flush()}}),i=new canQueues_1_3_1_priorityQueue("DERIVE",{onComplete:function(){d.flush()},onFirstTask:function(){a=!0}}),d=new canQueues_1_3_1_domOrderQueue("DOM   ",{onComplete:function(){l.flush()},onFirstTask:function(){a=!0}}),l=new canQueues_1_3_1_completionQueue("DOM_UI",{onComplete:function(){p.flush()},onFirstTask:function(){a=!0}}),p=new canQueues_1_3_1_queue("MUTATE",{onComplete:function(){canQueues_1_3_1_queueState.lastTask=null},onFirstTask:function(){a=!0}});var c={Queue:canQueues_1_3_1_queue,PriorityQueue:canQueues_1_3_1_priorityQueue,CompletionQueue:canQueues_1_3_1_completionQueue,DomOrderQueue:canQueues_1_3_1_domOrderQueue,notifyQueue:o,deriveQueue:i,domQueue:d,domUIQueue:l,mutateQueue:p,batch:{start:function(){t++,1===t&&(n++,s={number:n})},stop:function(){t--,0===t&&a&&(a=!1,o.flush())},isCollecting:function(){return 0<t},number:function(){return n},data:function(){return s}},runAsTask:function(e){return e},enqueueByQueue:function(e,t,a,n,s){e&&(c.batch.start(),r.forEach(function(r){var o=c[r+"Queue"],i=e[r];i!==void 0&&i.forEach(function(e){var r=null==n?{}:n(e,t,a);r.reasonLog=s,o.enqueue(e,t,a,r)})}),c.batch.stop())},lastTask:function(){return canQueues_1_3_1_queueState.lastTask},stack:function(e){for(var t=e||canQueues_1_3_1_queueState.lastTask,a=[];t;)a.unshift(t),t=t.meta.parentTask;return a},logStack:function(e){var t=this.stack(e);t.forEach(function(e,t){var a=e.meta;0===t&&a&&a.reasonLog&&dev.log.apply(dev,a.reasonLog);var n=a&&a.log?a.log:[e.fn.name,e];dev.log.apply(dev,[e.meta.stack.name+" ran task:"].concat(n))})},taskCount:function(){return o.tasks.length+i.tasks.length+l.tasks.length+p.tasks.length},flush:function(){o.flush()},log:function(){o.log.apply(o,arguments),i.log.apply(i,arguments),l.log.apply(l,arguments),d.log.apply(d,arguments),p.log.apply(p,arguments)}};if(canNamespace_1_0_0_canNamespace.queues)throw new Error("You can't have two versions of can-queues, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.queues=c}),canObservationRecorder_1_3_1_canObservationRecorder=createCommonjsModule(function(e){var t=[],a=canSymbol_1_6_5_canSymbol.for("can.addParent"),n=canSymbol_1_6_5_canSymbol.for("can.getValue"),r={stack:t,start:function(e){var a={keyDependencies:new Map,valueDependencies:new Set,childDependencies:new Set,traps:null,ignore:0,name:e};return t.push(a),a},stop:function(){return t.pop()},add:function(e,a){var n=t[t.length-1];if(n&&0===n.ignore)if(n.traps)n.traps.push([e,a]);else if(void 0===a)n.valueDependencies.add(e);else{var r=n.keyDependencies.get(e);r||(r=new Set,n.keyDependencies.set(e,r)),r.add(a)}},addMany:function(e){var a=t[t.length-1];if(a)if(a.traps)a.traps.push.apply(a.traps,e);else for(var n=0,r=e.length;n<r;n++)this.add(e[n][0],e[n][1])},created:function(e){var n=t[t.length-1];n&&(n.childDependencies.add(e),e[a]&&e[a](n))},ignore:function(e){return function(){if(t.length){var a=t[t.length-1];a.ignore++;var n=e.apply(this,arguments);return a.ignore--,n}return e.apply(this,arguments)}},peekValue:function(e){if(!e||!e[n])return e;if(t.length){var a=t[t.length-1];a.ignore++;var r=e[n]();return a.ignore--,r}return e[n]()},isRecording:function(){var e=t.length,a=e&&t[e-1];return a&&0===a.ignore&&a},makeDependenciesRecord:function(e){return{traps:null,keyDependencies:new Map,valueDependencies:new Set,ignore:0,name:e}},makeDependenciesRecorder:function(){return r.makeDependenciesRecord()},trap:function(){if(t.length){var e=t[t.length-1],a=e.traps,n=e.traps=[];return function(){return e.traps=a,n}}return function(){return[]}},trapsCount:function(){if(t.length){var e=t[t.length-1];return e.traps.length}return 0}};if(canNamespace_1_0_0_canNamespace.ObservationRecorder)throw new Error("You can't have two versions of can-observation-recorder, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.ObservationRecorder=r});function isBuiltInPrototype(e){if(e===Object.prototype)return!0;var t=Object.prototype.toString.call(e),a=-1!==t.indexOf("[object ");return"[object Object]"!==t&&a}function getDeepSize(e,t){if(0===t)return canReflect_1_18_0_canReflect.size(e);if(0===canReflect_1_18_0_canReflect.size(e))return 0;var a=0;return canReflect_1_18_0_canReflect.each(e,function(e){a+=getDeepSize(e,t-1)}),a}function getDeep(e,t,a,n){if(e)if(n!==a)canReflect_1_18_0_canReflect.each(e,function(e){getDeep(e,t,a+1,n)});else if(canReflect_1_18_0_canReflect.isMoreListLikeThanMapLike(e))canReflect_1_18_0_canReflect.addValues(t,canReflect_1_18_0_canReflect.toArray(e));else throw new Error("can-key-tree: Map-type leaf containers are not supported yet.")}function clearDeep(e,t,a,n){if(!(a===t.length))canReflect_1_18_0_canReflect.each(e,function(r,s){clearDeep(r,t.concat(s),a,n),canReflect_1_18_0_canReflect.deleteKeyValue(e,s)});else if(canReflect_1_18_0_canReflect.isMoreListLikeThanMapLike(e)){var r=canReflect_1_18_0_canReflect.toArray(e);n&&r.forEach(function(e){n.apply(null,t.concat(e))}),canReflect_1_18_0_canReflect.removeValues(e,r)}else throw new Error("can-key-tree: Map-type leaf containers are not supported yet.")}var KeyTree=function(e,t){var a=e[0];this.root=canReflect_1_18_0_canReflect.isConstructorLike(a)?new a:a,this.callbacks=t||{},this.treeStructure=e,this.empty=!0};canReflect_1_18_0_canReflect.assign(KeyTree.prototype,{add:function(e){if(e.length>this.treeStructure.length)throw new Error("can-key-tree: Can not add path deeper than tree.");for(var t=this.root,a=!0===this.empty,n=0;n<e.length-1;n++){var r=e[n],s=canReflect_1_18_0_canReflect.getKeyValue(t,r);if(!s){var o=this.treeStructure[n+1];s=isBuiltInPrototype(o.prototype)?new o:new o(r),canReflect_1_18_0_canReflect.setKeyValue(t,r,s)}t=s}if(canReflect_1_18_0_canReflect.isMoreListLikeThanMapLike(t))canReflect_1_18_0_canReflect.addValues(t,[e[e.length-1]]);else throw new Error("can-key-tree: Map types are not supported yet.");return a&&(this.empty=!1,this.callbacks.onFirst&&this.callbacks.onFirst.call(this)),this},getNode:function(e){for(var t=this.root,a=0,n;a<e.length;a++)if(n=e[a],t=canReflect_1_18_0_canReflect.getKeyValue(t,n),!t)return;return t},get:function(e){var t=this.getNode(e);if(this.treeStructure.length===e.length)return t;var a=this.treeStructure[this.treeStructure.length-1],n=new a;return getDeep(t,n,e.length,this.treeStructure.length-1),n},delete:function(e,t){for(var a=this.root,n=[this.root],r=e[e.length-1],s=0;s<e.length-1;s++){var o=e[s],l=canReflect_1_18_0_canReflect.getKeyValue(a,o);if(void 0===l)return!1;n.push(l),a=l}if(!e.length)clearDeep(a,[],this.treeStructure.length-1,t);else if(e.length!==this.treeStructure.length){var d=canReflect_1_18_0_canReflect.getKeyValue(a,r);if(void 0!==d)clearDeep(d,e,this.treeStructure.length-1,t),canReflect_1_18_0_canReflect.deleteKeyValue(a,r);else return!1}else if(canReflect_1_18_0_canReflect.isMoreListLikeThanMapLike(a))t&&t.apply(null,e.concat(r)),canReflect_1_18_0_canReflect.removeValues(a,[r]);else throw new Error("can-key-tree: Map types are not supported yet.");for(s=n.length-2;0<=s&&0===canReflect_1_18_0_canReflect.size(a);s--)a=n[s],canReflect_1_18_0_canReflect.deleteKeyValue(a,e[s]);return 0===canReflect_1_18_0_canReflect.size(this.root)&&(this.empty=!0,this.callbacks.onEmpty&&this.callbacks.onEmpty.call(this)),!0},size:function(){return getDeepSize(this.root,this.treeStructure.length-1)},isEmpty:function(){return this.empty}});var canKeyTree_1_2_2_canKeyTree=KeyTree,canDefineLazyValue_1_1_1_defineLazyValue=function(e,t,a,n){Object.defineProperty(e,t,{configurable:!0,get:function(){Object.defineProperty(this,t,{value:void 0,writable:!0});var r=a.call(this,e,t);return Object.defineProperty(this,t,{value:r,writable:!!n}),r},set:function(e){return Object.defineProperty(this,t,{value:e,writable:!!n}),e}})},properties={on:function(e,t){this.handlers.add([t||"mutate",e])},off:function(e,t){e===void 0?t===void 0?this.handlers.delete([]):this.handlers.delete([t]):this.handlers.delete([t||"mutate",e])}},symbols={"can.onValue":properties.on,"can.offValue":properties.off,"can.dispatch":function(e,t){var a=[];a=[this.handlers.getNode([]),this,[e,t]],canQueues_1_3_1_canQueues.enqueueByQueue.apply(canQueues_1_3_1_canQueues,a)},"can.getWhatIChange":function(){},"can.isBound":function(){return!this.handlers.isEmpty()}};function defineLazyHandlers(){return new canKeyTree_1_2_2_canKeyTree([Object,Array],{onFirst:this.onBound!==void 0&&this.onBound.bind(this),onEmpty:this.onUnbound!==void 0&&this.onUnbound.bind(this)})}var mixinValueEventBindings=function(e){return canReflect_1_18_0_canReflect.assign(e,properties),canReflect_1_18_0_canReflect.assignSymbols(e,symbols),canDefineLazyValue_1_1_1_defineLazyValue(e,"handlers",defineLazyHandlers,!0),e};mixinValueEventBindings.addHandlers=function(e,t){return console.warn("can-event-queue/value: Avoid using addHandlers. Add onBound and onUnbound methods instead."),e.handlers=new canKeyTree_1_2_2_canKeyTree([Object,Array],t),e};var value=mixinValueEventBindings;function addNewKeyDependenciesIfNotInOld(e){(this.oldEventSet===void 0||!1===this.oldEventSet["delete"](e))&&canReflect_1_18_0_canReflect.onKeyValue(this.observable,e,this.onDependencyChange,"notify")}function addObservablesNewKeyDependenciesIfNotInOld(e,t){e.forEach(addNewKeyDependenciesIfNotInOld,{onDependencyChange:this.onDependencyChange,observable:t,oldEventSet:this.oldDependencies.keyDependencies.get(t)})}function removeKeyDependencies(e){canReflect_1_18_0_canReflect.offKeyValue(this.observable,e,this.onDependencyChange,"notify")}function removeObservablesKeyDependencies(e,t){e.forEach(removeKeyDependencies,{onDependencyChange:this.onDependencyChange,observable:t})}function addValueDependencies(e){!1===this.oldDependencies.valueDependencies.delete(e)&&canReflect_1_18_0_canReflect.onValue(e,this.onDependencyChange,"notify")}function removeValueDependencies(e){canReflect_1_18_0_canReflect.offValue(e,this.onDependencyChange,"notify")}var canObservation_4_2_0_recorderDependencyHelpers={updateObservations:function(e){e.newDependencies.keyDependencies.forEach(addObservablesNewKeyDependenciesIfNotInOld,e),e.oldDependencies.keyDependencies.forEach(removeObservablesKeyDependencies,e),e.newDependencies.valueDependencies.forEach(addValueDependencies,e),e.oldDependencies.valueDependencies.forEach(removeValueDependencies,e)},stopObserving:function(e,t){e.keyDependencies.forEach(removeObservablesKeyDependencies,{onDependencyChange:t}),e.valueDependencies.forEach(removeValueDependencies,{onDependencyChange:t})}},temporarilyBoundNoOperation=function(){},unbindTemporarilyBoundValue=function(){for(var e=0,t=observables.length;e<t;e++)canReflect_1_18_0_canReflect.offValue(observables[e],temporarilyBoundNoOperation);observables=null},observables;function temporarilyBind(e){var t=e.computeInstance||e;canReflect_1_18_0_canReflect.onValue(t,temporarilyBoundNoOperation),observables||(observables=[],setTimeout(unbindTemporarilyBoundValue,10)),observables.push(t)}var canObservation_4_2_0_temporarilyBind=temporarilyBind,dispatchSymbol=canSymbol_1_6_5_canSymbol.for("can.dispatch"),getChangesSymbol=canSymbol_1_6_5_canSymbol.for("can.getChangesDependencyRecord"),getValueDependenciesSymbol=canSymbol_1_6_5_canSymbol.for("can.getValueDependencies");function Observation(e,t,a){this.deriveQueue=canQueues_1_3_1_canQueues.deriveQueue,this.func=e,this.context=t,this.options=a||{priority:0,isObservable:!0},this.bound=!1,this._value=void 0,this.newDependencies=canObservationRecorder_1_3_1_canObservationRecorder.makeDependenciesRecord(),this.oldDependencies=null;var n=this;this.onDependencyChange=function(e){n.dependencyChange(this,e)},this.update=this.update.bind(this)}value(Observation.prototype),canReflect_1_18_0_canReflect.assign(Observation.prototype,{onBound:function(){this.bound=!0,this.oldDependencies=this.newDependencies,canObservationRecorder_1_3_1_canObservationRecorder.start(this._name),this._value=this.func.call(this.context),this.newDependencies=canObservationRecorder_1_3_1_canObservationRecorder.stop(),canObservation_4_2_0_recorderDependencyHelpers.updateObservations(this)},dependencyChange:function(){if(!0===this.bound){var e=[];e=[this.update,this,[],{priority:this.options.priority,element:this.options.element}],this.deriveQueue.enqueue.apply(this.deriveQueue,e)}},update:function(){if(!0===this.bound){var e=this._value;this.oldValue=null,this.onBound(),e!==this._value&&this[dispatchSymbol](this._value,e)}},onUnbound:function(){this.bound=!1,canObservation_4_2_0_recorderDependencyHelpers.stopObserving(this.newDependencies,this.onDependencyChange),this.newDependencies=canObservationRecorder_1_3_1_canObservationRecorder.makeDependenciesRecord()},get:function(){return this.options.isObservable&&canObservationRecorder_1_3_1_canObservationRecorder.isRecording()&&(canObservationRecorder_1_3_1_canObservationRecorder.add(this),!1===this.bound&&Observation.temporarilyBind(this)),!0===this.bound?(0<this.deriveQueue.tasksRemainingCount()&&Observation.updateChildrenAndSelf(this),this._value):this.func.call(this.context)},hasDependencies:function(){var e=this.newDependencies;return this.bound?0<e.valueDependencies.size+e.keyDependencies.size:void 0},log:function(){}}),Object.defineProperty(Observation.prototype,"value",{get:function(){return this.get()}});var observationProto={"can.getValue":Observation.prototype.get,"can.isValueLike":!0,"can.isMapLike":!1,"can.isListLike":!1,"can.valueHasDependencies":Observation.prototype.hasDependencies,"can.getValueDependencies":function(){if(!0===this.bound){var e=this.newDependencies,t={};return e.keyDependencies.size&&(t.keyDependencies=e.keyDependencies),e.valueDependencies.size&&(t.valueDependencies=e.valueDependencies),t}},"can.getPriority":function(){return this.options.priority},"can.setPriority":function(e){this.options.priority=e},"can.setElement":function(e){this.options.element=e,this.deriveQueue=canQueues_1_3_1_canQueues.domQueue||canQueues_1_3_1_canQueues.deriveQueue}};canReflect_1_18_0_canReflect.assignSymbols(Observation.prototype,observationProto),Observation.updateChildrenAndSelf=function(e){if(void 0!==e.update&&!0===e.deriveQueue.isEnqueued(e.update))return e.deriveQueue.flushQueuedTask(e.update),!0;if(e[getValueDependenciesSymbol]){var t=!1,a=e[getValueDependenciesSymbol]().valueDependencies||[];return a.forEach(function(e){!0===Observation.updateChildrenAndSelf(e)&&(t=!0)}),t}return!1};var alias={addAll:"addMany"};["add","addAll","ignore","trap","trapsCount","isRecording"].forEach(function(e){Observation[e]=function(){var t=alias[e]?alias[e]:e;return console.warn("can-observation: Call "+t+"() on can-observation-recorder."),canObservationRecorder_1_3_1_canObservationRecorder[t].apply(this,arguments)}}),Observation.prototype.start=function(){return console.warn("can-observation: Use .on and .off to bind."),this.onBound()},Observation.prototype.stop=function(){return console.warn("can-observation: Use .on and .off to bind."),this.onUnbound()},Observation.temporarilyBind=canObservation_4_2_0_temporarilyBind;var canObservation_4_2_0_canObservation=canNamespace_1_0_0_canNamespace.Observation=Observation,canSimpleObservable_2_5_0_log=function(){},dispatchSymbol$1=canSymbol_1_6_5_canSymbol.for("can.dispatch");function SimpleObservable(e){this._value=e}value(SimpleObservable.prototype),canReflect_1_18_0_canReflect.assignMap(SimpleObservable.prototype,{log:canSimpleObservable_2_5_0_log,get:function(){return canObservationRecorder_1_3_1_canObservationRecorder.add(this),this._value},set:function(e){var t=this._value;this._value=e,this[dispatchSymbol$1](e,t)}}),Object.defineProperty(SimpleObservable.prototype,"value",{set:function(e){return this.set(e)},get:function(){return this.get()}});var simpleObservableProto={"can.getValue":SimpleObservable.prototype.get,"can.setValue":SimpleObservable.prototype.set,"can.isMapLike":!1,"can.valueHasDependencies":function(){return!0}};canReflect_1_18_0_canReflect.assignSymbols(SimpleObservable.prototype,simpleObservableProto);var canSimpleObservable_2_5_0_canSimpleObservable=canNamespace_1_0_0_canNamespace.SimpleObservable=SimpleObservable,peek=canObservationRecorder_1_3_1_canObservationRecorder.ignore(canReflect_1_18_0_canReflect.getValue.bind(canReflect_1_18_0_canReflect));function SettableObservable(e,t,a){this.lastSetValue=new canSimpleObservable_2_5_0_canSimpleObservable(a),this.handler=this.handler.bind(this),this.observation=new canObservation_4_2_0_canObservation(function(){return e.call(t,this.lastSetValue.get())},this)}value(SettableObservable.prototype),canReflect_1_18_0_canReflect.assignMap(SettableObservable.prototype,{log:canSimpleObservable_2_5_0_log,constructor:SettableObservable,handler:function(e){var t=this._value,a;this._value=e,canQueues_1_3_1_canQueues.enqueueByQueue(this.handlers.getNode([]),this,[e,t],null,a)},onBound:function(){this.bound||(this.bound=!0,this.activate())},activate:function(){canReflect_1_18_0_canReflect.onValue(this.observation,this.handler,"notify"),this._value=peek(this.observation)},onUnbound:function(){this.bound=!1,canReflect_1_18_0_canReflect.offValue(this.observation,this.handler,"notify")},set:function(e){var t=this.lastSetValue.get();canReflect_1_18_0_canReflect.isObservableLike(t)&&canReflect_1_18_0_canReflect.isValueLike(t)&&!canReflect_1_18_0_canReflect.isObservableLike(e)?canReflect_1_18_0_canReflect.setValue(t,e):e!==t&&this.lastSetValue.set(e)},get:function(){return canObservationRecorder_1_3_1_canObservationRecorder.isRecording()&&(canObservationRecorder_1_3_1_canObservationRecorder.add(this),!this.bound&&this.onBound()),!0===this.bound?this._value:this.observation.get()},hasDependencies:function(){return canReflect_1_18_0_canReflect.valueHasDependencies(this.observation)},getValueDependencies:function(){return canReflect_1_18_0_canReflect.getValueDependencies(this.observation)}}),Object.defineProperty(SettableObservable.prototype,"value",{set:function(e){return this.set(e)},get:function(){return this.get()}}),canReflect_1_18_0_canReflect.assignSymbols(SettableObservable.prototype,{"can.getValue":SettableObservable.prototype.get,"can.setValue":SettableObservable.prototype.set,"can.isMapLike":!1,"can.getPriority":function(){return canReflect_1_18_0_canReflect.getPriority(this.observation)},"can.setPriority":function(e){canReflect_1_18_0_canReflect.setPriority(this.observation,e)},"can.valueHasDependencies":SettableObservable.prototype.hasDependencies,"can.getValueDependencies":SettableObservable.prototype.getValueDependencies});var settable=SettableObservable;function AsyncObservable(e,t,a){this.resolve=this.resolve.bind(this),this.lastSetValue=new canSimpleObservable_2_5_0_canSimpleObservable(a),this.handler=this.handler.bind(this),this.observation=new canObservation_4_2_0_canObservation(function(){this.resolveCalled=!1,this.inGetter=!0;var a=e.call(t,this.lastSetValue.get(),!0===this.bound?this.resolve:void 0);if(this.inGetter=!1,void 0===a?this.resolveCalled&&this.resolve(this._value):this.resolve(a),!0!==this.bound)return a},this)}AsyncObservable.prototype=Object.create(settable.prototype),AsyncObservable.prototype.constructor=AsyncObservable,AsyncObservable.prototype.handler=function(e){e!==void 0&&settable.prototype.handler.apply(this,arguments)};var peek$1=canObservationRecorder_1_3_1_canObservationRecorder.ignore(canReflect_1_18_0_canReflect.getValue.bind(canReflect_1_18_0_canReflect));AsyncObservable.prototype.activate=function(){canReflect_1_18_0_canReflect.onValue(this.observation,this.handler,"notify"),this.resolveCalled||(this._value=peek$1(this.observation))},AsyncObservable.prototype.resolve=function(e){this.resolveCalled=!0;var t=this._value;if(this._value=e,!this.inGetter){var a=[this.handlers.getNode([]),this,[e,t],null];canQueues_1_3_1_canQueues.enqueueByQueue.apply(canQueues_1_3_1_canQueues,a)}};var async=AsyncObservable;function dispatch(e){var t=this.eventHandlers[e];if(t)for(var a=t.slice(),n=this.getKeyValue(e),r=0;r<a.length;r++)a[r](n)}function Globals(){this.eventHandlers={},this.properties={}}Globals.prototype.define=function(e,t,a){return void 0===a&&(a=!0),this.properties[e]||(this.properties[e]={default:t,value:t,enableCache:a}),this},Globals.prototype.getKeyValue=function(e){var t=this.properties[e];if(t)return"function"==typeof t.value?t.cachedValue?t.cachedValue:t.enableCache?(t.cachedValue=t.value(),t.cachedValue):t.value():t.value},Globals.prototype.makeExport=function(e){return function(t){return 0===arguments.length?this.getKeyValue(e):"undefined"==typeof t||null===t?void this.deleteKeyValue(e):("function"==typeof t?this.setKeyValue(e,function(){return t}):this.setKeyValue(e,t),t)}.bind(this)},Globals.prototype.offKeyValue=function(e,t){if(this.properties[e]){var a=this.eventHandlers[e];if(a){var n=a.indexOf(t);a.splice(n,1)}}return this},Globals.prototype.onKeyValue=function(e,t){return this.properties[e]&&(!this.eventHandlers[e]&&(this.eventHandlers[e]=[]),this.eventHandlers[e].push(t)),this},Globals.prototype.deleteKeyValue=function(e){var t=this.properties[e];return void 0!==t&&(t.value=t.default,t.cachedValue=void 0,dispatch.call(this,e)),this},Globals.prototype.setKeyValue=function(e,t){if(!this.properties[e])return this.define(e,t);var a=this.properties[e];return a.value=t,a.cachedValue=void 0,dispatch.call(this,e),this},Globals.prototype.reset=function(){for(var e in this.properties)this.properties.hasOwnProperty(e)&&(this.properties[e].value=this.properties[e].default,this.properties[e].cachedValue=void 0,dispatch.call(this,e));return this},canReflect_1_18_0_canReflect.assignSymbols(Globals.prototype,{"can.getKeyValue":Globals.prototype.getKeyValue,"can.setKeyValue":Globals.prototype.setKeyValue,"can.deleteKeyValue":Globals.prototype.deleteKeyValue,"can.onKeyValue":Globals.prototype.onKeyValue,"can.offKeyValue":Globals.prototype.offKeyValue});var canGlobals_1_2_2_canGlobalsProto=Globals,canGlobals_1_2_2_canGlobalsInstance=createCommonjsModule(function(e){var t=new canGlobals_1_2_2_canGlobalsProto;if(canNamespace_1_0_0_canNamespace.globals)throw new Error("You can't have two versions of can-globals, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.globals=t});canGlobals_1_2_2_canGlobalsInstance.define("global",function(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:"object"==typeof process&&"[object process]"==={}.toString.call(process)?commonjsGlobal:window});var global_1=canGlobals_1_2_2_canGlobalsInstance.makeExport("global");canGlobals_1_2_2_canGlobalsInstance.define("document",function(){return canGlobals_1_2_2_canGlobalsInstance.getKeyValue("global").document});var document$1=canGlobals_1_2_2_canGlobalsInstance.makeExport("document");canGlobals_1_2_2_canGlobalsInstance.define("isNode",function(){return"object"==typeof process&&"[object process]"==={}.toString.call(process)});var isNode=canGlobals_1_2_2_canGlobalsInstance.makeExport("isNode");canGlobals_1_2_2_canGlobalsInstance.define("isBrowserWindow",function(){var e=canGlobals_1_2_2_canGlobalsInstance.getKeyValue("isNode");return"undefined"!=typeof window&&"undefined"!=typeof document&&!1===e});var isBrowserWindow=canGlobals_1_2_2_canGlobalsInstance.makeExport("isBrowserWindow");function getTargetDocument(e){return e.ownerDocument||document$1()}function createEvent(e,t,a,n){var r=getTargetDocument(e),s=r.createEvent("HTMLEvents"),o;if("string"==typeof t)o=t;else for(var i in o=t.type,t)void 0===s[i]&&(s[i]=t[i]);return void 0===a&&(a=!0),s.initEvent(o,a,n),s}function isDomEventTarget(e){if(!(e&&e.nodeName))return e===window;var t=e.nodeType;return 1===t||9===t||11===t}function addDomContext(e,t){return isDomEventTarget(e)&&(t=Array.prototype.slice.call(t,0),t.unshift(e)),t}function removeDomContext(e,t){return isDomEventTarget(e)||(t=Array.prototype.slice.call(t,0),e=t.shift()),{context:e,args:t}}var fixSyntheticEventsOnDisabled=!1;(function(){if(isBrowserWindow()){var e=document.createElement("input");e.disabled=!0;var t=setTimeout(function(){fixSyntheticEventsOnDisabled=!0},50),a=function a(){clearTimeout(t),e.removeEventListener("fix_synthetic_events_on_disabled_test",a)};e.addEventListener("fix_synthetic_events_on_disabled_test",a);try{var n=document.create("HTMLEvents");n.initEvent("fix_synthetic_events_on_disabled_test",!1),e.dispatchEvent(n)}catch(t){a(),fixSyntheticEventsOnDisabled=!0}}})();function isDispatchingOnDisabled(e,t){var a=t.type,n=!!e.disabled;return("inserted"===a||"removed"===a)&&n}function forceEnabledForDispatch(e,t){return fixSyntheticEventsOnDisabled&&isDispatchingOnDisabled(e,t)}var util={createEvent:createEvent,addDomContext:addDomContext,removeDomContext:removeDomContext,isDomEventTarget:isDomEventTarget,getTargetDocument:getTargetDocument,forceEnabledForDispatch:forceEnabledForDispatch};function EventRegistry(){this._registry={}}var makeEventRegistry=function(){return new EventRegistry};EventRegistry.prototype.has=function(e){return!!this._registry[e]},EventRegistry.prototype.get=function(e){return this._registry[e]},EventRegistry.prototype.add=function(e,t){if(!e)throw new Error("An EventDefinition must be provided");if("function"!=typeof e.addEventListener)throw new TypeError("EventDefinition addEventListener must be a function");if("function"!=typeof e.removeEventListener)throw new TypeError("EventDefinition removeEventListener must be a function");if(t=t||e.defaultEventType,"string"!=typeof t)throw new TypeError("Event type must be a string, not "+t);if(this.has(t))throw new Error("Event \""+t+"\" is already registered");this._registry[t]=e;var a=this;return function(){a._registry[t]=void 0}};var useCapture=function(e){return"focus"===e||"blur"===e};function makeDelegator(e){var t=function(e){this.element=e,this.events={},this.delegated={}};return canReflect_1_18_0_canReflect.assignSymbols(t.prototype,{"can.setKeyValue":function(t,a){var n=this.delegated[t]=function(e){var t=e.target,n=!0,r=e.stopPropagation;e.stopPropagation=function(){r.apply(this,arguments),n=!1};var s=e.stopImmediatePropagation;e.stopImmediatePropagation=function(){s.apply(this,arguments),n=!1};do{var o=t===document?document.documentElement:t,i=o.matches||o.msMatchesSelector;canReflect_1_18_0_canReflect.each(a,function(t,a){i&&i.call(o,a)&&t.forEach(function(t){t.call(o,e)})}),t=t.parentNode}while(t&&t!==e.currentTarget&&n)};this.events[t]=a,e.addEventListener(this.element,t,n,useCapture(t))},"can.getKeyValue":function(e){return this.events[e]},"can.deleteKeyValue":function(t){e.removeEventListener(this.element,t,this.delegated[t],useCapture(t)),delete this.delegated[t],delete this.events[t]},"can.getOwnEnumerableKeys":function(){return Object.keys(this.events)}}),t}var MakeDelegateEventTree=function(e){var t=makeDelegator(e);return new canKeyTree_1_2_2_canKeyTree([Map,t,Object,Array])},domEvents={_eventRegistry:makeEventRegistry(),addEvent:function(e,t){return this._eventRegistry.add(e,t)},addEventListener:function(e,t){var a=domEvents._eventRegistry.has(t);if(a){var n=domEvents._eventRegistry.get(t);return n.addEventListener.apply(domEvents,arguments)}var r=Array.prototype.slice.call(arguments,1);return e.addEventListener.apply(e,r)},removeEventListener:function(e,t){var a=domEvents._eventRegistry.has(t);if(a){var n=domEvents._eventRegistry.get(t);return n.removeEventListener.apply(domEvents,arguments)}var r=Array.prototype.slice.call(arguments,1);return e.removeEventListener.apply(e,r)},addDelegateListener:function(e,t,a,n){domEvents._eventTree.add([e,t,a,n])},removeDelegateListener:function(e,t,a,n){domEvents._eventTree.delete([e,t,a,n])},dispatch:function(e,t,a,n){var r=util.createEvent(e,t,a,n),s=util.forceEnabledForDispatch(e,r);s&&(e.disabled=!1);var o=e.dispatchEvent(r);return s&&(e.disabled=!0),o}};domEvents._eventTree=MakeDelegateEventTree(domEvents);var canDomEvents_1_3_11_canDomEvents=canNamespace_1_0_0_canNamespace.domEvents=domEvents,isDomEventTarget$1=util.isDomEventTarget,metaSymbol=canSymbol_1_6_5_canSymbol.for("can.meta"),dispatchBoundChangeSymbol=canSymbol_1_6_5_canSymbol.for("can.dispatchInstanceBoundChange"),dispatchInstanceOnPatchesSymbol=canSymbol_1_6_5_canSymbol.for("can.dispatchInstanceOnPatches"),onKeyValueSymbol$1=canSymbol_1_6_5_canSymbol.for("can.onKeyValue"),offKeyValueSymbol=canSymbol_1_6_5_canSymbol.for("can.offKeyValue"),onEventSymbol=canSymbol_1_6_5_canSymbol.for("can.onEvent"),offEventSymbol=canSymbol_1_6_5_canSymbol.for("can.offEvent"),onValueSymbol$1=canSymbol_1_6_5_canSymbol.for("can.onValue"),offValueSymbol=canSymbol_1_6_5_canSymbol.for("can.offValue"),inSetupSymbol=canSymbol_1_6_5_canSymbol.for("can.initializing"),legacyMapBindings;function addHandlers(e,t){t.handlers||(t.handlers=new canKeyTree_1_2_2_canKeyTree([Object,Object,Object,Array],{onFirst:function(){e._eventSetup!==void 0&&e._eventSetup();var t=e.constructor;t[dispatchBoundChangeSymbol]!==void 0&&e instanceof t&&t[dispatchBoundChangeSymbol](e,!0)},onEmpty:function(){e._eventTeardown!==void 0&&e._eventTeardown();var t=e.constructor;t[dispatchBoundChangeSymbol]!==void 0&&e instanceof t&&t[dispatchBoundChangeSymbol](e,!1)}})),t.listenHandlers||(t.listenHandlers=new canKeyTree_1_2_2_canKeyTree([Map,Map,Object,Array]))}var ensureMeta=function(e){var t=e[metaSymbol];return t||(t={},canReflect_1_18_0_canReflect.setKeyValue(e,metaSymbol,t)),addHandlers(e,t),t};function stopListeningArgumentsToKeys(e,t,a,n){arguments.length&&canReflect_1_18_0_canReflect.isPrimitive(e)&&(n=a,a=t,t=e,e=this.context),"function"==typeof t&&(n=a,a=t,t=void 0),"string"==typeof a&&(n=a,a=void 0);var r=[];return e&&(r.push(e),(t||a||n)&&(r.push(t),(n||a)&&(r.push(n||this.defaultQueue),a&&r.push(a)))),r}var props={dispatch:function(e,t){if(!0!==this.__inSetup&&!0!==this[inSetupSymbol]){"string"==typeof e&&(e={type:e});var a=ensureMeta(this),n=a.handlers,r=void 0!==e.type&&n.getNode([e.type]),s=e.patches&&this.constructor[dispatchInstanceOnPatchesSymbol],o=void 0!==e.patches&&n.getNode(["can.patches","onKeyValue"]),i=void 0!==e.keyChanged&&n.getNode(["can.keys","onKeyValue"]),l=s||r||o||i;if(l&&canQueues_1_3_1_canQueues.batch.start(),r&&(r.onKeyValue&&canQueues_1_3_1_canQueues.enqueueByQueue(r.onKeyValue,this,t,e.makeMeta,e.reasonLog),r.event)){e.batchNum=canQueues_1_3_1_canQueues.batch.number();var d=[e].concat(t);canQueues_1_3_1_canQueues.enqueueByQueue(r.event,this,d,e.makeMeta,e.reasonLog)}i&&canQueues_1_3_1_canQueues.enqueueByQueue(i,this,[e.keyChanged],e.makeMeta,e.reasonLog),o&&canQueues_1_3_1_canQueues.enqueueByQueue(o,this,[e.patches],e.makeMeta,e.reasonLog),s&&this.constructor[dispatchInstanceOnPatchesSymbol](this,e.patches),l&&canQueues_1_3_1_canQueues.batch.stop()}return e},addEventListener:function(e,t,a){return ensureMeta(this).handlers.add([e,"event",a||"mutate",t]),this},removeEventListener:function(e,t,a){if(e===void 0){var n=ensureMeta(this).handlers,r=n.getNode([]);Object.keys(r).forEach(function(e){n.delete([e,"event"])})}else t||a?t?ensureMeta(this).handlers.delete([e,"event",a||"mutate",t]):ensureMeta(this).handlers.delete([e,"event",a||"mutate"]):ensureMeta(this).handlers.delete([e,"event"]);return this},one:function(e,t){var a=function(){return legacyMapBindings.off.call(this,e,a),t.apply(this,arguments)};return legacyMapBindings.on.call(this,e,a),this},listenTo:function(e,t,a,n){return canReflect_1_18_0_canReflect.isPrimitive(e)&&(n=a,a=t,t=e,e=this),"function"==typeof t&&(n=a,a=t,t=void 0),ensureMeta(this).listenHandlers.add([e,t,n||"mutate",a]),legacyMapBindings.on.call(e,t,a,n||"mutate"),this},stopListening:function(){function e(e,t,a,n){legacyMapBindings.off.call(e,t,n,a)}var t=stopListeningArgumentsToKeys.apply({context:this,defaultQueue:"mutate"},arguments),a=ensureMeta(this).listenHandlers;return a.delete(t,e),this},on:function(e,t,a){var n=isDomEventTarget$1(this);if(n)"string"==typeof t?canDomEvents_1_3_11_canDomEvents.addDelegateListener(this,e,t,a):canDomEvents_1_3_11_canDomEvents.addEventListener(this,e,t,a);else if(this[onEventSymbol])this[onEventSymbol](e,t,a);else if("addEventListener"in this)this.addEventListener(e,t,a);else if(this[onKeyValueSymbol$1])canReflect_1_18_0_canReflect.onKeyValue(this,e,t,a);else if(!e&&this[onValueSymbol$1])canReflect_1_18_0_canReflect.onValue(this,t,a);else throw new Error("can-event-queue: Unable to bind "+e);return this},off:function(e,t,a){var n=isDomEventTarget$1(this);if(n)"string"==typeof t?canDomEvents_1_3_11_canDomEvents.removeDelegateListener(this,e,t,a):canDomEvents_1_3_11_canDomEvents.removeEventListener(this,e,t,a);else if(this[offEventSymbol])this[offEventSymbol](e,t,a);else if("removeEventListener"in this)this.removeEventListener(e,t,a);else if(this[offKeyValueSymbol])canReflect_1_18_0_canReflect.offKeyValue(this,e,t,a);else if(!e&&this[offValueSymbol])canReflect_1_18_0_canReflect.offValue(this,t,a);else throw new Error("can-event-queue: Unable to unbind "+e);return this}},symbols$1={"can.onKeyValue":function(e,t,a){ensureMeta(this).handlers.add([e,"onKeyValue",a||"mutate",t])},"can.offKeyValue":function(e,t,a){ensureMeta(this).handlers.delete([e,"onKeyValue",a||"mutate",t])},"can.isBound":function(){return!ensureMeta(this).handlers.isEmpty()},"can.getWhatIChange":function(){},"can.onPatches":function(e,t){var a=ensureMeta(this).handlers;a.add(["can.patches","onKeyValue",t||"notify",e])},"can.offPatches":function(e,t){var a=ensureMeta(this).handlers;a.delete(["can.patches","onKeyValue",t||"notify",e])}};function defineNonEnumerable(e,t,a){Object.defineProperty(e,t,{enumerable:!1,value:a})}legacyMapBindings=function(e){return canReflect_1_18_0_canReflect.assignMap(e,props),canReflect_1_18_0_canReflect.assignSymbols(e,symbols$1)},defineNonEnumerable(legacyMapBindings,"addHandlers",addHandlers),defineNonEnumerable(legacyMapBindings,"stopListeningArgumentsToKeys",stopListeningArgumentsToKeys),props.bind=props.addEventListener,props.unbind=props.removeEventListener,canReflect_1_18_0_canReflect.assignMap(legacyMapBindings,props),canReflect_1_18_0_canReflect.assignSymbols(legacyMapBindings,symbols$1),defineNonEnumerable(legacyMapBindings,"start",function(){console.warn("use can-queues.batch.start()"),canQueues_1_3_1_canQueues.batch.start()}),defineNonEnumerable(legacyMapBindings,"stop",function(){console.warn("use can-queues.batch.stop()"),canQueues_1_3_1_canQueues.batch.stop()}),defineNonEnumerable(legacyMapBindings,"flush",function(){console.warn("use can-queues.flush()"),canQueues_1_3_1_canQueues.flush()}),defineNonEnumerable(legacyMapBindings,"afterPreviousEvents",function(e){console.warn("don't use afterPreviousEvents"),canQueues_1_3_1_canQueues.mutateQueue.enqueue(function(){canQueues_1_3_1_canQueues.mutateQueue.enqueue(e)}),canQueues_1_3_1_canQueues.flush()}),defineNonEnumerable(legacyMapBindings,"after",function(e){console.warn("don't use after"),canQueues_1_3_1_canQueues.mutateQueue.enqueue(e),canQueues_1_3_1_canQueues.flush()});var map$1=legacyMapBindings,getChangesSymbol$1=canSymbol_1_6_5_canSymbol.for("can.getChangesDependencyRecord"),metaSymbol$1=canSymbol_1_6_5_canSymbol.for("can.meta");function ResolverObservable(e,t,a,n){this.resolver=canObservationRecorder_1_3_1_canObservationRecorder.ignore(e),this.context=t,this._valueOptions={resolve:this.resolve.bind(this),listenTo:this.listenTo.bind(this),stopListening:this.stopListening.bind(this),lastSet:new canSimpleObservable_2_5_0_canSimpleObservable(a)},this.update=this.update.bind(this),this.contextHandlers=new WeakMap,this.teardown=null,this.binder={},this[metaSymbol$1]=canReflect_1_18_0_canReflect.assignMap({},n)}ResolverObservable.prototype=Object.create(settable.prototype);function deleteHandler(e,t,a,n){map$1.off.call(e,t,n,a)}canReflect_1_18_0_canReflect.assignMap(ResolverObservable.prototype,{constructor:ResolverObservable,listenTo:function(e,t,a,n){canReflect_1_18_0_canReflect.isPrimitive(e)&&(a=t,t=e,e=this.context),"function"==typeof t&&(a=t,t=void 0);var r=this,s=a.bind(this.context);s[getChangesSymbol$1]=function(){var e=new Set([r]);return{valueDependencies:e}},this.contextHandlers.set(a,s),map$1.listenTo.call(this.binder,e,t,s,n||"notify")},stopListening:function(){var e=this.binder[canSymbol_1_6_5_canSymbol.for("can.meta")],t=e&&e.listenHandlers;if(t){var a=map$1.stopListeningArgumentsToKeys.call({context:this.context,defaultQueue:"notify"});t.delete(a,deleteHandler)}return this},resolve:function(e){if(this._value=e,this.isBinding)return this.lastValue=this._value,e;if(this._value!==this.lastValue){canQueues_1_3_1_canQueues.batch.start(),canQueues_1_3_1_canQueues.deriveQueue.enqueue(this.update,this,[],{}),canQueues_1_3_1_canQueues.batch.stop()}return e},update:function(){if(this.lastValue!==this._value){var e=this.lastValue;this.lastValue=this._value,canQueues_1_3_1_canQueues.enqueueByQueue(this.handlers.getNode([]),this,[this._value,e])}},activate:function(){this.isBinding=!0,this.teardown=this.resolver.call(this.context,this._valueOptions),this.isBinding=!1},onUnbound:function(){this.bound=!1,map$1.stopListening.call(this.binder),null!=this.teardown&&(this.teardown(),this.teardown=null)},set:function(e){this._valueOptions.lastSet.set(e)},get:function(){if(canObservationRecorder_1_3_1_canObservationRecorder.isRecording()&&(canObservationRecorder_1_3_1_canObservationRecorder.add(this),!this.bound&&this.onBound()),!0===this.bound)return this._value;this[metaSymbol$1].resetUnboundValueInGet&&(this._value=void 0);var e=function(){};this.on(e);var t=this._value;return this.off(e),t},hasDependencies:function e(){var e=!1;if(this.bound){var t=this.binder[metaSymbol$1],a=t&&t.listenHandlers;e=!!a.size()}return e},getValueDependencies:function(){if(this.bound){var e=this.binder[canSymbol_1_6_5_canSymbol.for("can.meta")],t=e&&e.listenHandlers,a=new Map,n=new Set;if(t&&(canReflect_1_18_0_canReflect.each(t.root,function(e,t){canReflect_1_18_0_canReflect.each(e,function(e,r){if(void 0===r)n.add(t);else{var s=a.get(t);s||(s=new Set,a.set(t,s)),s.add(r)}})}),n.size||a.size)){var r={};return a.size&&(r.keyDependencies=a),n.size&&(r.valueDependencies=n),r}}}}),canReflect_1_18_0_canReflect.assignSymbols(ResolverObservable.prototype,{"can.getValue":ResolverObservable.prototype.get,"can.setValue":ResolverObservable.prototype.set,"can.isMapLike":!1,"can.getPriority":function(){return this.priority||0},"can.setPriority":function(e){this.priority=e},"can.valueHasDependencies":ResolverObservable.prototype.hasDependencies,"can.getValueDependencies":ResolverObservable.prototype.getValueDependencies});var resolver=ResolverObservable,metaSymbol$2=canSymbol_1_6_5_canSymbol.for("can.meta");function addHandlers$1(e,t){t.lifecycleHandlers||(t.lifecycleHandlers=new canKeyTree_1_2_2_canKeyTree([Object,Array])),t.instancePatchesHandlers||(t.instancePatchesHandlers=new canKeyTree_1_2_2_canKeyTree([Object,Array]))}function ensureMeta$1(e){var t=e[metaSymbol$2];return t||(t={},canReflect_1_18_0_canReflect.setKeyValue(e,metaSymbol$2,t)),addHandlers$1(e,t),t}var props$1={};function onOffAndDispatch(e,t,a){props$1["can.on"+e]=function(e,t){ensureMeta$1(this)[a].add([t||"mutate",e])},props$1["can.off"+e]=function(e,t){ensureMeta$1(this)[a].delete([t||"mutate",e])},props$1["can."+t]=function(e,t){canQueues_1_3_1_canQueues.enqueueByQueue(ensureMeta$1(this)[a].getNode([]),this,[e,t])}}onOffAndDispatch("InstancePatches","dispatchInstanceOnPatches","instancePatchesHandlers"),onOffAndDispatch("InstanceBoundChange","dispatchInstanceBoundChange","lifecycleHandlers");function mixinTypeBindings(e){return canReflect_1_18_0_canReflect.assignSymbols(e,props$1)}Object.defineProperty(mixinTypeBindings,"addHandlers",{enumerable:!1,value:addHandlers$1});var type$1=mixinTypeBindings,canStringToAny_1_2_1_canStringToAny=function(e){switch(e){case"NaN":case"Infinity":return+e;case"null":return null;case"undefined":return;case"true":case"false":return"true"===e;default:var t=+e;return isNaN(t)?e:t;}};function toBoolean(e){return null==e?e:!!("false"!==e&&"0"!==e&&e)}var maybeBoolean=canReflect_1_18_0_canReflect.assignSymbols(toBoolean,{"can.new":toBoolean,"can.getSchema":function(){return{type:"Or",values:[!0,!1,void 0,null]}},"can.getName":function(){return"MaybeBoolean"},"can.isMember":function(e){return null==e||"boolean"==typeof e}});function toDate(e){var t=typeof e;return"string"==t?(e=Date.parse(e),isNaN(e)?null:new Date(e)):"number"===t?new Date(e):e}function DateStringSet(e){this.setValue=e;var t=toDate(e);this.value=null==t?t:t.getTime()}DateStringSet.prototype.valueOf=function(){return this.value},canReflect_1_18_0_canReflect.assignSymbols(DateStringSet.prototype,{"can.serialize":function(){return this.setValue}});var maybeDate=canReflect_1_18_0_canReflect.assignSymbols(toDate,{"can.new":toDate,"can.getSchema":function(){return{type:"Or",values:[Date,void 0,null]}},"can.ComparisonSetType":DateStringSet,"can.getName":function(){return"MaybeDate"},"can.isMember":function(e){return null==e||e instanceof Date}});function toNumber(e){return null==e?e:+e}var maybeNumber=canReflect_1_18_0_canReflect.assignSymbols(toNumber,{"can.new":toNumber,"can.getSchema":function(){return{type:"Or",values:[Number,void 0,null]}},"can.getName":function(){return"MaybeNumber"},"can.isMember":function(e){return null==e||"number"==typeof e}});function toString(e){return null==e?e:""+e}var maybeString=canReflect_1_18_0_canReflect.assignSymbols(toString,{"can.new":toString,"can.getSchema":function(){return{type:"Or",values:[String,void 0,null]}},"can.getName":function(){return"MaybeString"},"can.isMember":function(e){return null==e||"string"==typeof e}}),newSymbol$1=canSymbol_1_6_5_canSymbol.for("can.new"),serializeSymbol=canSymbol_1_6_5_canSymbol.for("can.serialize"),inSetupSymbol$1=canSymbol_1_6_5_canSymbol.for("can.initializing"),eventsProto,define,make,makeDefinition,getDefinitionsAndMethods,getDefinitionOrMethod;function isDefineType(e){return e&&(!0===e.canDefineType||e[newSymbol$1])}var peek$2=canObservationRecorder_1_3_1_canObservationRecorder.ignore(canReflect_1_18_0_canReflect.getValue.bind(canReflect_1_18_0_canReflect)),Object_defineNamedPrototypeProperty=Object.defineProperty;function defineConfigurableAndNotEnumerable(e,t,a){Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:a})}function eachPropertyDescriptor(e,t){for(var a in e)e.hasOwnProperty(a)&&t.call(e,a,Object.getOwnPropertyDescriptor(e,a))}function getEveryPropertyAndSymbol(e){var t=Object.getOwnPropertyNames(e),a="getOwnPropertySymbols"in Object?Object.getOwnPropertySymbols(e):[];return t.concat(a)}function cleanUpDefinition(e,t){t.value!==void 0&&("function"!=typeof t.value||0===t.value.length)&&(t.default=t.value,delete t.value),t.Value!==void 0&&(t.Default=t.Value,delete t.Value)}function isValueResolver(e){return"function"==typeof e.value&&e.value.length}var canDefine_2_8_0_canDefine=define=canNamespace_1_0_0_canNamespace.define=function(e,t,a){var n=Object.create(a?a.dataInitializers:null),r=Object.create(a?a.computedInitializers:null),s=getDefinitionsAndMethods(t,a,e),o;if(s.dataInitializers=n,s.computedInitializers=r,canReflect_1_18_0_canReflect.eachKey(s.definitions,function(t,a){define.property(e,a,t,n,r,s.defaultDefinition)}),e.hasOwnProperty("_data"))for(o in n)canDefineLazyValue_1_1_1_defineLazyValue(e._data,o,n[o].bind(e),!0);else canDefineLazyValue_1_1_1_defineLazyValue(e,"_data",function(){var e=this,t={};for(var a in n)canDefineLazyValue_1_1_1_defineLazyValue(t,a,n[a].bind(e),!0);return t});if(e.hasOwnProperty("_computed"))for(o in r)canDefineLazyValue_1_1_1_defineLazyValue(e._computed,o,r[o].bind(e));else canDefineLazyValue_1_1_1_defineLazyValue(e,"_computed",function(){var e=this,t=Object.create(null);for(var a in r)canDefineLazyValue_1_1_1_defineLazyValue(t,a,r[a].bind(e));return t});getEveryPropertyAndSymbol(eventsProto).forEach(function(t){Object.defineProperty(e,t,{enumerable:!1,value:eventsProto[t],configurable:!0,writable:!0})}),Object.defineProperty(e,"_define",{enumerable:!1,value:s,configurable:!0,writable:!0});var i=canSymbol_1_6_5_canSymbol.iterator||canSymbol_1_6_5_canSymbol.for("iterator");return e[i]||defineConfigurableAndNotEnumerable(e,i,function(){return new define.Iterator(this)}),s},onlyType=function(e){for(var t in e)if("type"!=t)return!1;return!0};define.extensions=function(){},define.property=function(e,t,a,n,r,s){var o=define.extensions.apply(this,arguments);o&&(a=makeDefinition(t,o,s||{},e));var i=a.type;if(i&&onlyType(a)&&i===define.types["*"])return void Object_defineNamedPrototypeProperty(e,t,{get:make.get.data(t),set:make.set.events(t,make.get.data(t),make.set.data(t),make.eventType.data(t)),enumerable:!0,configurable:!0});a.type=i;var l=a.get||isValueResolver(a)?"computed":"data",d=make.read[l](t),p=make.get[l](t),c=make.set[l](t),u=function(e){return e},y;a.Type&&(u=make.set.Type(t,a.Type,u)),i&&(u=make.set.type(t,i,u));var h=make.set.events(t,d,c,make.eventType[l](t));isValueResolver(a)?r[t]=make.valueResolver(t,a,u):(a.default!==void 0||a.Default!==void 0)&&(y=canObservationRecorder_1_3_1_canObservationRecorder.ignore(make.get.defaultValue(t,a,u,h))),a.get?r[t]=make.compute(t,a.get,y):y&&(n[t]=y),a.get&&a.set?(c=make.set.setter(t,a.set,make.read.lastSet(t),c,!0),0===a.get.length):a.set?c=make.set.setter(t,a.set,d,h,!1):"data"===l?c=h:a.get&&1>a.get.length&&(c=function(){}),i&&(c=make.set.type(t,i,c)),a.Type&&(c=make.set.Type(t,a.Type,c)),Object_defineNamedPrototypeProperty(e,t,{get:p,set:c,enumerable:"serialize"in a?!!a.serialize:!a.get,configurable:!0})},define.makeDefineInstanceKey=function(e){e[canSymbol_1_6_5_canSymbol.for("can.defineInstanceKey")]=function(t,a){var n=this.prototype._define;"object"==typeof a&&cleanUpDefinition(t,a,!1,this);var r=getDefinitionOrMethod(t,a,n.defaultDefinition,this);r&&"object"==typeof r?(define.property(e.prototype,t,r,n.dataInitializers,n.computedInitializers,n.defaultDefinition),n.definitions[t]=r):n.methods[t]=r,this.prototype.dispatch({action:"can.keys",type:"can.keys",target:this.prototype})}},define.Constructor=function(e,t){var a=function(e){Object.defineProperty(this,inSetupSymbol$1,{configurable:!0,enumerable:!1,value:!0,writable:!0}),define.setup.call(this,e,t),this[inSetupSymbol$1]=!1},n=define(a.prototype,e);return type$1(a),define.makeDefineInstanceKey(a,n),a},make={computeObj:function(e,t,a){var n={oldValue:void 0,compute:a,count:0,handler:function(a){var r=n.oldValue;n.oldValue=a,e.dispatch({action:"set",key:"prop",target:e,value:a,oldValue:r,type:t},[a,r])}};return n},valueResolver:function(e,t,a){var n=make.get.defaultValue(e,t,a);return function(){var a=this,r=n.call(this),s=make.computeObj(a,e,new resolver(t.value,a,r));return s}},compute:function(e,t,a){return function(){var n=this,r=a&&a.call(this),s,o;return s=0===t.length?new canObservation_4_2_0_canObservation(t,n):1===t.length?new settable(t,n,r):new async(t,n,r),o=make.computeObj(n,e,s),o}},set:{data:function(e){return function(t){this._data[e]=t}},computed:function(e){return function(t){canReflect_1_18_0_canReflect.setValue(this._computed[e].compute,t)}},events:function(e,t,a){return function(n){if(this[inSetupSymbol$1])a.call(this,n);else{var r=t.call(this);if(n===r)return;var s;a.call(this,n),s={patches:[{type:"set",key:e,value:n}],target:this,action:"set",value:n,oldValue:r,key:e,type:e},this.dispatch(s,[n,r])}}},setter:function(e,t,a,n,r){return function(e){var s=this;canQueues_1_3_1_canQueues.batch.start();var o=!1,i=a.call(this),l=t.call(this,e,function(e){n.call(s,e),o=!0},i);if(o)canQueues_1_3_1_canQueues.batch.stop();else if(r){if(void 0!==l)i!==l&&n.call(this,l),canQueues_1_3_1_canQueues.batch.stop();else{if(0===t.length)return n.call(this,e),void canQueues_1_3_1_canQueues.batch.stop();if(1===t.length)canQueues_1_3_1_canQueues.batch.stop();else return void canQueues_1_3_1_canQueues.batch.stop()}}else if(void 0!==l)n.call(this,l),canQueues_1_3_1_canQueues.batch.stop();else{if(0===t.length)return n.call(this,e),void canQueues_1_3_1_canQueues.batch.stop();if(1===t.length)n.call(this,void 0),canQueues_1_3_1_canQueues.batch.stop();else return void canQueues_1_3_1_canQueues.batch.stop()}}},type:function(e,t,a){function n(n){return a.call(this,t.call(this,n,e))}return isDefineType(t)?t.canDefineType?n:function(e){return a.call(this,canReflect_1_18_0_canReflect.convert(e,t))}:"object"==typeof t?make.set.Type(e,t,a):n},Type:function(e,t,a){return Array.isArray(t)&&define.DefineList?t=define.DefineList.extend({"#":t[0]}):"object"==typeof t&&(define.DefineMap?t=define.DefineMap.extend(t):t=define.Constructor(t)),function(e){return e instanceof t||null==e?a.call(this,e):a.call(this,new t(e))}}},eventType:{data:function(e){return function(t,a){return a!==void 0||this._data.hasOwnProperty(e)?"set":"add"}},computed:function(){return function(){return"set"}}},read:{data:function(e){return function(){return this._data[e]}},computed:function(e){return function(){return canReflect_1_18_0_canReflect.getValue(this._computed[e].compute)}},lastSet:function(e){return function(){var t=this._computed[e].compute;if(t.lastSetValue)return canReflect_1_18_0_canReflect.getValue(t.lastSetValue)}}},get:{defaultValue:function(e,t,a,n){return function(){var r=t.default;if(r!==void 0)"function"==typeof r&&(r=r.call(this)),r=a.call(this,r);else{var s=t.Default;s&&(r=a.call(this,new s))}if(t.set){var o=!0,i=make.set.setter(e,t.set,function(){},function(e){o?l=e:n.call(this,e)},t.get),l;return i.call(this,r),o=!1,l}return r}},data:function(e){return function(){return this[inSetupSymbol$1]||canObservationRecorder_1_3_1_canObservationRecorder.add(this,e),this._data[e]}},computed:function(e){return function(){var t=this._computed[e].compute;return canObservationRecorder_1_3_1_canObservationRecorder.isRecording()&&(canObservationRecorder_1_3_1_canObservationRecorder.add(this,e),!canReflect_1_18_0_canReflect.isBound(t)&&canObservation_4_2_0_canObservation.temporarilyBind(t)),peek$2(t)}}}},define.behaviors=["get","set","value","Value","type","Type","serialize"];var addBehaviorToDefinition=function(e,t,a){if("enumerable"===t)e.serialize=!!a;else if("type"===t){var n=a;"string"==typeof n&&(n=define.types[n],"object"==typeof n&&!isDefineType(n)&&(canAssign_1_3_3_canAssign(e,n),n=n[t])),"undefined"!=typeof n&&(e[t]=n)}else e[t]=a};makeDefinition=function(e,t,a,n){var r={};if(canReflect_1_18_0_canReflect.eachKey(t,function(e,t){addBehaviorToDefinition(r,t,e)}),canReflect_1_18_0_canReflect.eachKey(a,function(e,t){void 0===r[t]&&"type"!==t&&"Type"!==t&&(r[t]=e)}),t.Type){var s=t.Type,o=s[serializeSymbol];o&&(r.serialize=function(e){return o.call(e)}),s[newSymbol$1]&&(r.type=s,delete r.Type)}if("string"!=typeof t.type){if(!r.type&&!r.Type){var i=canReflect_1_18_0_canReflect.assignMap({},a);r=canReflect_1_18_0_canReflect.assignMap(i,r)}0===canReflect_1_18_0_canReflect.size(r)&&(r.type=define.types["*"])}return cleanUpDefinition(e,r,!0,n),r},getDefinitionOrMethod=function(e,t,a,n){var r;return"string"==typeof t?r={type:t}:t&&(t[serializeSymbol]||t[newSymbol$1])?r={Type:t}:"function"==typeof t?canReflect_1_18_0_canReflect.isConstructorLike(t)&&(r={Type:t}):Array.isArray(t)?r={Type:t}:canReflect_1_18_0_canReflect.isPlainObject(t)&&(r=t),r?makeDefinition(e,r,a,n):t},getDefinitionsAndMethods=function(e,t,a){var n=Object.create(t?t.definitions:null),r={},s=e["*"],o;return s?(delete e["*"],o=getDefinitionOrMethod("*",s,{})):o=Object.create(null),eachPropertyDescriptor(e,function(e,t){var s;if(s=t.get||t.set?{get:t.get,set:t.set}:t.value,"constructor"===e)return void(r[e]=s);var i=getDefinitionOrMethod(e,s,o,a);i&&"object"==typeof i&&0<canReflect_1_18_0_canReflect.size(i)?n[e]=i:"function"==typeof i&&(r[e]=i)}),s&&defineConfigurableAndNotEnumerable(e,"*",s),{definitions:n,methods:r,defaultDefinition:o}},eventsProto=map$1({});function setupComputed(e,t){var a=e._computed&&e._computed[t];a&&a.compute&&(a.count?a.count++:(a.count=1,canReflect_1_18_0_canReflect.onValue(a.compute,a.handler,"notify"),a.oldValue=peek$2(a.compute)))}function teardownComputed(e,t){var a=e._computed&&e._computed[t];a&&(1===a.count?(a.count=0,canReflect_1_18_0_canReflect.offValue(a.compute,a.handler,"notify")):a.count--)}var canMetaSymbol=canSymbol_1_6_5_canSymbol.for("can.meta");canAssign_1_3_3_canAssign(eventsProto,{_eventSetup:function(){},_eventTeardown:function(){},addEventListener:function(e){return setupComputed(this,e),map$1.addEventListener.apply(this,arguments)},removeEventListener:function(e){return teardownComputed(this,e),map$1.removeEventListener.apply(this,arguments)}}),eventsProto.on=eventsProto.bind=eventsProto.addEventListener,eventsProto.off=eventsProto.unbind=eventsProto.removeEventListener;var onKeyValueSymbol$2=canSymbol_1_6_5_canSymbol.for("can.onKeyValue"),offKeyValueSymbol$1=canSymbol_1_6_5_canSymbol.for("can.offKeyValue");canReflect_1_18_0_canReflect.assignSymbols(eventsProto,{"can.onKeyValue":function(e){return setupComputed(this,e),map$1[onKeyValueSymbol$2].apply(this,arguments)},"can.offKeyValue":function(e){return teardownComputed(this,e),map$1[offKeyValueSymbol$1].apply(this,arguments)}}),delete eventsProto.one,define.setup=function(e){Object.defineProperty(this,"constructor",{value:this.constructor,enumerable:!1,writable:!1}),Object.defineProperty(this,canMetaSymbol,{value:Object.create(null),enumerable:!1,writable:!1});var t=this._define.definitions,a=Object.create(null),n=this;canReflect_1_18_0_canReflect.eachKey(e,function(e,a){t[a]===void 0?define.expando(n,a,e):n[a]=e}),0<canReflect_1_18_0_canReflect.size(a)&&defineConfigurableAndNotEnumerable(this,"_instanceDefinitions",a)};var returnFirstArg=function(e){return e};define.expando=function(e,t,a){if(define._specialKeys[t])return!0;var n=e._define.definitions;if(!(n&&n[t])){var r=e._instanceDefinitions;if(!r){if(Object.isSealed(e))return;Object.defineProperty(e,"_instanceDefinitions",{configurable:!0,enumerable:!1,writable:!0,value:{}}),r=e._instanceDefinitions}if(!r[t]){var s=e._define.defaultDefinition||{type:define.types.observable};return define.property(e,t,s,{},{}),e._data[t]=s.type?define.make.set.type(t,s.type,returnFirstArg).call(e,a):s.Type&&canReflect_1_18_0_canReflect.isConstructorLike(s.Type)?define.make.set.Type(t,s.Type,returnFirstArg).call(e,a):define.types.observable(a),r[t]=s,e[inSetupSymbol$1]||(canQueues_1_3_1_canQueues.batch.start(),e.dispatch({action:"can.keys",target:e,type:"can.keys"}),Object.prototype.hasOwnProperty.call(e._data,t)?e.dispatch({action:"add",target:e,value:e._data[t],oldValue:void 0,key:t,type:t,patches:[{type:"add",key:t,value:e._data[t]}]},[e._data[t],void 0]):e.dispatch({type:"set",target:e,patches:[{type:"add",key:t,value:e._data[t]}]},[e._data[t],void 0]),canQueues_1_3_1_canQueues.batch.stop()),!0}}},define.replaceWith=canDefineLazyValue_1_1_1_defineLazyValue,define.eventsProto=eventsProto,define.defineConfigurableAndNotEnumerable=defineConfigurableAndNotEnumerable,define.make=make,define.getDefinitionOrMethod=getDefinitionOrMethod,define._specialKeys={_data:!0,_computed:!0};var simpleGetterSetters={};define.makeSimpleGetterSetter=function(e){if(simpleGetterSetters[e]===void 0){var t=make.set.events(e,make.get.data(e),make.set.data(e),make.eventType.data(e));simpleGetterSetters[e]={get:make.get.data(e),set:function(e){return t.call(this,define.types.observable(e))},enumerable:!0,configurable:!0}}return simpleGetterSetters[e]},define.Iterator=function(e){this.obj=e,this.definitions=Object.keys(e._define.definitions),this.instanceDefinitions=e._instanceDefinitions?Object.keys(e._instanceDefinitions):Object.keys(e),this.hasGet="function"==typeof e.get},define.Iterator.prototype.next=function(){var e;if(this.definitions.length){e=this.definitions.shift();var t=this.obj._define.definitions[e];if(t.get)return this.next()}else if(this.instanceDefinitions.length)e=this.instanceDefinitions.shift();else return{value:void 0,done:!0};return{value:[e,this.hasGet?this.obj.get(e):this.obj[e]],done:!1}};function isObservableValue(e){return canReflect_1_18_0_canReflect.isValueLike(e)&&canReflect_1_18_0_canReflect.isObservableLike(e)}define.types={date:maybeDate,number:maybeNumber,boolean:maybeBoolean,observable:function(e){return Array.isArray(e)&&define.DefineList?e=new define.DefineList(e):canReflect_1_18_0_canReflect.isPlainObject(e)&&define.DefineMap&&(e=new define.DefineMap(e)),e},stringOrObservable:function(e){return Array.isArray(e)?new define.DefaultList(e):canReflect_1_18_0_canReflect.isPlainObject(e)?new define.DefaultMap(e):canReflect_1_18_0_canReflect.convert(e,define.types.string)},htmlbool:function(e){return""===e||!!canStringToAny_1_2_1_canStringToAny(e)},"*":function(e){return e},any:function(e){return e},string:maybeString,compute:{set:function(e,t,a,n){return isObservableValue(e)?e:isObservableValue(n)?(canReflect_1_18_0_canReflect.setValue(n,e),n):e},get:function(e){return isObservableValue(e)?canReflect_1_18_0_canReflect.getValue(e):e}}},define.updateSchemaKeys=function(e,t){for(var a in t){var n=t[a];!1!==n.serialize&&(e.keys[a]=n.Type?n.Type:n.type?n.type:function(e){return e},!0===t[a].identity&&e.identity.push(a))}return e};var inSetupSymbol$2=canSymbol_1_6_5_canSymbol.for("can.initializing"),initializing=0,Construct=function(){if(arguments.length)return Construct.extend.apply(Construct,arguments)},canGetDescriptor;try{canGetDescriptor=!0}catch(t){canGetDescriptor=!1}var getDescriptor=function(e,t){var a=Object.getOwnPropertyDescriptor(e,t);return a&&(a.get||a.set)?a:null},inheritGetterSetter=function(e,t,a){a=a||e;var n;for(var r in e)(n=getDescriptor(e,r))?this._defineProperty(a,t,r,n):Construct._overwrite(a,t,r,e[r])},simpleInherit=function(e,t,a){for(var n in a=a||e,e)Construct._overwrite(a,t,n,e[n])},defineNonEnumerable$1=function(e,t,a){Object.defineProperty(e,t,{configurable:!0,writable:!0,enumerable:!1,value:a})};canReflect_1_18_0_canReflect.assignMap(Construct,{constructorExtends:!0,newInstance:function(){var e=this.instance(),t;if(e.setup){if(Object.defineProperty(e,"__inSetup",{configurable:!0,enumerable:!1,value:!0,writable:!0}),Object.defineProperty(e,inSetupSymbol$2,{configurable:!0,enumerable:!1,value:!0,writable:!0}),t=e.setup.apply(e,arguments),t instanceof Construct.ReturnValue)return t.value;e.__inSetup=!1,e[inSetupSymbol$2]=!1}return e.init&&e.init.apply(e,t||arguments),e},_inherit:canGetDescriptor?inheritGetterSetter:simpleInherit,_defineProperty:function(e,t,a,n){Object.defineProperty(e,a,n)},_overwrite:function(e,t,a,n){Object.defineProperty(e,a,{value:n,configurable:!0,enumerable:!0,writable:!0})},setup:function(e){var t=e.defaults?canReflect_1_18_0_canReflect.serialize(e.defaults):{};this.defaults=canReflect_1_18_0_canReflect.assignDeepMap(t,this.defaults)},instance:function(){initializing=1;var e=new this;return initializing=0,e},extend:function(e,a,n){function r(){if(!initializing)return(!this||this.constructor!==p)&&arguments.length&&p.constructorExtends?p.extend.apply(p,arguments):p.newInstance.apply(p,arguments)}var s=e,o=a,i=n;"string"!=typeof s&&(i=o,o=s,s=null),i||(i=o,o=null),i=i||{};var l=this,d=this.prototype,p,c;for(var u in c=this.instance(),Construct._inherit(i,d,c),s||(o&&o.shortName?s=o.shortName:this.shortName&&(s=this.shortName)),p="function"==typeof namedCtor?namedCtor(constructorName,r):function(){return r.apply(this,arguments)},l)l.hasOwnProperty(u)&&(p[u]=l[u]);if(Construct._inherit(o,l,p),canReflect_1_18_0_canReflect.assignMap(p,{constructor:p,prototype:c}),void 0!==s){if(Object.getOwnPropertyDescriptor){var y=Object.getOwnPropertyDescriptor(p,"name");(!y||y.configurable)&&Object.defineProperty(p,"name",{writable:!0,value:s,configurable:!0})}p.shortName=s}defineNonEnumerable$1(p.prototype,"constructor",p);var h=[l].concat(Array.prototype.slice.call(arguments)),t=p.setup.apply(p,h);return p.init&&p.init.apply(p,t||h),p},ReturnValue:function(e){this.value=e}}),defineNonEnumerable$1(Construct.prototype,"setup",function(){}),defineNonEnumerable$1(Construct.prototype,"init",function(){});var canConstruct_3_5_6_canConstruct=canNamespace_1_0_0_canNamespace.Construct=Construct,canDefine_2_8_0_ensureMeta=function(e){var t=canSymbol_1_6_5_canSymbol.for("can.meta"),a=e[t];return a||(a={},canReflect_1_18_0_canReflect.setKeyValue(e,t,a)),a},defineHelpers={defineExpando:canDefine_2_8_0_canDefine.expando,reflectSerialize:function(e){var t=this._define.definitions,a=this._define.defaultDefinition;return this.forEach(function(n,r){var s=t[r];n=s&&"function"==typeof s.serialize?s.serialize.call(this,n,r):a&&"function"==typeof a.serialize?a.serialize.call(this,n,r):canReflect_1_18_0_canReflect.serialize(n),void 0!==n&&(e[r]=n)},this),e},reflectUnwrap:function(e){return this.forEach(function(t,a){void 0!==t&&(e[a]=canReflect_1_18_0_canReflect.unwrap(t))}),e},log:function(e){var t=this,a=function(e){return"string"==typeof e?JSON.stringify(e):e},n=canDefine_2_8_0_ensureMeta(t),r=n.allowedLogKeysSet||new Set;n.allowedLogKeysSet=r,e&&r.add(e),n._log=function(n,s){var o=n.type;"can.onPatches"===o||e&&!r.has(o)||"can.keys"===o||e&&!r.has(o)||("add"===o||"remove"===o?dev.log(canReflect_1_18_0_canReflect.getName(t),"\n how   ",a(o),"\n what  ",a(s[0]),"\n index ",a(s[1])):dev.log(canReflect_1_18_0_canReflect.getName(t),"\n key ",a(o),"\n is  ",a(s[0]),"\n was ",a(s[1])))}},deleteKey:function(e){var t=this._instanceDefinitions;if(t&&Object.prototype.hasOwnProperty.call(t,e)&&!Object.isSealed(this)){delete t[e],canQueues_1_3_1_canQueues.batch.start(),this.dispatch({action:"can.keys",type:"can.keys",target:this});var a=this._data[e];a!==void 0&&(delete this._data[e],this.dispatch({action:"delete",key:e,value:void 0,oldValue:a,type:e,target:this,patches:[{type:"delete",key:e}]},[void 0,a])),canQueues_1_3_1_canQueues.batch.stop()}else this.set(e,void 0);return this}},defineHelpers_1=defineHelpers,keysForDefinition=function(e){var t=[];for(var a in e){var n=e[a];("object"!=typeof n||("serialize"in n?!!n.serialize:!n.get))&&t.push(a)}return t};function assign(e){canQueues_1_3_1_canQueues.batch.start(),canReflect_1_18_0_canReflect.assignMap(this,e||{}),canQueues_1_3_1_canQueues.batch.stop()}function update(e){canQueues_1_3_1_canQueues.batch.start(),canReflect_1_18_0_canReflect.updateMap(this,e||{}),canQueues_1_3_1_canQueues.batch.stop()}function assignDeep(e){canQueues_1_3_1_canQueues.batch.start(),canReflect_1_18_0_canReflect.assignDeepMap(this,e||{}),canQueues_1_3_1_canQueues.batch.stop()}function updateDeep(e){canQueues_1_3_1_canQueues.batch.start(),canReflect_1_18_0_canReflect.updateDeepMap(this,e||{}),canQueues_1_3_1_canQueues.batch.stop()}function setKeyValue(e,t){var a=defineHelpers_1.defineExpando(this,e,t);a||(this[e]=t)}function getKeyValue(e){var t=this[e];return void 0!==t||e in this||Object.isSealed(this)?t:(canObservationRecorder_1_3_1_canObservationRecorder.add(this,e),this[e])}var getSchemaSymbol$1=canSymbol_1_6_5_canSymbol.for("can.getSchema");function getSchema(){var e=this.prototype._define,t=e?e.definitions:{};return canDefine_2_8_0_canDefine.updateSchemaKeys({type:"map",identity:[],keys:{}},t)}var sealedSetup=function(e){canDefine_2_8_0_canDefine.setup.call(this,e||{},this.constructor.seal)},DefineMap=canConstruct_3_5_6_canConstruct.extend("DefineMap",{setup:function(e){var t=this.prototype,a;if(DefineMap){var n=canDefine_2_8_0_canDefine(t,t,e.prototype._define);for(a in canDefine_2_8_0_canDefine.makeDefineInstanceKey(this,n),type$1(this),DefineMap.prototype)canDefine_2_8_0_canDefine.defineConfigurableAndNotEnumerable(t,a,t[a]);t.setup===DefineMap.prototype.setup&&canDefine_2_8_0_canDefine.defineConfigurableAndNotEnumerable(t,"setup",sealedSetup);var r=Object.getOwnPropertyDescriptor(t,"_computed").get;Object.defineProperty(t,"_computed",{configurable:!0,enumerable:!1,get:function(){return this===t?void 0:r.call(this,arguments)}})}else for(a in t)canDefine_2_8_0_canDefine.defineConfigurableAndNotEnumerable(t,a,t[a]);canDefine_2_8_0_canDefine.defineConfigurableAndNotEnumerable(t,"constructor",this),this[getSchemaSymbol$1]=getSchema}},{setup:function(e,t){this._define||(Object.defineProperty(this,"_define",{enumerable:!1,value:{definitions:{}}}),Object.defineProperty(this,"_data",{enumerable:!1,value:{}})),canDefine_2_8_0_canDefine.setup.call(this,e||{},!0===t)},get:function(e){return e?getKeyValue.call(this,e):canReflect_1_18_0_canReflect.unwrap(this,Map)},set:function(e,t){return"object"==typeof e?!0===t?updateDeep.call(this,e):assignDeep.call(this,e):setKeyValue.call(this,e,t),this},assignDeep:function(e){return assignDeep.call(this,e),this},updateDeep:function(e){return updateDeep.call(this,e),this},assign:function(e){return assign.call(this,e),this},update:function(e){return update.call(this,e),this},serialize:function(){return canReflect_1_18_0_canReflect.serialize(this,Map)},deleteKey:defineHelpers_1.deleteKey,forEach:function(){var e=function(e,t,a){return canReflect_1_18_0_canReflect.eachKey(e,t,a)},t=canObservationRecorder_1_3_1_canObservationRecorder.ignore(e);return function(a,n,r){return!1===r?t(this,a,n):e(this,a,n)}}(),"*":{type:canDefine_2_8_0_canDefine.types.observable}}),defineMapProto={"can.isMapLike":!0,"can.isListLike":!1,"can.isValueLike":!1,"can.getKeyValue":getKeyValue,"can.setKeyValue":setKeyValue,"can.deleteKeyValue":defineHelpers_1.deleteKey,"can.getOwnKeys":function(){var e=canReflect_1_18_0_canReflect.getOwnEnumerableKeys(this);if(this._computed)for(var t=canReflect_1_18_0_canReflect.getOwnKeys(this._computed),a=0,n;a<t.length;a++)n=t[a],0>e.indexOf(n)&&e.push(n);return e},"can.getOwnEnumerableKeys":function(){return canObservationRecorder_1_3_1_canObservationRecorder.add(this,"can.keys"),canObservationRecorder_1_3_1_canObservationRecorder.add(Object.getPrototypeOf(this),"can.keys"),keysForDefinition(this._define.definitions).concat(keysForDefinition(this._instanceDefinitions))},"can.hasOwnKey":function(e){return Object.hasOwnProperty.call(this._define.definitions,e)||void 0!==this._instanceDefinitions&&Object.hasOwnProperty.call(this._instanceDefinitions,e)},"can.hasKey":function(e){return e in this._define.definitions||void 0!==this._instanceDefinitions&&e in this._instanceDefinitions},"can.assignDeep":assignDeep,"can.updateDeep":updateDeep,"can.unwrap":defineHelpers_1.reflectUnwrap,"can.serialize":defineHelpers_1.reflectSerialize,"can.keyHasDependencies":function(e){return!!(this._computed&&this._computed[e]&&this._computed[e].compute)},"can.getKeyDependencies":function(e){var t;return this._computed&&this._computed[e]&&this._computed[e].compute&&(t={},t.valueDependencies=new Set,t.valueDependencies.add(this._computed[e].compute)),t}};for(var prop in canReflect_1_18_0_canReflect.assignSymbols(DefineMap.prototype,defineMapProto),canReflect_1_18_0_canReflect.setKeyValue(DefineMap.prototype,canSymbol_1_6_5_canSymbol.iterator,function(){return new canDefine_2_8_0_canDefine.Iterator(this)}),canDefine_2_8_0_canDefine.eventsProto)DefineMap[prop]=canDefine_2_8_0_canDefine.eventsProto[prop],Object.defineProperty(DefineMap.prototype,prop,{enumerable:!1,value:canDefine_2_8_0_canDefine.eventsProto[prop],writable:!0});function getSymbolsForIE(e){return Object.getOwnPropertyNames(e).filter(function(e){return 0===e.indexOf("@@symbol")})}var eventsProtoSymbols="getOwnPropertySymbols"in Object?Object.getOwnPropertySymbols(canDefine_2_8_0_canDefine.eventsProto):getSymbolsForIE(canDefine_2_8_0_canDefine.eventsProto);eventsProtoSymbols.forEach(function(e){Object.defineProperty(DefineMap.prototype,e,{configurable:!0,enumerable:!1,value:canDefine_2_8_0_canDefine.eventsProto[e],writable:!0})}),canDefine_2_8_0_canDefine.DefineMap=DefineMap,Object.defineProperty(DefineMap.prototype,"toObject",{enumerable:!1,writable:!0,value:function(){return canLog_1_0_2_canLog.warn("Use DefineMap::get instead of DefineMap::toObject"),this.get()}});var map$2=canNamespace_1_0_0_canNamespace.DefineMap=DefineMap,slice$1=[].slice;function defaultIdentity(e,t){return e===t}function makeIdentityFromMapSchema(e){return e.identity&&e.identity.length?function(t,a){var n=canReflect_1_18_0_canReflect.getIdentity(t,e),r=canReflect_1_18_0_canReflect.getIdentity(a,e);return n===r}:defaultIdentity}function makeIdentityFromListSchema(e){return null==e.values?defaultIdentity:makeIdentityFromMapSchema(canReflect_1_18_0_canReflect.getSchema(e.values))}function makeIdentity(e,t){var a=canReflect_1_18_0_canReflect.getSchema(e),n;if(null!=a)if(null!=a.values)n=canReflect_1_18_0_canReflect.getSchema(a.values);else return defaultIdentity;return null==n&&0<t&&(n=canReflect_1_18_0_canReflect.getSchema(canReflect_1_18_0_canReflect.getKeyValue(e,0))),n?makeIdentityFromMapSchema(n):defaultIdentity}function reverseDiff(e,t,a,n,r){for(var s=a.length-1,o=n.length-1;s>e&&o>t;){var i=a[s],l=n[o];if(r(i,l,s)){s--,o--;continue}else return[{type:"splice",index:t,deleteCount:s-e+1,insert:slice$1.call(n,t,o+1)}]}return[{type:"splice",index:t,deleteCount:s-e+1,insert:slice$1.call(n,t,o+1)}]}var list=function(e,t,a){var n=0,r=0,s=canReflect_1_18_0_canReflect.size(e),o=canReflect_1_18_0_canReflect.size(t),i=[],l;for(l="function"===typeof a?a:null==a?makeIdentity(e,s):"map"===a.type?makeIdentityFromMapSchema(a):makeIdentityFromListSchema(a);n<s&&r<o;){var d=e[n],p=t[r];if(l(d,p,n)){n++,r++;continue}if(r+1<o&&l(d,t[r+1],n)){i.push({index:r,deleteCount:0,insert:[t[r]],type:"splice"}),n++,r+=2;continue}else if(n+1<s&&l(e[n+1],p,n+1)){i.push({index:r,deleteCount:1,insert:[],type:"splice"}),n+=2,r++;continue}else return i.push.apply(i,reverseDiff(n,r,e,t,l)),i}return r===o&&n===s?i:(i.push({type:"splice",index:r,deleteCount:s-n,insert:slice$1.call(t,r)}),i)},canCid_1_3_1_canCid=createCommonjsModule(function(e){var t=0,a="can"+new Date,n=function(e,n){var r=e.nodeName?a:"_cid";return e[r]||(t++,e[r]=(n||"")+t),e[r]};if(n.domExpando=a,n.get=function(e){var t=typeof e;return null!==t&&("object"===t||"function"===t)?n(e):t+":"+e},canNamespace_1_0_0_canNamespace.cid)throw new Error("You can't have two versions of can-cid, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.cid=n}),singleReference;function getKeyName(e,t){var a=t?canCid_1_3_1_canCid(e)+":"+t:canCid_1_3_1_canCid(e);return a||e}singleReference={set:function(e,t,a,n){e[getKeyName(t,n)]=a},getAndDelete:function(e,t,a){var n=getKeyName(t,a),r=e[n];return delete e[n],r}};var canSingleReference_1_3_0_canSingleReference=singleReference,make$1=canDefine_2_8_0_canDefine.make,splice=[].splice,runningNative=!1,identity=function(e){return e},localOnPatchesSymbol="can.patches",makeFilterCallback=function(e){return function(t){for(var a in e)if(t[a]!==e[a])return!1;return!0}},onKeyValue=canDefine_2_8_0_canDefine.eventsProto[canSymbol_1_6_5_canSymbol.for("can.onKeyValue")],offKeyValue=canDefine_2_8_0_canDefine.eventsProto[canSymbol_1_6_5_canSymbol.for("can.offKeyValue")],getSchemaSymbol$2=canSymbol_1_6_5_canSymbol.for("can.getSchema"),inSetupSymbol$3=canSymbol_1_6_5_canSymbol.for("can.initializing");function getSchema$1(){var e=this.prototype._define.definitions,t={type:"list",keys:{}};return t=canDefine_2_8_0_canDefine.updateSchemaKeys(t,e),t.keys["#"]&&(t.values=e["#"].Type,delete t.keys["#"]),t}var DefineList=canConstruct_3_5_6_canConstruct.extend("DefineList",{setup:function(e){if(DefineList){type$1(this);var t=this.prototype,a=canDefine_2_8_0_canDefine(t,t,e.prototype._define);canDefine_2_8_0_canDefine.makeDefineInstanceKey(this,a);var n=a.definitions["#"]||a.defaultDefinition;n&&(n.Type?this.prototype.__type=make$1.set.Type("*",n.Type,identity):n.type&&(this.prototype.__type=make$1.set.type("*",n.type,identity))),this[getSchemaSymbol$2]=getSchema$1}}},{setup:function(e){this._define||(Object.defineProperty(this,"_define",{enumerable:!1,value:{definitions:{length:{type:"number"},_length:{type:"number"}}}}),Object.defineProperty(this,"_data",{enumerable:!1,value:{}})),canDefine_2_8_0_canDefine.setup.call(this,{},!1),Object.defineProperty(this,"_length",{enumerable:!1,configurable:!0,writable:!0,value:0}),e&&this.splice.apply(this,[0,0].concat(canReflect_1_18_0_canReflect.toArray(e)))},__type:canDefine_2_8_0_canDefine.types.observable,_triggerChange:function(e,t,a,n){var r=+e;if(!isNaN(r)){var s=this._define.definitions["#"],o,i;"add"===t?(s&&"function"==typeof s.added&&canObservationRecorder_1_3_1_canObservationRecorder.ignore(s.added).call(this,a,r),o=[{type:"splice",insert:a,index:r,deleteCount:0}],i={type:t,action:"splice",insert:a,index:r,deleteCount:0,patches:o},this.dispatch(i,[a,r])):"remove"===t?(s&&"function"==typeof s.removed&&canObservationRecorder_1_3_1_canObservationRecorder.ignore(s.removed).call(this,n,r),o=[{type:"splice",index:r,deleteCount:n.length}],i={type:t,patches:o,action:"splice",index:r,deleteCount:n.length,target:this},this.dispatch(i,[n,r])):this.dispatch(t,[a,r])}else this.dispatch({type:""+e,target:this},[a,n])},get:function(e){return arguments.length?(isNaN(e)?canObservationRecorder_1_3_1_canObservationRecorder.add(this,e):canObservationRecorder_1_3_1_canObservationRecorder.add(this,"length"),this[e]):canReflect_1_18_0_canReflect.unwrap(this,Map)},set:function(e,t){if("object"==typeof e)canReflect_1_18_0_canReflect.isListLike(e)?t?this.replace(e):canReflect_1_18_0_canReflect.assignList(this,e):canReflect_1_18_0_canReflect.assignMap(this,e);else if(e=isNaN(+e)||e%1?e:+e,"number"==typeof e){if("number"==typeof e&&e>this._length-1){var a=Array(e+1-this._length);return a[a.length-1]=t,this.push.apply(this,a),a}this.splice(e,1,t)}else{var n=defineHelpers_1.defineExpando(this,e,t);n||(this[e]=t)}return this},assign:function(e){return canReflect_1_18_0_canReflect.isListLike(e)?canReflect_1_18_0_canReflect.assignList(this,e):canReflect_1_18_0_canReflect.assignMap(this,e),this},update:function(e){return canReflect_1_18_0_canReflect.isListLike(e)?canReflect_1_18_0_canReflect.updateList(this,e):canReflect_1_18_0_canReflect.updateMap(this,e),this},assignDeep:function(e){return canReflect_1_18_0_canReflect.isListLike(e)?canReflect_1_18_0_canReflect.assignDeepList(this,e):canReflect_1_18_0_canReflect.assignDeepMap(this,e),this},updateDeep:function(e){return canReflect_1_18_0_canReflect.isListLike(e)?canReflect_1_18_0_canReflect.updateDeepList(this,e):canReflect_1_18_0_canReflect.updateDeepMap(this,e),this},_items:function(){var e=[];return this._each(function(t){e.push(t)}),e},_each:function(e){for(var t=0,a=this._length;t<a;t++)e(this[t],t)},splice:function(e,t){var a=canReflect_1_18_0_canReflect.toArray(arguments),n=[],r=2<a.length,s=this._length,o,l,d;for(e=e||0,o=0,l=a.length-2;o<l;o++)d=o+2,a[d]=this.__type(a[d],d),n.push(a[d]),this[o+e]!==a[d]&&(r=!1);if(r&&this._length<=n.length)return n;void 0===t&&(t=a[1]=this._length-e),runningNative=!0;var p=splice.apply(this,a);return runningNative=!1,canQueues_1_3_1_canQueues.batch.start(),0<t&&this._triggerChange(""+e,"remove",void 0,p),2<a.length&&this._triggerChange(""+e,"add",n,p),this.dispatch("length",[this._length,s]),canQueues_1_3_1_canQueues.batch.stop(),p},serialize:function(){return canReflect_1_18_0_canReflect.serialize(this,Map)}});for(var prop$1 in canDefine_2_8_0_canDefine.eventsProto)Object.defineProperty(DefineList.prototype,prop$1,{enumerable:!1,value:canDefine_2_8_0_canDefine.eventsProto[prop$1],writable:!0});var eventsProtoSymbols$1="getOwnPropertySymbols"in Object?Object.getOwnPropertySymbols(canDefine_2_8_0_canDefine.eventsProto):[canSymbol_1_6_5_canSymbol.for("can.onKeyValue"),canSymbol_1_6_5_canSymbol.for("can.offKeyValue")];eventsProtoSymbols$1.forEach(function(e){Object.defineProperty(DefineList.prototype,e,{configurable:!0,enumerable:!1,value:canDefine_2_8_0_canDefine.eventsProto[e],writable:!0})});var getArgs=function(e){return e[0]&&Array.isArray(e[0])?e[0]:canReflect_1_18_0_canReflect.toArray(e)};for(var prop$1 in canReflect_1_18_0_canReflect.eachKey({push:"length",unshift:0},function(e,t){var a=[][t];DefineList.prototype[t]=function(){for(var t=[],n=e?this._length:0,r=arguments.length,s,o;r--;)o=arguments[r],t[r]=this.__type(o,r);return runningNative=!0,s=a.apply(this,t),runningNative=!1,(!this.comparator||t.length)&&(canQueues_1_3_1_canQueues.batch.start(),this._triggerChange(""+n,"add",t,void 0),this.dispatch("length",[this._length,n]),canQueues_1_3_1_canQueues.batch.stop()),s}}),canReflect_1_18_0_canReflect.eachKey({pop:"length",shift:0},function(e,t){var a=[][t];DefineList.prototype[t]=function(){if(this._length){var t=getArgs(arguments),n=e&&this._length?this._length-1:0,r=this._length?this._length:0,s;return runningNative=!0,s=a.apply(this,t),runningNative=!1,canQueues_1_3_1_canQueues.batch.start(),this._triggerChange(""+n,"remove",void 0,[s]),this.dispatch("length",[this._length,r]),canQueues_1_3_1_canQueues.batch.stop(),s}}}),canReflect_1_18_0_canReflect.eachKey({map:3,filter:3,reduce:4,reduceRight:4,every:3,some:3},function(e,t){DefineList.prototype[t]=function(){var a=this,n=[].slice.call(arguments,0),r=n[0],s=n[e-1]||a;"object"==typeof r&&(r=makeFilterCallback(r)),n[0]=function(){var t=[].slice.call(arguments,0);return t[e-3]=a.get(t[e-2]),r.apply(s,t)};var o=Array.prototype[t].apply(this,n);return"map"===t?new DefineList(o):"filter"===t?new a.constructor(o):o}}),canAssign_1_3_3_canAssign(DefineList.prototype,{includes:function(){var e=Array.prototype.includes;return e?function(){return e.apply(this,arguments)}:function(){throw new Error("DefineList.prototype.includes must have Array.prototype.includes available. Please add a polyfill to this environment.")}}(),indexOf:function(e,t){for(var a=t||0,n=this.length;a<n;a++)if(this.get(a)===e)return a;return-1},lastIndexOf:function(e,t){t="undefined"==typeof t?this.length-1:t;for(var a=t;0<=a;a--)if(this.get(a)===e)return a;return-1},join:function(){return canObservationRecorder_1_3_1_canObservationRecorder.add(this,"length"),[].join.apply(this,arguments)},reverse:function(){var e=[].reverse.call(this._items());return this.replace(e)},slice:function(){canObservationRecorder_1_3_1_canObservationRecorder.add(this,"length");var e=Array.prototype.slice.apply(this,arguments);return new this.constructor(e)},concat:function(){var e=[];return canReflect_1_18_0_canReflect.eachIndex(arguments,function(t){if(canReflect_1_18_0_canReflect.isListLike(t)){var a=Array.isArray(t)?t:canReflect_1_18_0_canReflect.toArray(t);a.forEach(function(t){e.push(this.__type(t))},this)}else e.push(this.__type(t))},this),new this.constructor(Array.prototype.concat.apply(canReflect_1_18_0_canReflect.toArray(this),e))},forEach:function(e,t){for(var a=0,n=this.length,r;a<n&&(r=this.get(a),!1!==e.call(t||r,r,a,this));a++);return this},replace:function(e){var t=list(this,e);canQueues_1_3_1_canQueues.batch.start();for(var a=0,n=t.length;a<n;a++)this.splice.apply(this,[t[a].index,t[a].deleteCount].concat(t[a].insert));return canQueues_1_3_1_canQueues.batch.stop(),this},sort:function(e){var t=Array.prototype.slice.call(this);return Array.prototype.sort.call(t,e),this.splice.apply(this,[0,t.length].concat(t)),this}}),canDefine_2_8_0_canDefine.eventsProto)DefineList[prop$1]=canDefine_2_8_0_canDefine.eventsProto[prop$1],Object.defineProperty(DefineList.prototype,prop$1,{enumerable:!1,value:canDefine_2_8_0_canDefine.eventsProto[prop$1],writable:!0});Object.defineProperty(DefineList.prototype,"length",{get:function(){return this[inSetupSymbol$3]||canObservationRecorder_1_3_1_canObservationRecorder.add(this,"length"),this._length},set:function(e){if(runningNative)return void(this._length=e);if(!(null==e||isNaN(+e)||e===this._length))if(e>this._length-1){var t=Array(e-this._length);this.push.apply(this,t)}else this.splice(e)},enumerable:!0}),DefineList.prototype.attr=function(e,t){return canLog_1_0_2_canLog.warn("DefineMap::attr shouldn't be called"),0===arguments.length?this.get():e&&"object"==typeof e?this.set.apply(this,arguments):1===arguments.length?this.get(e):this.set(e,t)},DefineList.prototype.item=function(e,t){return 1===arguments.length?this.get(e):this.set(e,t)},DefineList.prototype.items=function(){return canLog_1_0_2_canLog.warn("DefineList::get should should be used instead of DefineList::items"),this.get()};var defineListProto={"can.isMoreListLikeThanMapLike":!0,"can.isMapLike":!0,"can.isListLike":!0,"can.isValueLike":!1,"can.getKeyValue":DefineList.prototype.get,"can.setKeyValue":DefineList.prototype.set,"can.onKeyValue":function(e,t,a){var n;return isNaN(e)?onKeyValue.apply(this,arguments):(n=function(){t(this[e])},canSingleReference_1_3_0_canSingleReference.set(t,this,n,e),onKeyValue.call(this,"length",n,a))},"can.offKeyValue":function(e,t,a){var n;return isNaN(e)?offKeyValue.apply(this,arguments):(n=canSingleReference_1_3_0_canSingleReference.getAndDelete(t,this,e),offKeyValue.call(this,"length",n,a))},"can.deleteKeyValue":function(e){if(e=isNaN(+e)||e%1?e:+e,"number"==typeof e)this.splice(e,1);else{if("length"===e||"_length"===e)return;this.set(e,void 0)}return this},"can.assignDeep":function(e){canQueues_1_3_1_canQueues.batch.start(),canReflect_1_18_0_canReflect.assignList(this,e),canQueues_1_3_1_canQueues.batch.stop()},"can.updateDeep":function(e){canQueues_1_3_1_canQueues.batch.start(),this.replace(e),canQueues_1_3_1_canQueues.batch.stop()},"can.keyHasDependencies":function(e){return!!(this._computed&&this._computed[e]&&this._computed[e].compute)},"can.getKeyDependencies":function(e){var t;return this._computed&&this._computed[e]&&this._computed[e].compute&&(t={},t.valueDependencies=new Set,t.valueDependencies.add(this._computed[e].compute)),t},"can.splice":function(e,t,a){this.splice.apply(this,[e,t].concat(a))},"can.onPatches":function(e,t){this[canSymbol_1_6_5_canSymbol.for("can.onKeyValue")](localOnPatchesSymbol,e,t)},"can.offPatches":function(e,t){this[canSymbol_1_6_5_canSymbol.for("can.offKeyValue")](localOnPatchesSymbol,e,t)}};canReflect_1_18_0_canReflect.assignSymbols(DefineList.prototype,defineListProto),canReflect_1_18_0_canReflect.setKeyValue(DefineList.prototype,canSymbol_1_6_5_canSymbol.iterator,function(){var e=-1;return"number"!=typeof this.length&&(this.length=0),{next:function(){return e++,{value:this[e],done:e>=this.length}}.bind(this)}}),canDefine_2_8_0_canDefine.DefineList=DefineList;var list$1=canNamespace_1_0_0_canNamespace.DefineList=DefineList,utils={isContainer:function(e){var t=typeof e;return e&&("object"===t||"function"===t)},strReplacer:/\{([^\}]+)\}/g,parts:function(e){return Array.isArray(e)?e:"undefined"==typeof e?[]:(e+"").replace(/\[/g,".").replace(/]/g,"").split(".")}},canKey_1_2_1_utils=utils,_delete=function(e,t){for(var a=canKey_1_2_1_utils.parts(t),n=e,r=0;r<a.length-1;r++)n&&(n=canReflect_1_18_0_canReflect.getKeyValue(n,a[r]));n&&canReflect_1_18_0_canReflect.deleteKeyValue(n,a[a.length-1])};function get(e,t){var a=canKey_1_2_1_utils.parts(t),n=a.length,r,s,o;if(!n)return e;for(r=e,s=0;s<n&&canKey_1_2_1_utils.isContainer(r)&&null!==r;s++)o=r,r=canReflect_1_18_0_canReflect.getKeyValue(o,a[s]);return r}var get_1=get,replaceWith=function(e,t,a,n){return e.replace(canKey_1_2_1_utils.strReplacer,function(e,r){var s=get_1(t,r);return n&&_delete(t,r),a?a(r,s):s})},setValueSymbol$1=canSymbol_1_6_5_canSymbol.for("can.setValue");function set$1(e,t,a){for(var n=canKey_1_2_1_utils.parts(t),r=e,s=n.length,o=0;o<s-1&&canKey_1_2_1_utils.isContainer(r);o++)r=canReflect_1_18_0_canReflect.getKeyValue(r,n[o]);if(r)canReflect_1_18_0_canReflect.setKeyValue(r,n[o],a);else throw new TypeError("Cannot set value at key path '"+t+"'");return e}var set_1=set$1,walk=function(e,t,a){var n=canKey_1_2_1_utils.parts(t),r=n.length,s,o,l,d;if(r)for(s=e,o=0;o<r;o++){l=s,d=n[o],s=canKey_1_2_1_utils.isContainer(l)&&canReflect_1_18_0_canReflect.getKeyValue(l,d);var p=a({parent:l,key:d,value:s},o);void 0!==p&&(s=p)}};function deleteKeys(e){for(var t=e.length-1,a;0<=t;t--)if(a=e[t],delete a.parent[a.key],0!==canReflect_1_18_0_canReflect.size(a.parent))return}var transform=function(e,t){var a=canReflect_1_18_0_canReflect.serialize(e);return canReflect_1_18_0_canReflect.eachKey(t,function(e,t){var n=canKey_1_2_1_utils.parts(t),r=canKey_1_2_1_utils.parts(e),s=[];walk(a,n,function(e){s.push(e)});var o=s[s.length-1],l=o.value;void 0!==l&&(walk(a,r,function(e,t){return t<r.length-1&&!e.value?e.parent[e.key]={}:void(t===r.length-1&&(e.parent[e.key]=l))}),deleteKeys(s))}),a},canKey_1_2_1_canKey=canNamespace_1_0_0_canNamespace.key={deleteKey:_delete,get:get_1,replaceWith:replaceWith,set:set_1,transform:transform,walk:walk},key=function(e,t){var a=canKey_1_2_1_utils.parts(t),n=a.length-1,r=new canObservation_4_2_0_canObservation(function(){var t;return canKey_1_2_1_canKey.walk(e,a,function(e,a){a===n&&(t=e.value)}),t}),s=function(t){canKey_1_2_1_canKey.set(e,a,t)};Object.defineProperty(r,"value",{get:r.get,set:s});return canReflect_1_18_0_canReflect.assignSymbols(r,{"can.setValue":s})},canValue_1_1_1_canValue=canNamespace_1_0_0_canNamespace.value={bind:function(e,t){return key(e,t)},from:function(e,t){return new canObservation_4_2_0_canObservation(function(){return canKey_1_2_1_canKey.get(e,t)})},returnedBy:function(e,t,a){return 1===e.length?new settable(e,t,a):new canObservation_4_2_0_canObservation(e,t)},to:function(e,t){var a=key(e,t);return canReflect_1_18_0_canReflect.assignSymbols(a,{"can.getValue":null})},with:function(e){return new canSimpleObservable_2_5_0_canSimpleObservable(e)}},SimpleMap=canConstruct_3_5_6_canConstruct.extend("SimpleMap",{setup:function(e){this._data={},e&&"object"==typeof e&&this.attr(e)},attr:function(e,t){var a=this;if(0===arguments.length){canObservationRecorder_1_3_1_canObservationRecorder.add(this,"can.keys");var n={};return canReflect_1_18_0_canReflect.eachKey(this._data,function(e,t){canObservationRecorder_1_3_1_canObservationRecorder.add(this,t),n[t]=e},this),n}if(1<arguments.length){var r=this._data.hasOwnProperty(e),s=this._data[e];if(this._data[e]=t,s!==t){var o={keyChanged:r?void 0:e,type:e};this.dispatch(o,[t,s])}}else if("object"==typeof e)canQueues_1_3_1_canQueues.batch.start(),canReflect_1_18_0_canReflect.eachKey(e,function(e,t){a.attr(t,e)}),canQueues_1_3_1_canQueues.batch.stop();else return"constructor"===e?this.constructor:(canObservationRecorder_1_3_1_canObservationRecorder.add(this,e),this._data[e])},serialize:function(){return canReflect_1_18_0_canReflect.serialize(this,Map)},get:function(){return this.attr.apply(this,arguments)},set:function(){return this.attr.apply(this,arguments)},log:function(){}});map$1(SimpleMap.prototype);var simpleMapProto={"can.isMapLike":!0,"can.isListLike":!1,"can.isValueLike":!1,"can.getKeyValue":SimpleMap.prototype.get,"can.setKeyValue":SimpleMap.prototype.set,"can.deleteKeyValue":function(e){var t;if(this._data.hasOwnProperty(e)){var a=this._data[e];delete this._data[e],t={keyChanged:e,type:e},this.dispatch(t,[void 0,a])}},"can.getOwnEnumerableKeys":function(){return canObservationRecorder_1_3_1_canObservationRecorder.add(this,"can.keys"),Object.keys(this._data)},"can.assignDeep":function(e){canQueues_1_3_1_canQueues.batch.start(),canReflect_1_18_0_canReflect.assignMap(this,e),canQueues_1_3_1_canQueues.batch.stop()},"can.updateDeep":function(e){canQueues_1_3_1_canQueues.batch.start(),canReflect_1_18_0_canReflect.updateMap(this,e),canQueues_1_3_1_canQueues.batch.stop()},"can.keyHasDependencies":function(){return!1},"can.getKeyDependencies":function(){},"can.hasOwnKey":function(e){return this._data.hasOwnProperty(e)}};canReflect_1_18_0_canReflect.assignSymbols(SimpleMap.prototype,simpleMapProto);var canSimpleMap_4_3_2_canSimpleMap=SimpleMap,getChangesSymbol$2=canSymbol_1_6_5_canSymbol.for("can.getChangesDependencyRecord"),getValueSymbol$1=canSymbol_1_6_5_canSymbol.for("can.getValue"),onValueSymbol$2=canSymbol_1_6_5_canSymbol.for("can.onValue"),onEmitSymbol=canSymbol_1_6_5_canSymbol.for("can.onEmit"),offEmitSymbol=canSymbol_1_6_5_canSymbol.for("can.offEmit"),setValueSymbol$2=canSymbol_1_6_5_canSymbol.for("can.setValue"),canElementSymbol$1=canSymbol_1_6_5_canSymbol.for("can.element");function defaultSetValue(e,t){canReflect_1_18_0_canReflect.setValue(t,e)}function onEmit(e,t,a){return e[onEmitSymbol](t,a)}function offEmit(e,t,a){return e[offEmitSymbol](t,a)}function turnOffListeningAndUpdate(e,t,a,n){var r;e[onValueSymbol$2]?r=canReflect_1_18_0_canReflect.offValue:e[onEmitSymbol]&&(r=offEmit),r&&r(e,a,n)}function turnOnListeningAndUpdate(e,t,a,n){var r;e[onValueSymbol$2]?r=canReflect_1_18_0_canReflect.onValue:e[onEmitSymbol]&&(r=onEmit),r&&r(e,a,n)}function Semaphore(e,t){this.value=0,this._binding=e,this._type=t}canAssign_1_3_3_canAssign(Semaphore.prototype,{decrement:function(){this.value-=1},increment:function(){this._incremented=!0,this.value+=1}});function Bind(e){this._options=e,void 0===e.queue&&(e.element?e.queue="dom":e.queue="domUI"),!1==0<e.cycles&&(e.cycles=0),e.onInitDoNotUpdateChild="boolean"==typeof e.onInitDoNotUpdateChild&&e.onInitDoNotUpdateChild,e.onInitDoNotUpdateParent="boolean"==typeof e.onInitDoNotUpdateParent&&e.onInitDoNotUpdateParent,e.onInitSetUndefinedParentIfChildIsDefined="boolean"!=typeof e.onInitSetUndefinedParentIfChildIsDefined||e.onInitSetUndefinedParentIfChildIsDefined;var t=new Semaphore(this,"child"),a=new Semaphore(this,"parent"),n=!0;"boolean"==typeof e.childToParent?n=e.childToParent:null==e.child[getValueSymbol$1]?n=!1:void 0===e.setParent&&null==e.parent[setValueSymbol$2]&&(n=!1);var r=!0;if("boolean"==typeof e.parentToChild?r=e.parentToChild:null==e.parent[getValueSymbol$1]?r=!1:void 0===e.setChild&&null==e.child[setValueSymbol$2]&&(r=!1),!1===n&&!1===r)throw new Error("Neither the child nor parent will be updated; this is a no-way binding");this._childToParent=n,this._parentToChild=r,void 0===e.setChild&&(e.setChild=defaultSetValue),void 0===e.setParent&&(e.setParent=defaultSetValue),void 0!==e.priority&&(canReflect_1_18_0_canReflect.setPriority(e.child,e.priority),canReflect_1_18_0_canReflect.setPriority(e.parent,e.priority));var s=2*e.cycles,o=s+("childSticksToParent"===e.sticky?1:0),i=s+("parentSticksToChild"===e.sticky?1:0);this._bindingState={child:!1,parent:!1},this._updateChild=function(n){updateValue.call(this,{bindingState:this._bindingState,newValue:n,debugObservableName:"child",debugPartnerName:"parent",observable:e.child,setValue:e.setChild,semaphore:t,allowedUpdates:o,sticky:"parentSticksToChild"===e.sticky,partner:e.parent,setPartner:e.setParent,partnerSemaphore:a})}.bind(this),this._updateParent=function(n){updateValue.call(this,{bindingState:this._bindingState,newValue:n,debugObservableName:"parent",debugPartnerName:"child",observable:e.parent,setValue:e.setParent,semaphore:a,allowedUpdates:i,sticky:"childSticksToParent"===e.sticky,partner:e.child,setPartner:e.setChild,partnerSemaphore:t})}.bind(this),e.element&&(this._updateChild[canElementSymbol$1]=this._updateParent[canElementSymbol$1]=e.element)}Object.defineProperty(Bind.prototype,"parentValue",{get:function(){return canReflect_1_18_0_canReflect.getValue(this._options.parent)}}),canAssign_1_3_3_canAssign(Bind.prototype,{start:function(){var e=this._options,t,a;this.startParent(),this.startChild(),!0===this._childToParent&&!0===this._parentToChild?(a=canReflect_1_18_0_canReflect.getValue(e.parent),a===void 0?(t=canReflect_1_18_0_canReflect.getValue(e.child),t===void 0?!1===e.onInitDoNotUpdateChild&&this._updateChild(a):!1===e.onInitDoNotUpdateParent&&!0===e.onInitSetUndefinedParentIfChildIsDefined&&this._updateParent(t)):!1===e.onInitDoNotUpdateChild&&this._updateChild(a)):!0===this._childToParent?!1===e.onInitDoNotUpdateParent&&(t=canReflect_1_18_0_canReflect.getValue(e.child),this._updateParent(t)):!0===this._parentToChild&&!1===e.onInitDoNotUpdateChild&&(a=canReflect_1_18_0_canReflect.getValue(e.parent),this._updateChild(a))},startChild:function(){if(!1===this._bindingState.child&&!0===this._childToParent){var e=this._options;this._bindingState.child=!0,turnOnListeningAndUpdate(e.child,e.parent,this._updateParent,e.queue)}},startParent:function(){if(!1===this._bindingState.parent&&!0===this._parentToChild){var e=this._options;this._bindingState.parent=!0,turnOnListeningAndUpdate(e.parent,e.child,this._updateChild,e.queue)}},stop:function(){var e=this._bindingState,t=this._options;!0===e.parent&&!0===this._parentToChild&&(e.parent=!1,turnOffListeningAndUpdate(t.parent,t.child,this._updateChild,t.queue)),!0===e.child&&!0===this._childToParent&&(e.child=!1,turnOffListeningAndUpdate(t.child,t.parent,this._updateParent,t.queue))}}),["parent","child"].forEach(function(e){Object.defineProperty(Bind.prototype,e,{get:function(){return this._options[e]}})});function updateValue(e){var t=e.bindingState;if(!1!==t.child||!1!==t.parent){var a=e.semaphore;if(!(a.value+e.partnerSemaphore.value<=e.allowedUpdates));else if(canQueues_1_3_1_canQueues.batch.start(),a.increment(e),e.setValue(e.newValue,e.observable),canQueues_1_3_1_canQueues.mutateQueue.enqueue(a.decrement,a,[]),canQueues_1_3_1_canQueues.batch.stop(),e.sticky){var n=canReflect_1_18_0_canReflect.getValue(e.observable);n!==canReflect_1_18_0_canReflect.getValue(e.partner)&&e.setPartner(n,e.partner)}}}var canBind_1_5_1_canBind=canNamespace_1_0_0_canNamespace.Bind=Bind,canAttributeEncoder_1_1_4_canAttributeEncoder=createCommonjsModule(function(e){function t(e,t){for(var a=0;a<e.length;a++)t(e[a],a)}function a(e,t,a){return t+"-"+a.toLowerCase()}function n(e,t){return 0===e.indexOf(t)}function r(e,t){return e.length-e.lastIndexOf(t)===t.length}var s=function(e){var a={},n=e.split(",");return t(n,function(e){a[e]=!0}),a}("allowReorder,attributeName,attributeType,autoReverse,baseFrequency,baseProfile,calcMode,clipPathUnits,contentScriptType,contentStyleType,diffuseConstant,edgeMode,externalResourcesRequired,filterRes,filterUnits,glyphRef,gradientTransform,gradientUnits,kernelMatrix,kernelUnitLength,keyPoints,keySplines,keyTimes,lengthAdjust,limitingConeAngle,markerHeight,markerUnits,markerWidth,maskContentUnits,maskUnits,patternContentUnits,patternTransform,patternUnits,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,repeatCount,repeatDur,requiredExtensions,requiredFeatures,specularConstant,specularExponent,spreadMethod,startOffset,stdDeviation,stitchTiles,surfaceScale,systemLanguage,tableValues,textLength,viewBox,viewTarget,xChannelSelector,yChannelSelector,controlsList"),o={leftParens:/\(/g,rightParens:/\)/g,leftBrace:/\{/g,rightBrace:/\}/g,camelCase:/([a-z]|[0-9]|^)([A-Z])/g,forwardSlash:/\//g,space:/\s/g,uppercase:/[A-Z]/g,uppercaseDelimiterThenChar:/:u:([a-z])/g,caret:/\^/g,dollar:/\$/g,at:/@/g},i={prependUppercase:":u:",replaceSpace:":s:",replaceForwardSlash:":f:",replaceLeftParens:":lp:",replaceRightParens:":rp:",replaceLeftBrace:":lb:",replaceRightBrace:":rb:",replaceCaret:":c:",replaceDollar:":d:",replaceAt:":at:"},l={};if(l.encode=function(e){var t=e;return!s[t]&&t.match(o.camelCase)&&(n(t,"on:")||r(t,":to")||r(t,":from")||r(t,":bind")||r(t,":raw")?t=t.replace(o.uppercase,function(e){return i.prependUppercase+e.toLowerCase()}):(n(t,"(")||n(t,"{"))&&(t=t.replace(o.camelCase,a))),t=t.replace(o.space,i.replaceSpace).replace(o.forwardSlash,i.replaceForwardSlash).replace(o.leftParens,i.replaceLeftParens).replace(o.rightParens,i.replaceRightParens).replace(o.leftBrace,i.replaceLeftBrace).replace(o.rightBrace,i.replaceRightBrace).replace(o.caret,i.replaceCaret).replace(o.dollar,i.replaceDollar).replace(o.at,i.replaceAt),t},l.decode=function(e){var t=e;return!s[t]&&o.uppercaseDelimiterThenChar.test(t)&&(n(t,"on:")||r(t,":to")||r(t,":from")||r(t,":bind")||r(t,":raw"))&&(t=t.replace(o.uppercaseDelimiterThenChar,function(e,t){return t.toUpperCase()})),t=t.replace(i.replaceLeftParens,"(").replace(i.replaceRightParens,")").replace(i.replaceLeftBrace,"{").replace(i.replaceRightBrace,"}").replace(i.replaceForwardSlash,"/").replace(i.replaceSpace," ").replace(i.replaceCaret,"^").replace(i.replaceDollar,"$").replace(i.replaceAt,"@"),t},canNamespace_1_0_0_canNamespace.encoder)throw new Error("You can't have two versions of can-attribute-encoder, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.encoder=l});function each(e,t){for(var a=0;a<e.length;a++)t(e[a],a)}function makeMap$1(e){var t={},a=e.split(",");return each(a,function(e){t[e]=!0}),t}function handleIntermediate(e,t){for(var a=0,n=e.length,r;a<n;a++)r=e[a],t[r.tokenType].apply(t,r.args);return e}var alphaNumeric="A-Za-z0-9",alphaNumericHU="-:_A-Za-z0-9",magicStart="{{",endTag=/^<\/([-:_A-Za-z0-9]+)[^>]*>/,magicMatch=/\{\{(![\s\S]*?!|[\s\S]*?)\}\}\}?/g,space=/\s/,alphaRegex=/[A-Za-z0-9]/,attributeRegexp=/[-:_A-Za-z0-9]+s*=s*("[^"]*"|'[^']*')/,empty=makeMap$1("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),caseMattersElements=makeMap$1("altGlyph,altGlyphDef,altGlyphItem,animateColor,animateMotion,animateTransform,clipPath,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,foreignObject,glyphRef,linearGradient,radialGradient,textPath"),closeSelf=makeMap$1("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),special=makeMap$1("script"),tokenTypes=["start","end","close","attrStart","attrEnd","attrValue","chars","comment","special","done"],startOppositesMap={"{":"}","(":")"},fn=function(){},HTMLParser=function(e,t,a){function n(e,a,n,s){a=caseMattersElements[a]?a:a.toLowerCase(),closeSelf[a]&&l.last()===a&&r("",a),s=empty[a]||!!s,t.start(a,s,g),s||l.push(a),HTMLParser.parseAttrs(n,t,g),t.end(a,s,g),"html"===a&&(y=!0)}function r(e,a){var n;if(!a)n=0;else for(a=caseMattersElements[a]?a:a.toLowerCase(),n=l.length-1;0<=n&&l[n]!==a;n--);if(0<=n){for(var r=l.length-1;r>=n;r--)t.close&&t.close(l[r],g);l.length=n,"body"===a&&(y=!0)}}function s(e,a){t.special&&t.special(a,g)}if("object"==typeof e)return handleIntermediate(e,t);var o=[];t=t||{},a&&each(tokenTypes,function(e){var a=t[e]||fn;t[e]=function(){if(!1!==a.apply(this,arguments)){var t=arguments.length;void 0===arguments[t-1]&&(t=arguments.length-1),o.push({tokenType:e,args:[].slice.call(arguments,0,t)})}}});var i=function(){p&&!y&&t.chars&&t.chars(p,g),y=!1,p=""},l=[],d=e,p="",c,u,y,h,g;for(l.last=function(){return this[this.length-1]};e;){if(u=!0,!l.last()||!special[l.last()]){if(0===e.indexOf("<!--"))c=e.indexOf("-->"),0<=c&&(i(),t.comment&&t.comment(e.substring(4,c),g),e=e.substring(c+3),u=!1);else if(0===e.indexOf("</"))h=e.match(endTag),h&&(i(),h[0].replace(endTag,r),e=e.substring(h[0].length),u=!1);else if(0===e.indexOf("<")){var m=HTMLParser.searchStartTag(e);m&&(i(),n.apply(null,m.match),e=m.html,u=!1)}else 0===e.indexOf(magicStart)&&(h=e.match(magicMatch),h&&(i(),h[0].replace(magicMatch,s),e=e.substring(h[0].length)));if(u){c=findBreak(e,magicStart),0===c&&e===d&&(p+=e.charAt(0),e=e.substr(1),c=findBreak(e,magicStart));var f=0>c?e:e.substring(0,c);e=0>c?"":e.substring(c),f&&(p+=f)}}else e=e.replace(new RegExp("([\\s\\S]*?)</"+l.last()+"[^>]*>"),function(e,a){return a=a.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),t.chars&&t.chars(a,g),""}),r("",l.last());if(e===d)throw new Error("Parse Error: "+e);d=e}return i(),r(),t.done(g),o},callAttrStart=function(e,t,a,n,r){var s=n.substring("number"==typeof e.nameStart?e.nameStart:t,t),o=canAttributeEncoder_1_1_4_canAttributeEncoder.encode(s);e.attrStart=o,a.attrStart(e.attrStart,r),e.inName=!1},callAttrEnd=function(e,t,a,n,r){if(e.valueStart!==void 0&&e.valueStart<t){var s=n.substring(e.valueStart,t);a.attrValue(s,r)}a.attrEnd(e.attrStart,r),e.attrStart=void 0,e.valueStart=void 0,e.inValue=!1,e.inName=!1,e.lookingForEq=!1,e.inQuote=!1,e.lookingForName=!0},findBreak=function(e,t){for(var a=t.length,n=0,r=e.length;n<r;n++)if("<"===e[n]||e.substr(n,a)===t)return n;return-1};HTMLParser.parseAttrs=function(e,t,a){if(e){for(var n=0,r={inName:!1,nameStart:void 0,inValue:!1,valueStart:void 0,inQuote:!1,attrStart:void 0,lookingForName:!0,lookingForValue:!1,lookingForEq:!1},s;n<e.length;){s=n;var o=e.charAt(n);if(n++,magicStart===e.substr(s,magicStart.length)){r.inValue&&s>r.valueStart?t.attrValue(e.substring(r.valueStart,s),a):r.inName&&r.nameStart<s?(callAttrStart(r,s,t,e,a),callAttrEnd(r,s,t,e,a)):r.lookingForValue?r.inValue=!0:r.lookingForEq&&r.attrStart&&callAttrEnd(r,s,t,e,a),magicMatch.lastIndex=s;var l=magicMatch.exec(e);l&&(t.special(l[1],a),n=s+l[0].length,r.inValue&&(r.valueStart=s+l[0].length))}else if(r.inValue)r.inQuote?o===r.inQuote&&callAttrEnd(r,s,t,e,a):space.test(o)&&callAttrEnd(r,s,t,e,a);else if("="===o&&(r.lookingForEq||r.lookingForName||r.inName))r.attrStart||callAttrStart(r,s,t,e,a),r.lookingForValue=!0,r.lookingForEq=!1,r.lookingForName=!1;else if(r.inName){var d=e[r.nameStart],p,c;startOppositesMap[d]===o?(p="{"===d?"(":"{",c=startOppositesMap[p],e[s+1]===c?(callAttrStart(r,s+2,t,e,a),n++):callAttrStart(r,s+1,t,e,a),r.lookingForEq=!0):space.test(o)&&"{"!==d&&"("!==d&&(callAttrStart(r,s,t,e,a),r.lookingForEq=!0)}else r.lookingForName?space.test(o)||(r.attrStart&&callAttrEnd(r,s,t,e,a),r.nameStart=s,r.inName=!0):r.lookingForValue&&(space.test(o)?n===e.length&&callAttrEnd(r,s,t,e,a):(r.lookingForValue=!1,r.inValue=!0,"'"===o||"\""===o?(r.inQuote=o,r.valueStart=s+1):r.valueStart=s))}r.inName?(callAttrStart(r,s+1,t,e,a),callAttrEnd(r,s+1,t,e,a)):(r.lookingForEq||r.lookingForValue||r.inValue)&&callAttrEnd(r,s+1,t,e,a),magicMatch.lastIndex=0}},HTMLParser.searchStartTag=function(e){for(var t=e.indexOf(">"),a=attributeRegexp.exec(e.substring(1)),n=1;a&&t>=n+a.index;){for(n+=a.index+a[0].length;t<n;)t+=e.substring(t+1).indexOf(">")+1;a=attributeRegexp.exec(e.substring(n))}if(-1===t||!alphaRegex.test(e[1]))return null;var r="",s="",o=e.substring(0,t+1),i="/"===o[o.length-2],l=o.search(space),d,p,c;return i?(s="/",p=o.substring(1,o.length-2).trim()):p=o.substring(1,o.length-1).trim(),-1===l?d=p:(l--,d=p.substring(0,l),r=p.substring(l)),c=[o,d,r,s],{match:c,html:e.substring(o.length)}};var canViewParser_4_1_3_canViewParser=canNamespace_1_0_0_canNamespace.HTMLParser=HTMLParser;canGlobals_1_2_2_canGlobalsInstance.define("location",function(){return canGlobals_1_2_2_canGlobalsInstance.getKeyValue("global").location});var location_1=canGlobals_1_2_2_canGlobalsInstance.makeExport("location");canGlobals_1_2_2_canGlobalsInstance.define("MutationObserver",function(){var e=canGlobals_1_2_2_canGlobalsInstance.getKeyValue("global");return e.MutationObserver||e.WebKitMutationObserver||e.MozMutationObserver});var mutationObserver=canGlobals_1_2_2_canGlobalsInstance.makeExport("MutationObserver");canGlobals_1_2_2_canGlobalsInstance.define("customElements",function(){var e=canGlobals_1_2_2_canGlobalsInstance.getKeyValue("global");return e.customElements});var customElements=canGlobals_1_2_2_canGlobalsInstance.makeExport("customElements"),canGlobals_1_2_2_canGlobals=canGlobals_1_2_2_canGlobalsInstance;function eliminate(e,t){var a=e.indexOf(t);0<=a&&e.splice(a,1)}function addToSet(e,t){for(var a=0,n=e.length;a<n;a++)t.add(e[a])}function contains(e,t){return e.contains?e.contains(t):e.nodeType===Node.DOCUMENT_NODE&&e.documentElement?contains(e.documentElement,t):(t=t.parentNode,t===e)}function isInDocument(e){var t=document$1();return!(t!==e)||contains(t,e)}function isDocumentElement(e){return document$1().documentElement===e}function isFragment(e){return!!(e&&11===e.nodeType)}function isElementNode(e){return!!(e&&1===e.nodeType)}function getChildren(e){for(var t=[],a=e.firstChild;a;)t.push(a),a=a.nextSibling;return t}function getParents(e){var t;return t=isFragment(e)?getChildren(e):[e],t}function getNodesLegacyB(e){var t=0,a=isFragment(e)?[]:[e],n,r;if(null==e.firstChild)return a;do!n&&(r=e.firstChild)?(t++,a.push(r)):(r=e.nextSibling)?(n=!1,a.push(r)):(r=e.parentNode,t--,n=!0),e=r;while(0<t);return a}function treeWalkerFilterFunction(){return NodeFilter.FILTER_ACCEPT}var treeWalkerFilter=treeWalkerFilterFunction;treeWalkerFilter.acceptNode=treeWalkerFilterFunction;function getNodesWithTreeWalker(e){for(var t=isFragment(e)?[]:[e],a=isElementNode(e)&&document$1().createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,treeWalkerFilter,!1),n;n=a&&a.nextNode();)t.push(n);return t}function getAllNodes(e){return void 0===document$1().createTreeWalker?getNodesLegacyB(e):getNodesWithTreeWalker(e)}function subscription(e){return function(){var t=e.apply(this,arguments),a=!1;return function(){if(a){var n=e.name||e.displayName||"an anonymous function";throw new Error("Disposal function returned by "+n+" called more than once.")}t.apply(this,arguments),a=!0}}}var canDomMutate_1_3_11_Util={eliminate:eliminate,isInDocument:isInDocument,getDocument:document$1,isDocumentElement:isDocumentElement,isFragment:isFragment,getParents:getParents,getAllNodes:getAllNodes,getChildren:getChildren,subscription:subscription,addToSet:addToSet},eliminate$1=canDomMutate_1_3_11_Util.eliminate,subscription$1=canDomMutate_1_3_11_Util.subscription,isDocumentElement$1=canDomMutate_1_3_11_Util.isDocumentElement,getAllNodes$1=canDomMutate_1_3_11_Util.getAllNodes,slice$2=Array.prototype.slice,dataStore=new WeakMap,domMutate,dispatchInsertion,dispatchRemoval;function getRelatedData(e,t){var a=dataStore.get(e);if(a)return a[t]}function setRelatedData(e,t,a){var n=dataStore.get(e);n||(n={},dataStore.set(e,n)),n[t]=a}function deleteRelatedData(e,t){var a=dataStore.get(e);return delete a[t]}function toMutationEvents(e){for(var t=[],a=0;a<e.length;a++)t.push({target:e[a]});return t}function batch(e){return function(t,a){e(t),a&&a()}}function getDocumentListeners(e,t){var a=document$1(),n=getRelatedData(a,t);if(n)return n.listeners}function getTargetListeners(e,t){var a=document$1(),n=getRelatedData(a,t);return n?n.get(e):void 0}function addTargetListener(e,t,a){var n=document$1(),r=getRelatedData(n,t);r||(r=new WeakMap,setRelatedData(n,t,r));var s=r.get(e);s||(s=[],r.set(e,s)),s.push(a)}function removeTargetListener(e,t,a){var n=document$1(),r=getRelatedData(n,t);if(r){var s=r.get(e);s&&(eliminate$1(s,a),0===s.length&&(r["delete"](e),0===r.size&&deleteRelatedData(n,t)))}}function fire(e,t){for(var a=slice$2.call(e,0),n=a.length,r=0;r<n;r++)a[r](t)}function dispatch$1(t,a){return function(n){for(var r=0;r<n.length;r++){var s=n[r],o=s.target,i=getTargetListeners(o,t);if(i&&fire(i,s),!!a){var l=getDocumentListeners(o,a);l&&fire(l,s)}}}}var count=0;function observeMutations(e,t,a,n){var r=getRelatedData(e,t);r||(r={observingCount:0},setRelatedData(e,t,r));var s=function(){r.observer&&(r.observer.disconnect(),r.observer=null);var t=mutationObserver();if(t){var s=global_1().Node;if(!!(s&&e instanceof s)){var o=new t(n);o.id=count++,o.observe(e,a),r.observer=o}}};return 0===r.observingCount&&(canGlobals_1_2_2_canGlobals.onKeyValue("MutationObserver",s),s()),r.observingCount++,function(){var a=getRelatedData(e,t);a&&(a.observingCount--,0>=a.observingCount&&(a.observer&&a.observer.disconnect(),deleteRelatedData(e,t),canGlobals_1_2_2_canGlobals.offKeyValue("MutationObserver",s)))}}function handleTreeMutations(e){if("undefined"!=typeof Set){for(var t=e.length,n=new Set,s=new Set,o=0;o<t;o++){for(var i=e[o],l=i.addedNodes.length,d=0;d<l;d++)canDomMutate_1_3_11_Util.addToSet(getAllNodes$1(i.addedNodes[d]),n);for(var p=i.removedNodes.length,c=0;c<p;c++)canDomMutate_1_3_11_Util.addToSet(getAllNodes$1(i.removedNodes[c]),s)}dispatchRemoval(toMutationEvents(canReflect_1_18_0_canReflect.toArray(s))),dispatchInsertion(toMutationEvents(canReflect_1_18_0_canReflect.toArray(n)))}}function handleAttributeMutations(e){for(var t=e.length,a=0,n;a<t;a++)if(n=e[a],"attributes"===n.type){var r=n.target,s=n.attributeName,o=n.oldValue;domMutate.dispatchNodeAttributeChange(r,s,o)}}var treeMutationConfig={subtree:!0,childList:!0},attributeMutationConfig={attributes:!0,attributeOldValue:!0};function addNodeListener(e,t,a){return subscription$1(function(n,r){if(11===n.nodeType)return Function.prototype;var s;return s=a?observeMutations(n,t,attributeMutationConfig,handleAttributeMutations):observeMutations(document$1(),t,treeMutationConfig,handleTreeMutations),addTargetListener(n,e,r),function(){s(),removeTargetListener(n,e,r)}})}function addGlobalListener(e,t){return subscription$1(function(a,n){if(!isDocumentElement$1(a))throw new Error("Global mutation listeners must pass a documentElement");var r=document$1(),s=getRelatedData(r,e);s||(s={listeners:[]},setRelatedData(r,e,s));var o=s.listeners;return 0===o.length&&(s.removeListener=t(r,function(){})),o.push(n),function(){var t=getRelatedData(r,e);if(t){var a=t.listeners;eliminate$1(a,n),0===a.length&&(t.removeListener(),deleteRelatedData(r,e))}}})}var domMutationPrefix="domMutation",insertionDataKey="domMutationInsertionData",removalDataKey="domMutationRemovalData",attributeChangeDataKey="domMutationAttributeChangeData",documentInsertionDataKey="domMutationDocumentInsertionData",documentRemovalDataKey="domMutationDocumentRemovalData",documentAttributeChangeDataKey="domMutationDocumentAttributeChangeData",treeDataKey="domMutationTreeData",attributeDataKey="domMutationAttributeData";dispatchInsertion=batch(dispatch$1(insertionDataKey,documentInsertionDataKey)),dispatchRemoval=batch(dispatch$1(removalDataKey,documentRemovalDataKey));var dispatchAttributeChange=batch(dispatch$1(attributeChangeDataKey,documentAttributeChangeDataKey)),addNodeInsertionListener=addNodeListener(insertionDataKey,treeDataKey),addNodeRemovalListener=addNodeListener(removalDataKey,treeDataKey),addNodeAttributeChangeListener=addNodeListener(attributeChangeDataKey,attributeDataKey,!0),addInsertionListener=addGlobalListener(documentInsertionDataKey,addNodeInsertionListener),addRemovalListener=addGlobalListener(documentRemovalDataKey,addNodeRemovalListener),addAttributeChangeListener=addGlobalListener(documentAttributeChangeDataKey,addNodeAttributeChangeListener);domMutate={dispatchNodeInsertion:function(e,t){var a=new Set;canDomMutate_1_3_11_Util.addToSet(getAllNodes$1(e),a);var n=toMutationEvents(canReflect_1_18_0_canReflect.toArray(a));dispatchInsertion(n,t)},dispatchNodeRemoval:function(e,t){var a=new Set;canDomMutate_1_3_11_Util.addToSet(getAllNodes$1(e),a);var n=toMutationEvents(canReflect_1_18_0_canReflect.toArray(a));dispatchRemoval(n,t)},dispatchNodeAttributeChange:function(e,t,a,n){dispatchAttributeChange([{target:e,attributeName:t,oldValue:a}],n)},onNodeInsertion:addNodeInsertionListener,onNodeRemoval:addNodeRemovalListener,onNodeAttributeChange:addNodeAttributeChangeListener,onRemoval:addRemovalListener,onInsertion:addInsertionListener,onAttributeChange:addAttributeChangeListener};var canDomMutate_1_3_11_canDomMutate=canNamespace_1_0_0_canNamespace.domMutate=domMutate,isInDocument$1=canDomMutate_1_3_11_Util.isInDocument,getParents$1=canDomMutate_1_3_11_Util.getParents,synthetic={dispatchNodeInsertion:function(e,t){isInDocument$1(t)&&canDomMutate_1_3_11_canDomMutate.dispatchNodeInsertion(t)},dispatchNodeRemoval:function(e,t){isInDocument$1(e)&&!isInDocument$1(t)&&canDomMutate_1_3_11_canDomMutate.dispatchNodeRemoval(t)}},compat={replaceChild:function(e,t){var a=getParents$1(e),n=this.replaceChild(e,t);synthetic.dispatchNodeRemoval(this,t);for(var r=0;r<a.length;r++)synthetic.dispatchNodeInsertion(this,a[r]);return n},setAttribute:function(e,t){var a=this.getAttribute(e),n=this.setAttribute(e,t),r=this.getAttribute(e);return a!==r&&canDomMutate_1_3_11_canDomMutate.dispatchNodeAttributeChange(this,e,a),n},setAttributeNS:function(e,t,a){var n=this.getAttribute(t),r=this.setAttributeNS(e,t,a),s=this.getAttribute(t);return n!==s&&canDomMutate_1_3_11_canDomMutate.dispatchNodeAttributeChange(this,t,n),r},removeAttribute:function(e){var t=this.getAttribute(e),a=this.removeAttribute(e);return t&&canDomMutate_1_3_11_canDomMutate.dispatchNodeAttributeChange(this,e,t),a}},compatData=[["appendChild","Insertion"],["insertBefore","Insertion"],["removeChild","Removal"]];compatData.forEach(function(e){var t=e[0],a="dispatchNode"+e[1];compat[t]=function(e){for(var n=getParents$1(e),r=this[t].apply(this,arguments),s=0;s<n.length;s++)synthetic[a](this,n[s]);return r}});var normal={},nodeMethods=["appendChild","insertBefore","removeChild","replaceChild","setAttribute","setAttributeNS","removeAttribute"];nodeMethods.forEach(function(e){normal[e]=function(){return this[e].apply(this,arguments)}});var mutate={};function setMutateStrategy(e){var t=e?normal:compat;for(var a in t)mutate[a]=t[a]}var mutationObserverKey="MutationObserver";setMutateStrategy(canGlobals_1_2_2_canGlobals.getKeyValue("MutationObserver")),canGlobals_1_2_2_canGlobals.onKeyValue("MutationObserver",setMutateStrategy);var node=canNamespace_1_0_0_canNamespace.domMutateNode=canDomMutate_1_3_11_canDomMutate.node=mutate,canDomMutate_1_3_11_node=canNamespace_1_0_0_canNamespace.node=node,nodeMap=new Map,splice$1=[].splice,push=[].push,itemsInChildListTree=function(e){for(var t=0,a=0,n=e.length,r;a<n;a++)r=e[a],r.nodeType?t++:t+=itemsInChildListTree(r);return t},replacementMap=function(e){for(var t=new Map,a=0,n=e.length,r;a<n;a++)r=nodeLists.first(e[a]),t.set(r,e[a]);return t},addUnfoundAsDeepChildren=function(e,t){t.forEach(function(t){e.newDeepChildren.push(t)})},nodeLists={update:function(e,t,a){a||(a=nodeLists.unregisterChildren(e));for(var n=[],r=0,s=n.length=t.length;r<s;r++)n[r]=t[r];t=n;var o=e.length;return splice$1.apply(e,[0,o].concat(t)),e.replacements?(nodeLists.nestReplacements(e),e.deepChildren=e.newDeepChildren,e.newDeepChildren=[]):nodeLists.nestList(e),a},nestReplacements:function(e){for(var t=0,a=replacementMap(e.replacements),n=e.replacements.length;t<e.length&&n;){var r=e[t],s=a.get(r);s&&(a["delete"](r),e.splice(t,itemsInChildListTree(s),s),n--),t++}n&&addUnfoundAsDeepChildren(e,a),e.replacements=[]},nestList:function(e){for(var t=0;t<e.length;){var a=e[t],n=nodeMap.get(a);n?n!==e&&e.splice(t,itemsInChildListTree(n),n):nodeMap.set(a,e),t++}},last:function(e){var t=e[e.length-1];return t.nodeType?t:nodeLists.last(t)},first:function(e){var t=e[0];return t.nodeType?t:nodeLists.first(t)},flatten:function(e){for(var t=[],a=0,n;a<e.length;a++)n=e[a],n.nodeType?t.push(n):t.push.apply(t,nodeLists.flatten(n));return t},register:function(e,t,a,n){return e.unregistered=t,e.parentList=a,e.nesting=a&&"undefined"!=typeof a.nesting?a.nesting+1:0,a?(e.deepChildren=[],e.newDeepChildren=[],e.replacements=[],!0!==a&&(n?a.replacements.push(e):a.newDeepChildren.push(e))):nodeLists.nestList(e),e},unregisterChildren:function(e){for(var t=[],a=0,r;a<e.length;a++)r=e[a],r.nodeType?(!e.replacements&&nodeMap["delete"](r),t.push(r)):push.apply(t,nodeLists.unregister(r,!0));var s=e.deepChildren;if(s)for(var o=0;o<s.length;o++)nodeLists.unregister(s[o],!0);return t},unregister:function(e,t){var a=nodeLists.unregisterChildren(e,!0);if(e.isUnregistered=!0,e.unregistered){var n=e.unregistered;if(e.replacements=e.unregistered=null,!t){var r=e.parentList&&e.parentList.deepChildren;if(r){var s=r.indexOf(e);-1!==s&&r.splice(s,1)}}n()}return a},after:function(e,t){var a=e[e.length-1];a.nextSibling?canDomMutate_1_3_11_node.insertBefore.call(a.parentNode,t,a.nextSibling):canDomMutate_1_3_11_node.appendChild.call(a.parentNode,t)},replace:function(e,t){var a=e[0].parentNode,n;"SELECT"===a.nodeName.toUpperCase()&&0<=a.selectedIndex&&(n=a.value),1===e.length?canDomMutate_1_3_11_node.replaceChild.call(a,t,e[0]):(nodeLists.after(e,t),nodeLists.remove(e)),n!==void 0&&(a.value=n)},remove:function(e){for(var t=e[0]&&e[0].parentNode,a=0,n;a<e.length;a++)n=e[a],n.parentNode===t&&canDomMutate_1_3_11_node.removeChild.call(t,n)},nodeMap:nodeMap},canViewNodelist_4_3_4_canViewNodelist=canNamespace_1_0_0_canNamespace.nodeLists=nodeLists;function childNodes(e){var t=e.childNodes;if("length"in t)return t;for(var a=e.firstChild,n=[];a;)n.push(a),a=a.nextSibling;return n}var canChildNodes_1_2_1_canChildNodes=canNamespace_1_0_0_canNamespace.childNodes=childNodes,fragmentRE=/^\s*<(\w+)[^>]*>/,toString$1={}.toString,toDOMSymbol=canSymbol_1_6_5_canSymbol.for("can.toDOM");function makeFragment(e,t,a){void 0===t&&(t=fragmentRE.test(e)&&RegExp.$1),e&&"[object Function]"===toString$1.call(e.replace)&&(e=e.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,"<$1></$2>"));var n=a.createElement("div"),r=a.createElement("div");return"tbody"===t||"tfoot"===t||"thead"===t||"colgroup"===t?(r.innerHTML="<table>"+e+"</table>",n=3===r.firstChild.nodeType?r.lastChild:r.firstChild):"col"===t?(r.innerHTML="<table><colgroup>"+e+"</colgroup></table>",n=3===r.firstChild.nodeType?r.lastChild:r.firstChild.firstChild):"tr"===t?(r.innerHTML="<table><tbody>"+e+"</tbody></table>",n=3===r.firstChild.nodeType?r.lastChild:r.firstChild.firstChild):"td"===t||"th"===t?(r.innerHTML="<table><tbody><tr>"+e+"</tr></tbody></table>",n=3===r.firstChild.nodeType?r.lastChild:r.firstChild.firstChild.firstChild):"option"===t?(r.innerHTML="<select>"+e+"</select>",n=3===r.firstChild.nodeType?r.lastChild:r.firstChild):n.innerHTML=""+e,[].slice.call(canChildNodes_1_2_1_canChildNodes(n))}function fragment(e,t){if(e&&11===e.nodeType)return e;t?t.length&&(t=t[0]):t=document$1();for(var a=makeFragment(e,void 0,t),n=(t||document).createDocumentFragment(),r=0,s=a.length;r<s;r++)n.appendChild(a[r]);return n}var makeFrag=function(e,t){var a=t||document$1(),n;if(!e||"string"==typeof e)n=fragment(null==e?"":""+e,a);else{if("function"==typeof e[toDOMSymbol])return makeFrag(e[toDOMSymbol]());if(11===e.nodeType)return e;if("number"==typeof e.nodeType)return n=a.createDocumentFragment(),n.appendChild(e),n;canReflect_1_18_0_canReflect.isListLike(e)?(n=a.createDocumentFragment(),canReflect_1_18_0_canReflect.eachIndex(e,function(e){n.appendChild(makeFrag(e))})):n=fragment(""+e,a)}return canChildNodes_1_2_1_canChildNodes(n).length||n.appendChild(a.createTextNode("")),n},canFragment_1_3_1_canFragment=canNamespace_1_0_0_canNamespace.fragment=canNamespace_1_0_0_canNamespace.frag=makeFrag,canViewCallbacks_4_4_1_canViewCallbacks=createCommonjsModule(function(e){var t=canSymbol_1_6_5_canSymbol.for("can.callbackMap"),a=canSymbol_1_6_5_canSymbol.for("can.initialize"),n={},r=function(){var e=canGlobals_1_2_2_canGlobals.getKeyValue("document");return null!=e&&null!=e.documentElement&&"false"!==e.documentElement.getAttribute("data-can-automount")},s=new WeakMap,o=function(e){var t=e.tagName&&e.tagName.toLowerCase(),a=n[t];a&&f.tagHandler(e,t,{})},i=!1,l=function(){var e=document$1().documentElement;if(i){if(i===e)return;b()}var t=canDomMutate_1_3_11_canDomMutate.onInsertion(e,function(e){o(e.target)});i=!0,b=function(){t(),i=!1}},d=function(e){for(var t=document$1().getElementsByTagName(e),a=0,n;void 0!==(n=t[a]);a++)o(n)},p=function(e,t){if(t)"string"==typeof e?c[e]=t:u.push({match:e,handler:t});else{var a=c[e];if(!a)for(var n=0,r=u.length,s;n<r;n++)if(s=u[n],s.match.test(e))return s.handler;return a}},c={},u=[],y=new WeakMap,h=/[-\:]/,g=function(){},m=function(e,t){if(t){var a=h.test(e),s="undefined"!=typeof n[e.toLowerCase()],o;if(n[e.toLowerCase()]=t,r()){var p=canGlobals_1_2_2_canGlobals.getKeyValue("customElements");if(!p)l(),d(e);else if(o=p.get(e.toLowerCase()),a&&!o){var c=function(){return Reflect.construct(HTMLElement,[],c)};c.prototype=Object.create(HTMLElement.prototype),c.prototype.connectedCallback=function(){f.tagHandler(this,e.toLowerCase(),{})},p.define(e,c)}}else i&&b()}else{var u;return null===t?delete n[e.toLowerCase()]:u=n[e.toLowerCase()],!u&&h.test(e)&&(u=g),u}},f={_tags:n,_attributes:c,_regExpAttributes:u,defaultCallback:g,tag:m,attr:p,attrs:function(e){var a=canReflect_1_18_0_canReflect.getKeyValue(e,t)||e;y.has(a)||(y.set(a,!0),canReflect_1_18_0_canReflect.eachKey(a,function(e,t){p(t,e)}))},tagHandler:function(e,t,r){if(!s.has(e)){var o=r.scope,i=o&&o.templateContext.tags.get(t),l=i||n[t]||e[a],d;if(l?(d=canObservationRecorder_1_3_1_canObservationRecorder.ignore(l)(e,r),s.set(e,!0)):d=o,d&&r.subtemplate){o!==d&&(o=o.add(d));var p=canViewNodelist_4_3_4_canViewNodelist.register([],void 0,r.parentNodeList||!0,!1);p.expression="<"+e.tagName+">";var c=r.subtemplate(o,r.options,p),u="string"==typeof c?canFragment_1_3_1_canFragment(c):c;canDomMutate_1_3_11_node.appendChild.call(e,u)}}}},b;if(canNamespace_1_0_0_canNamespace.view=canNamespace_1_0_0_canNamespace.view||{},canNamespace_1_0_0_canNamespace.view.callbacks)throw new Error("You can't have two versions of can-view-callbacks, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.view.callbacks=f}),processNodes=function(e,t,a,n){for(var r=n.createDocumentFragment(),s=0,o=e.length,l;s<o;s++)l=e[s],r.appendChild(processNode(l,t,a.concat(s),n));return r},keepsTextNodes="undefined"!=typeof document&&function(){var e=document.createDocumentFragment(),t=document.createElement("div");t.appendChild(document.createTextNode("")),t.appendChild(document.createTextNode("")),e.appendChild(t);var a=e.cloneNode(!0);return 2===a.firstChild.childNodes.length}(),clonesWork="undefined"!=typeof document&&function(){var e=document.createElement("a");e.innerHTML="<xyz></xyz>";var t=e.cloneNode(!0),a="<xyz></xyz>"===t.innerHTML,n,r;return a?(e=document.createDocumentFragment(),e.appendChild(document.createTextNode("foo-bar")),n=mutationObserver(),n?(r=new n(function(){}),r.observe(document.documentElement,{childList:!0,subtree:!0}),t=e.cloneNode(!0),r.disconnect()):t=e.cloneNode(!0),1===t.childNodes.length):a}(),namespacesWork="undefined"!=typeof document&&!!document.createElementNS,cloneNode=clonesWork?function(e){return e.cloneNode(!0)}:function(e){var t=e.ownerDocument,a;if(1===e.nodeType?"http://www.w3.org/1999/xhtml"!==e.namespaceURI&&namespacesWork&&t.createElementNS?a=t.createElementNS(e.namespaceURI,e.nodeName):a=t.createElement(e.nodeName):3===e.nodeType?a=t.createTextNode(e.nodeValue):8===e.nodeType?a=t.createComment(e.nodeValue):11===e.nodeType&&(a=t.createDocumentFragment()),e.attributes)for(var n=e.attributes,r=0,s;r<n.length;r++)s=n[r],s&&s.specified&&(s.namespaceURI?a.setAttributeNS(s.namespaceURI,s.nodeName||s.name,s.nodeValue||s.value):a.setAttribute(s.nodeName||s.name,s.nodeValue||s.value));if(e&&e.firstChild)for(var o=e.firstChild;o;)a.appendChild(cloneNode(o)),o=o.nextSibling;return a};function processNode(e,t,a,n){var r=a,s=typeof e,o=function(){return l||(l={path:a,callbacks:[]},t.push(l),r=[]),l},l,d,c,u,y;if(!("object"==s))"string"===s?d=n.createTextNode(e):"function"===s&&(keepsTextNodes?(d=n.createTextNode(""),o().callbacks.push({callback:e})):(d=n.createComment("~"),o().callbacks.push({callback:function(){var t=n.createTextNode("");return canDomMutate_1_3_11_node.replaceChild.call(this.parentNode,t,this),e.apply(t,arguments)}})));else if(e.tag){if(d=namespacesWork&&e.namespace?n.createElementNS(e.namespace,e.tag):n.createElement(e.tag),e.attrs)for(var h in e.attrs){var g=e.attrs[h];"function"==typeof g?o().callbacks.push({callback:g}):null!==g&&"object"==typeof g&&g.namespaceURI?d.setAttributeNS(g.namespaceURI,h,g.value):canDomMutate_1_3_11_node.setAttribute.call(d,h,g)}if(e.attributes)for(u=0,y=e.attributes.length;u<y;u++)o().callbacks.push({callback:e.attributes[u]});e.children&&e.children.length&&(c=l?l.paths=[]:t,d.appendChild(processNodes(e.children,c,r,n)))}else if(e.comment&&(d=n.createComment(e.comment),e.callbacks))for(u=0,y=e.callbacks.length;u<y;u++)o().callbacks.push({callback:e.callbacks[u]});return d}function getCallbacks(e,t,a){for(var n=t.path,r=t.callbacks,s=t.paths,o=e,l=n?n.length:0,d=s?s.length:0,p=0;p<l;p++)o=o.childNodes.item(n[p]);for(p=0;p<d;p++)getCallbacks(o,s[p],a);a.push({element:o,callbacks:r})}function hydrateCallbacks(e,t){for(var a=e.length,n=0,r,s,o;n<a;n++){o=e[n],r=o.callbacks.length,s=o.element;for(var l=0;l<r;l++)o.callbacks[l].callback.apply(s,t)}}function makeTarget(e,t){var a=[],n=processNodes(e,a,[],t||document$1());return{paths:a,clone:n,hydrate:function(){for(var e=cloneNode(this.clone),t=[],n=0,r=t.length=arguments.length;n<r;n++)t[n]=arguments[n];for(var s=[],o=0;o<a.length;o++)getCallbacks(e,a[o],s);return hydrateCallbacks(s,t),e}}}makeTarget.keepsTextNodes=keepsTextNodes,makeTarget.cloneNode=cloneNode,canNamespace_1_0_0_canNamespace.view=canNamespace_1_0_0_canNamespace.view||{};var canViewTarget_4_1_6_canViewTarget=canNamespace_1_0_0_canNamespace.view.target=makeTarget,getKeyValueSymbol$2=canSymbol_1_6_5_canSymbol.for("can.getKeyValue"),observeDataSymbol=canSymbol_1_6_5_canSymbol.for("can.meta"),promiseDataPrototype={isPending:!0,state:"pending",isResolved:!1,isRejected:!1,value:void 0,reason:void 0};function setVirtualProp(e,t,a){var n=e[observeDataSymbol],r=n[t];n[t]=a,canQueues_1_3_1_canQueues.enqueueByQueue(n.handlers.getNode([t]),e,[a,r],function(){return{}},["Promise",e,"resolved with value",a,"and changed virtual property: "+t])}function initPromise(e){var t=e[observeDataSymbol];t||(Object.defineProperty(e,observeDataSymbol,{enumerable:!1,configurable:!1,writable:!1,value:Object.create(promiseDataPrototype)}),t=e[observeDataSymbol],t.handlers=new canKeyTree_1_2_2_canKeyTree([Object,Object,Array])),e.then(function(t){canQueues_1_3_1_canQueues.batch.start(),setVirtualProp(e,"isPending",!1),setVirtualProp(e,"isResolved",!0),setVirtualProp(e,"value",t),setVirtualProp(e,"state","resolved"),canQueues_1_3_1_canQueues.batch.stop()},function(t){canQueues_1_3_1_canQueues.batch.start(),setVirtualProp(e,"isPending",!1),setVirtualProp(e,"isRejected",!0),setVirtualProp(e,"reason",t),setVirtualProp(e,"state","rejected"),canQueues_1_3_1_canQueues.batch.stop()})}function setupPromise(e){var t="getPrototypeOf"in Object?Object.getPrototypeOf(e):e.__proto__,a;e[getKeyValueSymbol$2]&&e[observeDataSymbol]||((null===t||t===Object.prototype)&&(t=e,"function"==typeof t.promise&&(a=t.promise,t.promise=function(){var e=a.call(t);return setupPromise(e),e})),canReflect_1_18_0_canReflect.assignSymbols(t,{"can.getKeyValue":function(e){return this[observeDataSymbol]||initPromise(this),canObservationRecorder_1_3_1_canObservationRecorder.add(this,e),"state"===e||"isPending"===e||"isResolved"===e||"isRejected"===e||"value"===e||"reason"===e?this[observeDataSymbol][e]:this[e]},"can.getValue":function(){return this[getKeyValueSymbol$2]("value")},"can.isValueLike":!1,"can.onKeyValue":function(e,t,a){this[observeDataSymbol]||initPromise(this),this[observeDataSymbol].handlers.add([e,a||"mutate",t])},"can.offKeyValue":function(e,t,a){this[observeDataSymbol]||initPromise(this),this[observeDataSymbol].handlers.delete([e,a||"mutate",t])},"can.hasOwnKey":function(e){return this[observeDataSymbol]||initPromise(this),e in this[observeDataSymbol]}}))}var canReflectPromise_2_2_1_canReflectPromise=setupPromise,getValueSymbol$2=canSymbol_1_6_5_canSymbol.for("can.getValue"),setValueSymbol$3=canSymbol_1_6_5_canSymbol.for("can.setValue"),isValueLikeSymbol=canSymbol_1_6_5_canSymbol.for("can.isValueLike"),peek$3=canObservationRecorder_1_3_1_canObservationRecorder.ignore(canReflect_1_18_0_canReflect.getKeyValue.bind(canReflect_1_18_0_canReflect)),isPromiseLike=canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(e){return"object"==typeof e&&e&&"function"==typeof e.then}),bindName=Function.prototype.bind,isAt=function(e,t){var a=t[e-1];return a&&a.at},readValue=function(e,t,a,n,r,s){var o;do{o=!1;for(var l=0,d=observeReader.valueReaders.length;l<d;l++)observeReader.valueReaders[l].test(e,t,a,n)&&(e=observeReader.valueReaders[l].read(e,t,a,n,r,s))}while(o);return e},checkForObservableAndNotify=function(e,t,a,n,r){e.foundObservable&&!t.foundObservable&&canObservationRecorder_1_3_1_canObservationRecorder.trapsCount()&&(canObservationRecorder_1_3_1_canObservationRecorder.addMany(a()),e.foundObservable(n,r),t.foundObservable=!0)},objHasKeyAtIndex=function(e,t,a){return!!(t&&t.length&&canReflect_1_18_0_canReflect.hasKey(e,t[a].key))},observeReader;observeReader={read:function(e,t,a){a=a||{};var n={foundObservable:!1},s;a.foundObservable&&(s=canObservationRecorder_1_3_1_canObservationRecorder.trap());var o=readValue(e,0,t,a,n),l=t.length,d=0,p,c;for(checkForObservableAndNotify(a,n,s,e,0);d<l;){p=o;for(var u=0,y=observeReader.propertyReaders.length,h;u<y;u++)if(h=observeReader.propertyReaders[u],h.test(o)){o=h.read(o,t[d],d,a,n);break}if(checkForObservableAndNotify(a,n,s,p,d),++d,o=readValue(o,d,t,a,n,p),checkForObservableAndNotify(a,n,s,p,d-1),d<t.length&&(null===o||void 0===o))return c=objHasKeyAtIndex(p,t,d-1),a.earlyExit&&!c&&a.earlyExit(p,d-1,o),{value:void 0,parent:p,parentHasKey:c,foundLastParent:!1}}return c=objHasKeyAtIndex(p,t,t.length-1),void 0===o&&!c&&a.earlyExit&&a.earlyExit(p,d-1),{value:o,parent:p,parentHasKey:c,foundLastParent:!0}},get:function(e,t,a){return observeReader.read(e,observeReader.reads(t),a||{}).value},valueReadersMap:{},valueReaders:[{name:"function",test:function(e){return e&&canReflect_1_18_0_canReflect.isFunctionLike(e)&&!canReflect_1_18_0_canReflect.isConstructorLike(e)},read:function(e,t,a,n,r,s){return n.callMethodsOnObservables&&canReflect_1_18_0_canReflect.isObservableLike(s)&&canReflect_1_18_0_canReflect.isMapLike(s)?(dev.warn("can-stache-key: read() called with `callMethodsOnObservables: true`."),e.apply(s,n.args||[])):!1===n.proxyMethods?e:bindName.call(e,s)}},{name:"isValueLike",test:function(e,t,a,n){return e&&e[getValueSymbol$2]&&!1!==e[isValueLikeSymbol]&&(n.foundAt||!isAt(t,a))},read:function(e,t,a,n){return!1===n.readCompute&&t===a.length?e:canReflect_1_18_0_canReflect.getValue(e)},write:function(e,t){e[setValueSymbol$3]?e[setValueSymbol$3](t):e.set?e.set(t):e(t)}}],propertyReadersMap:{},propertyReaders:[{name:"map",test:function(e){return(canReflect_1_18_0_canReflect.isPromise(e)||isPromiseLike(e))&&canReflectPromise_2_2_1_canReflectPromise(e),canReflect_1_18_0_canReflect.isObservableLike(e)&&canReflect_1_18_0_canReflect.isMapLike(e)},read:function(e,t){var a=canReflect_1_18_0_canReflect.getKeyValue(e,t.key);return void 0===a?e[t.key]:a},write:canReflect_1_18_0_canReflect.setKeyValue},{name:"object",test:function(){return!0},read:function(e,t){if(null!=e)return"object"==typeof e?t.key in e?e[t.key]:void 0:e[t.key]},write:function(e,t,a){var n=e[t];null!=a&&"object"==typeof a&&canReflect_1_18_0_canReflect.isMapLike(n)?(dev.warn("can-stache-key: Merging data into \""+t+"\" because its parent is non-observable"),canReflect_1_18_0_canReflect.update(n,a)):null!=n&&n[setValueSymbol$3]!==void 0?canReflect_1_18_0_canReflect.setValue(n,a):e[t]=a}}],reads:function(e){var t=""+e,a=[],n=0,r=!1;"@"===t.charAt(0)&&(n=1,r=!0);for(var s="",o=n,l;o<t.length;o++)l=t.charAt(o),"."===l||"@"===l?"\\"===t.charAt(o-1)?s=s.substr(0,s.length-1)+".":(a.push({key:s,at:r}),r="@"===l,s=""):s+=l;return a.push({key:s,at:r}),a},write:function(e,t,a,n){var r="string"==typeof t?observeReader.reads(t):t,s;if(n=n||{},1<r.length?(s=r.pop(),e=observeReader.read(e,r,n).value,r.push(s)):s=r[0],!!e){var o=peek$3(e,s.key);observeReader.valueReadersMap.isValueLike.test(o,r.length-1,r,n)?observeReader.valueReadersMap.isValueLike.write(o,a,n):(observeReader.valueReadersMap.isValueLike.test(e,r.length-1,r,n)&&(e=e[getValueSymbol$2]()),observeReader.propertyReadersMap.map.test(e)?observeReader.propertyReadersMap.map.write(e,s.key,a,n):observeReader.propertyReadersMap.object.test(e)&&(observeReader.propertyReadersMap.object.write(e,s.key,a,n),n.observation&&n.observation.update()))}}},observeReader.propertyReaders.forEach(function(e){observeReader.propertyReadersMap[e.name]=e}),observeReader.valueReaders.forEach(function(e){observeReader.valueReadersMap[e.name]=e}),observeReader.set=observeReader.write;var canStacheKey_1_4_3_canStacheKey=observeReader,TemplateContext=function(e){e=e||{},this.vars=new canSimpleMap_4_3_2_canSimpleMap(e.vars||{}),this.helpers=new canSimpleMap_4_3_2_canSimpleMap(e.helpers||{}),this.partials=new canSimpleMap_4_3_2_canSimpleMap(e.partials||{}),this.tags=new canSimpleMap_4_3_2_canSimpleMap(e.tags||{})},canViewScope_4_13_6_templateContext=TemplateContext,Compute=function(e){return arguments.length?canReflect_1_18_0_canReflect.setValue(this,e):canReflect_1_18_0_canReflect.getValue(this)},canViewScope_4_13_6_makeComputeLike=function(e){var t=Compute.bind(e);return t.on=t.bind=t.addEventListener=function(a,n){var r=function(e,a){n.call(t,{type:"change"},e,a)};canSingleReference_1_3_0_canSingleReference.set(n,this,r),e.on(r)},t.off=t.unbind=t.removeEventListener=function(t,a){e.off(canSingleReference_1_3_0_canSingleReference.getAndDelete(a,this))},canReflect_1_18_0_canReflect.assignSymbols(t,{"can.getValue":function(){return canReflect_1_18_0_canReflect.getValue(e)},"can.setValue":function(t){return canReflect_1_18_0_canReflect.setValue(e,t)},"can.onValue":function(t,a){return canReflect_1_18_0_canReflect.onValue(e,t,a)},"can.offValue":function(t,a){return canReflect_1_18_0_canReflect.offValue(e,t,a)},"can.valueHasDependencies":function(){return canReflect_1_18_0_canReflect.valueHasDependencies(e)},"can.getPriority":function(){return canReflect_1_18_0_canReflect.getPriority(e)},"can.setPriority":function(t){canReflect_1_18_0_canReflect.setPriority(e,t)},"can.isValueLike":!0,"can.isFunctionLike":!1}),t.isComputed=!0,t},makeDependencyRecord=function(){return{keyDependencies:new Map,valueDependencies:new Set}},makeRootRecord=function(){return{mutateDependenciesForKey:new Map,mutateDependenciesForValue:makeDependencyRecord()}},addMutatedBy=function(e){return function(t,a,n){var r=3===arguments.length;if(2===arguments.length&&(n=a,a=void 0),!n.keyDependencies&&!n.valueDependencies){var o=new Set;o.add(n),n={valueDependencies:o}}var s=e.get(t);s||(s=makeRootRecord(),e.set(t,s)),r&&!s.mutateDependenciesForKey.get(a)&&s.mutateDependenciesForKey.set(a,makeDependencyRecord());var i=r?s.mutateDependenciesForKey.get(a):s.mutateDependenciesForValue;n.valueDependencies&&canReflect_1_18_0_canReflect.addValues(i.valueDependencies,n.valueDependencies),n.keyDependencies&&canReflect_1_18_0_canReflect.each(n.keyDependencies,function(e,t){var a=i.keyDependencies.get(t);a||(a=new Set,i.keyDependencies.set(t,a)),canReflect_1_18_0_canReflect.addValues(a,e)})}},deleteMutatedBy=function(e){return function(t,a,n){var r=3===arguments.length,o=e.get(t);if(2===arguments.length&&(n=a,a=void 0),!n.keyDependencies&&!n.valueDependencies){var i=new Set;i.add(n),n={valueDependencies:i}}var s=r?o.mutateDependenciesForKey.get(a):o.mutateDependenciesForValue;n.valueDependencies&&canReflect_1_18_0_canReflect.removeValues(s.valueDependencies,n.valueDependencies),n.keyDependencies&&canReflect_1_18_0_canReflect.each(n.keyDependencies,function(e,t){var a=s.keyDependencies.get(t);a&&(canReflect_1_18_0_canReflect.removeValues(a,e),!a.size&&s.keyDependencies.delete(t))})}},isFunction=function(e){return"function"==typeof e},getWhatIChangeSymbol=canSymbol_1_6_5_canSymbol.for("can.getWhatIChange"),getKeyDependenciesSymbol=canSymbol_1_6_5_canSymbol.for("can.getKeyDependencies"),getValueDependenciesSymbol$1=canSymbol_1_6_5_canSymbol.for("can.getValueDependencies"),getKeyDependencies=function(e,t){if(isFunction(e[getKeyDependenciesSymbol]))return canReflect_1_18_0_canReflect.getKeyDependencies(e,t)},getValueDependencies=function(e){if(isFunction(e[getValueDependenciesSymbol$1]))return canReflect_1_18_0_canReflect.getValueDependencies(e)},getMutatedKeyDependencies=function(e,t,a){var n=e.get(t),r;return n&&n.mutateDependenciesForKey.has(a)&&(r=n.mutateDependenciesForKey.get(a)),r},getMutatedValueDependencies=function(e,t){var a=e.get(t),n;if(a){var r=a.mutateDependenciesForValue;r.keyDependencies.size&&(n=n||{},n.keyDependencies=r.keyDependencies),r.valueDependencies.size&&(n=n||{},n.valueDependencies=r.valueDependencies)}return n},getWhatIChange=function(e,t){if(isFunction(e[getWhatIChangeSymbol])){var a=2===arguments.length;return a?canReflect_1_18_0_canReflect.getWhatIChange(e,t):canReflect_1_18_0_canReflect.getWhatIChange(e)}},isEmptyRecord=function(e){return null==e||!Object.keys(e).length||e.keyDependencies&&!e.keyDependencies.size&&e.valueDependencies&&!e.valueDependencies.size},getWhatChangesMe=function(e,t,a){var n=3===arguments.length,r=n?getMutatedKeyDependencies(e,t,a):getMutatedValueDependencies(e,t),s=n?getKeyDependencies(t,a):getValueDependencies(t);if(!isEmptyRecord(r)||!isEmptyRecord(s))return canAssign_1_3_3_canAssign(canAssign_1_3_3_canAssign({},r?{mutate:r}:null),s?{derive:s}:null)},getDependencyDataOf=function(e){return function(t,a){var n=2===arguments.length,r=n?getWhatChangesMe(e,t,a):getWhatChangesMe(e,t),s=n?getWhatIChange(t,a):getWhatIChange(t);if(r||s)return canAssign_1_3_3_canAssign(canAssign_1_3_3_canAssign({},s?{whatIChange:s}:null),r?{whatChangesMe:r}:null)}},mutatedByMap=new WeakMap,canReflectDependencies_1_1_2_canReflectDependencies={addMutatedBy:addMutatedBy(mutatedByMap),deleteMutatedBy:deleteMutatedBy(mutatedByMap),getDependencyDataOf:getDependencyDataOf(mutatedByMap)},canStacheHelpers_1_2_0_canStacheHelpers=createCommonjsModule(function(e){if(canNamespace_1_0_0_canNamespace.stacheHelpers)throw new Error("You can't have two versions of can-stache-helpers, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.stacheHelpers={}}),dispatchSymbol$2=canSymbol_1_6_5_canSymbol.for("can.dispatch"),setElementSymbol=canSymbol_1_6_5_canSymbol.for("can.setElement"),getFastPathRoot=canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(e){if(e.reads&&1===e.reads.length){var t=e.root;return t&&t[canSymbol_1_6_5_canSymbol.for("can.getValue")]&&(t=canReflect_1_18_0_canReflect.getValue(t)),t&&canReflect_1_18_0_canReflect.isObservableLike(t)&&canReflect_1_18_0_canReflect.isMapLike(t)&&"function"!=typeof t[e.reads[0].key]&&t}}),isEventObject=function(e){return e&&"number"==typeof e.batchNum&&"string"==typeof e.type},ScopeKeyData=function(e,t,a){this.startingScope=e,this.key=t,this.read=this.read.bind(this),this.dispatch=this.dispatch.bind(this),"debugger"===t&&(this.startingScope={_context:canStacheHelpers_1_2_0_canStacheHelpers},this.read=function(){var t=canStacheHelpers_1_2_0_canStacheHelpers["debugger"];return t({scope:e})});var n=this.observation=new canObservation_4_2_0_canObservation(this.read,this);this.options=canAssign_1_3_3_canAssign({observation:this.observation},a),this.fastPath=void 0,this.root=void 0,this.reads=void 0,this.setRoot=void 0,this._thisArg=new canSimpleObservable_2_5_0_canSimpleObservable,this.parentHasKey=void 0;var r=new Set;r.add(n),this.dependencies={valueDependencies:r},this._latestValue=void 0};value(ScopeKeyData.prototype);function fastOnBoundSet_Value(){this._value=this.newVal}function fastOnBoundSetValue(){this.value=this.newVal}canAssign_1_3_3_canAssign(ScopeKeyData.prototype,{constructor:ScopeKeyData,dispatch:function(e){var t=this.value;this._latestValue=this.value=e,this[dispatchSymbol$2].call(this,this.value,t)},onBound:function(){this.bound=!0,canReflect_1_18_0_canReflect.onValue(this.observation,this.dispatch,"notify");var e=getFastPathRoot(this);e&&this.toFastPath(e),this._latestValue=this.value=canObservationRecorder_1_3_1_canObservationRecorder.peekValue(this.observation)},onUnbound:function(){this.bound=!1,canReflect_1_18_0_canReflect.offValue(this.observation,this.dispatch,"notify"),this.toSlowPath()},set:function(e){var t=this.root||this.setRoot;t?this.reads.length?canStacheKey_1_4_3_canStacheKey.write(t,this.reads,e,this.options):canReflect_1_18_0_canReflect.setValue(t,e):this.startingScope.set(this.key,e,this.options)},get:function(){return canObservationRecorder_1_3_1_canObservationRecorder.isRecording()&&(canObservationRecorder_1_3_1_canObservationRecorder.add(this),!this.bound&&canObservation_4_2_0_canObservation.temporarilyBind(this)),!0===this.bound&&!0===this.fastPath?this._latestValue:canObservationRecorder_1_3_1_canObservationRecorder.peekValue(this.observation)},toFastPath:function(e){var t=this,a=this.observation;this.fastPath=!0,a.dependencyChange=function(a,n){if(isEventObject(n))throw"no event objects!";return a===e&&"function"!=typeof n?(t._latestValue=n,this.newVal=n):t.toSlowPath(),canObservation_4_2_0_canObservation.prototype.dependencyChange.apply(this,arguments)},a.onBound=a.hasOwnProperty("_value")?fastOnBoundSet_Value:fastOnBoundSetValue},toSlowPath:function(){this.observation.dependencyChange=canObservation_4_2_0_canObservation.prototype.dependencyChange,this.observation.onBound=canObservation_4_2_0_canObservation.prototype.onBound,this.fastPath=!1},read:function(){var e;return this.root?(e=canStacheKey_1_4_3_canStacheKey.read(this.root,this.reads,this.options),this.thisArg=e.parent,e.value):(e=this.startingScope.read(this.key,this.options),this.scope=e.scope,this.reads=e.reads,this.root=e.rootObserve,this.setRoot=e.setRoot,this.thisArg=e.thisArg,this.parentHasKey=e.parentHasKey,e.value)},hasDependencies:function(){return this.bound||canObservation_4_2_0_canObservation.temporarilyBind(this),canReflect_1_18_0_canReflect.valueHasDependencies(this.observation)}}),Object.defineProperty(ScopeKeyData.prototype,"thisArg",{get:function(){return this._thisArg.get()},set:function(e){this._thisArg.set(e)}});var scopeKeyDataPrototype={"can.getValue":ScopeKeyData.prototype.get,"can.setValue":ScopeKeyData.prototype.set,"can.valueHasDependencies":ScopeKeyData.prototype.hasDependencies,"can.getValueDependencies":function(){return this.dependencies},"can.getPriority":function(){return canReflect_1_18_0_canReflect.getPriority(this.observation)},"can.setPriority":function(e){canReflect_1_18_0_canReflect.setPriority(this.observation,e)},"can.setElement":function(e){this.observation[setElementSymbol](e)}};canReflect_1_18_0_canReflect.assignSymbols(ScopeKeyData.prototype,scopeKeyDataPrototype),Object.defineProperty(ScopeKeyData.prototype,"compute",{get:function(){var e=canViewScope_4_13_6_makeComputeLike(this);return Object.defineProperty(this,"compute",{value:e,writable:!1,configurable:!1}),e},configurable:!0}),Object.defineProperty(ScopeKeyData.prototype,"initialValue",{get:function(){return this.bound||canObservation_4_2_0_canObservation.temporarilyBind(this),canObservationRecorder_1_3_1_canObservationRecorder.peekValue(this)},set:function(){throw new Error("initialValue should not be set")},configurable:!0});var canViewScope_4_13_6_scopeKeyData=ScopeKeyData,canViewScope_4_13_6_compute_data=function(e,t,a){return new canViewScope_4_13_6_scopeKeyData(e,t,a||{args:[]})};function objectCreateWithSymbolsAndSpecificProperties(e,t){var a={};return"getOwnPropertySymbols"in Object&&Object.getOwnPropertySymbols(e).forEach(function(t){a[t]=e[t]}),Object.getOwnPropertyNames(e).forEach(function(n){(0<=t.indexOf(n)||0===n.indexOf("@@symbol"))&&(a[n]=e[n])}),Object.create(a)}var LetContext=canSimpleMap_4_3_2_canSimpleMap.extend("LetContext",{});LetContext.prototype=objectCreateWithSymbolsAndSpecificProperties(canSimpleMap_4_3_2_canSimpleMap.prototype,["setup","attr","serialize","get","set","log","dispatch","constructorExtends","newInstance","_inherit","_defineProperty","_overwrite","instance","extend","ReturnValue","setup","init"]),LetContext.prototype.constructor=LetContext;var canViewScope_4_13_6_letContext=LetContext;function canHaveProperties(e){return null!=e}function returnFalse(){return!1}function Scope(e,t,a){this._context=e,this._parent=t,this._meta=a||{},this.__cache={}}var parentContextSearch=/(\.\.\/)|(\.\/)|(this[\.@])/g;canAssign_1_3_3_canAssign(Scope,{read:canStacheKey_1_4_3_canStacheKey.read,TemplateContext:canViewScope_4_13_6_templateContext,keyInfo:function(e){"./"===e&&(e="this");var t={remainingKey:e,isScope:"scope"===e};if(t.isScope)return t;var a=e.substr(0,6);return(t.isInScope="scope."===a||"scope@"===a,t.isInScope)?(t.remainingKey=e.substr(6),t):"scope/"===a?(t.walkScope=!0,t.remainingKey=e.substr(6),t):"@scope/"===e.substr(0,7)?(t.walkScope=!0,t.remainingKey=e.substr(7),t):(t.parentContextWalkCount=0,t.remainingKey=e.replace(parentContextSearch,function(e,a){return t.isContextBased=!0,void 0!==a&&t.parentContextWalkCount++,""}),".."===t.remainingKey?(t.parentContextWalkCount++,t.remainingKey="this"):("."===t.remainingKey||""===t.remainingKey)&&(t.remainingKey="this"),"this"===t.remainingKey&&(t.isContextBased=!0),t)},isTemplateContextOrCanNotHaveProperties:function(e){var t=e._context;if(t instanceof canViewScope_4_13_6_templateContext)return!0;return!canHaveProperties(t)},shouldSkipIfSpecial:function(e){var t=!0===e._meta.special;return!(!0!=t)||!!Scope.isTemplateContextOrCanNotHaveProperties(e)},shouldSkipEverythingButSpecial:function(e){var t=!0===e._meta.special;return!(!1!=t)||!!Scope.isTemplateContextOrCanNotHaveProperties(e)},makeShouldExitOnSecondNormalContext:function(){var e=!1;return function(t){var a=!t.isSpecial(),n=a&&e;return a&&(e=!0),n}},makeShouldExitAfterFirstNormalContext:function(){var e=!1;return function(t){if(e)return!0;var a=!t.isSpecial();return a&&(e=!0),!1}},makeShouldSkipSpecialContexts:function(e){var t=e||0;return function(e){return!(0>t&&e._meta.notContext)&&(!!e.isSpecial()||(t--,!(0>t)))}}}),canAssign_1_3_3_canAssign(Scope.prototype,{add:function(e,t){return e===this._context?this:new this.constructor(e,this,t)},find:function(e,t){var a=canStacheKey_1_4_3_canStacheKey.reads(e),n={shouldExit:returnFalse,shouldSkip:Scope.shouldSkipIfSpecial,shouldLookForHelper:!0,read:canStacheKey_1_4_3_canStacheKey.read},r=this._walk(a,t,n);return r.value},readFromSpecialContext:function(e){return this._walk([{key:e,at:!1}],{special:!0},{shouldExit:returnFalse,shouldSkip:Scope.shouldSkipEverythingButSpecial,shouldLookForHelper:!1,read:canStacheKey_1_4_3_canStacheKey.read})},readFromTemplateContext:function(e,t){var a=canStacheKey_1_4_3_canStacheKey.reads(e);return canStacheKey_1_4_3_canStacheKey.read(this.templateContext,a,t)},read:function(e,t){return t=t||{},this.readKeyInfo(Scope.keyInfo(e),t||{})},readKeyInfo:function(e,t){var a={read:t.read||canStacheKey_1_4_3_canStacheKey.read},n,r;if(e.isScope)return{value:this};if(e.isInScope)return r=canStacheKey_1_4_3_canStacheKey.reads(e.remainingKey),n=canStacheKey_1_4_3_canStacheKey.read(this,r,t),"undefined"!=typeof n.value||n.parentHasKey||(n=this.readFromTemplateContext(e.remainingKey,t)),canAssign_1_3_3_canAssign(n,{thisArg:0<r.length?n.parent:void 0});if(e.isContextBased)return r="this"===e.remainingKey?[]:canStacheKey_1_4_3_canStacheKey.reads(e.remainingKey),a.shouldExit=Scope.makeShouldExitOnSecondNormalContext(),a.shouldSkip=Scope.makeShouldSkipSpecialContexts(e.parentContextWalkCount),a.shouldLookForHelper=!0,this._walk(r,t,a);if(e.walkScope)return a.shouldExit=returnFalse,a.shouldSkip=Scope.shouldSkipIfSpecial,a.shouldLookForHelper=!0,r=canStacheKey_1_4_3_canStacheKey.reads(e.remainingKey),this._walk(r,t,a);r=canStacheKey_1_4_3_canStacheKey.reads(e.remainingKey);var s=t&&!0===t.special;return a.shouldExit=Scope.makeShouldExitOnSecondNormalContext(),a.shouldSkip=s?Scope.shouldSkipEverythingButSpecial:Scope.shouldSkipIfSpecial,a.shouldLookForHelper=!s,this._walk(r,t,a)},_walk:function(e,t,a){for(var n=this,r=[],s=-1,o=canAssign_1_3_3_canAssign({foundObservable:function(t,a){p=t,c=e.slice(a)},earlyExit:function(t,a){var r=!0===n._meta.variable,o=!1;o=!0==r&&0===a?canReflect_1_18_0_canReflect.hasKey(t,e[a].key):a>s||a===s&&"object"==typeof t&&canReflect_1_18_0_canReflect.hasOwnKey(t,e[a].key),o&&(y=p,u=c,s=a)}},t),i=canObservationRecorder_1_3_1_canObservationRecorder.isRecording(),l=!1,d,p,c,u,y;n;){if(!0===a.shouldSkip(n)){n=n._parent;continue}if(!0===a.shouldExit(n))break;l=!0,d=n._context;var h=canObservationRecorder_1_3_1_canObservationRecorder.trap(),g=a.read(d,e,o),m=h();if(void 0!==g.value||g.parentHasKey)return!m.length&&i?(p=g.parent,c=e.slice(e.length-1)):canObservationRecorder_1_3_1_canObservationRecorder.addMany(m),{scope:n,rootObserve:p,value:g.value,reads:c,thisArg:g.parent,parentHasKey:g.parentHasKey};r.push.apply(r,m),n=n._parent}if(a.shouldLookForHelper){var f=this.getHelperOrPartial(e);if(f&&f.value)return{value:f.value}}return canObservationRecorder_1_3_1_canObservationRecorder.addMany(r),{setRoot:y,reads:u,value:void 0,noContextAvailable:!l}},getDataForScopeSet:function(e,t){var a=Scope.keyInfo(e),n=canAssign_1_3_3_canAssign({read:function(e,a){if(void 0!==s||e instanceof canViewScope_4_13_6_letContext||(s=e),1<a.length){var n=a.slice(0,a.length-1),r=canStacheKey_1_4_3_canStacheKey.read(e,n,t).value;return null!=r&&canReflect_1_18_0_canReflect.hasKey(r,a[a.length-1].key)?{parent:r,parentHasKey:!0,value:void 0}:{}}return 1===a.length?canReflect_1_18_0_canReflect.hasKey(e,a[0].key)?{parent:e,parentHasKey:!0,value:void 0}:{}:{value:e}}},t),r=this.readKeyInfo(a,n),s;if("this"===a.remainingKey)return{parent:r.value,how:"setValue"};var o=a.remainingKey.split("."),i=o.pop(),l;return r.thisArg?l=r.thisArg:s&&(l=s),void 0===l?{error:"Attempting to set a value at "+e+" where the context is undefined."}:!canReflect_1_18_0_canReflect.isObservableLike(l)&&canReflect_1_18_0_canReflect.isObservableLike(l[i])?canReflect_1_18_0_canReflect.isMapLike(l[i])?{parent:l,key:i,how:"updateDeep",warn:"can-view-scope: Merging data into \""+i+"\" because its parent is non-observable"}:canReflect_1_18_0_canReflect.isValueLike(l[i])?{parent:l,key:i,how:"setValue"}:{parent:l,how:"write",key:i,passOptions:!0}:{parent:l,how:"write",key:i,passOptions:!0}},getHelper:function(e){return console.warn(".getHelper is deprecated, use .getHelperOrPartial"),this.getHelperOrPartial(e)},getHelperOrPartial:function(e){for(var t=this,a,n;t;){if(a=t._context,a instanceof canViewScope_4_13_6_templateContext){if(n=canStacheKey_1_4_3_canStacheKey.read(a.helpers,e,{proxyMethods:!1}),void 0!==n.value)return n;if(n=canStacheKey_1_4_3_canStacheKey.read(a.partials,e,{proxyMethods:!1}),void 0!==n.value)return n}t=t._parent}return canStacheKey_1_4_3_canStacheKey.read(canStacheHelpers_1_2_0_canStacheHelpers,e,{proxyMethods:!1})},get:function(e,t){t=canAssign_1_3_3_canAssign({isArgument:!0},t);var a=this.read(e,t);return a.value},peek:canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(e,t){return this.get(e,t)}),peak:canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(e,t){return this.peek(e,t)}),getScope:function(e){for(var t=this;t;){if(e(t))return t;t=t._parent}},getContext:function(e){var t=this.getScope(e);return t&&t._context},getTemplateContext:function(){var e=this.getScope(function(e){return t=e,e._context instanceof canViewScope_4_13_6_templateContext}),t;return e||(e=new Scope(new canViewScope_4_13_6_templateContext()),t._parent=e),e},addTemplateContext:function(){return this.add(new canViewScope_4_13_6_templateContext)},addLetContext:function(e){return this.add(new canViewScope_4_13_6_letContext(e||{}),{variable:!0})},getRoot:function(){for(var e=this,t=this;e._parent;)t=e,e=e._parent;return e._context instanceof canViewScope_4_13_6_templateContext&&(e=t),e._context},getViewModel:function(){var e=this.getScope(function(e){return e._meta.viewModel});return e&&e._context},getTop:function(){var e;return this.getScope(function(t){return t._meta.viewModel&&(e=t),!1}),e&&e._context},getPathsForKey:function(){},hasKey:function(e){var t=canStacheKey_1_4_3_canStacheKey.reads(e),a;return a="scope"===t[0].key?canStacheKey_1_4_3_canStacheKey.read(this,t.slice(1),e):canStacheKey_1_4_3_canStacheKey.read(this._context,t,e),a.foundLastParent&&a.parentHasKey},set:function(e,t,a){a=a||{};var n=this.getDataForScopeSet(e,a),r=n.parent;switch(n.warn&&dev.warn(n.warn),n.how){case"set":r.set(n.key,t,n.passOptions?a:void 0);break;case"write":canStacheKey_1_4_3_canStacheKey.write(r,n.key,t,a);break;case"setValue":canReflect_1_18_0_canReflect.setValue("key"in n?r[n.key]:r,t);break;case"setKeyValue":canReflect_1_18_0_canReflect.setKeyValue(r,n.key,t);break;case"updateDeep":canReflect_1_18_0_canReflect.updateDeep(r[n.key],t);}},attr:canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(e,t,a){return dev.warn("can-view-scope::attr is deprecated, please use peek, get or set"),a=canAssign_1_3_3_canAssign({isArgument:!0},a),2===arguments.length?this.set(e,t,a):this.get(e,a)}),computeData:function(e,t){return canViewScope_4_13_6_compute_data(this,e,t)},compute:function(e,t){return this.computeData(e,t).compute},cloneFromRef:function(){for(var e=[],t=this,a,n;t;){if(a=t._context,a instanceof canViewScope_4_13_6_templateContext){n=t._parent;break}e.unshift(t),t=t._parent}return n?(e.forEach(function(e){n=n.add(e._context,e._meta)}),n):this},isSpecial:function(){return this._meta.notContext||this._meta.special||this._context instanceof canViewScope_4_13_6_templateContext||this._meta.variable}}),Scope.prototype._read=Scope.prototype._walk,canReflect_1_18_0_canReflect.assignSymbols(Scope.prototype,{"can.hasKey":Scope.prototype.hasKey});var templateContextPrimitives=["filename","lineNumber"];templateContextPrimitives.forEach(function(e){Object.defineProperty(Scope.prototype,e,{get:function(){return this.readFromTemplateContext(e).value},set:function(t){this.templateContext[e]=t}})}),canDefineLazyValue_1_1_1_defineLazyValue(Scope.prototype,"templateContext",function(){return this.getTemplateContext()._context}),canDefineLazyValue_1_1_1_defineLazyValue(Scope.prototype,"root",function(){return dev.warn("`scope.root` is deprecated. Use either `scope.top`: https://canjs.com/doc/can-stache/keys/scope.html#scope_top or `scope.vm`: https://canjs.com/doc/can-stache/keys/scope.html#scope_vm instead."),this.getRoot()}),canDefineLazyValue_1_1_1_defineLazyValue(Scope.prototype,"vm",function(){return this.getViewModel()}),canDefineLazyValue_1_1_1_defineLazyValue(Scope.prototype,"top",function(){return this.getTop()}),canDefineLazyValue_1_1_1_defineLazyValue(Scope.prototype,"helpers",function(){return canStacheHelpers_1_2_0_canStacheHelpers});var specialKeywords=["index","key","element","event","viewModel","arguments","helperOptions","args"];specialKeywords.forEach(function(e){Object.defineProperty(Scope.prototype,e,{get:function(){return this.readFromSpecialContext(e).value}})}),canNamespace_1_0_0_canNamespace.view=canNamespace_1_0_0_canNamespace.view||{};var canViewScope_4_13_6_canViewScope=canNamespace_1_0_0_canNamespace.view.Scope=Scope;function KeyObservable(e,t){t=""+t,this.key=t,this.root=e,settable.call(this,function(){return canStacheKey_1_4_3_canStacheKey.get(this,t)},e)}KeyObservable.prototype=Object.create(settable.prototype),KeyObservable.prototype.set=function(e){canStacheKey_1_4_3_canStacheKey.set(this.root,this.key,e)};var keyObservable=KeyObservable,isViewSymbol=canSymbol_1_6_5_canSymbol.for("can.isView"),createNoOpRenderer=function(e){return function(){e&&(e.rendered=!0)}},utils$1={last:function(e){return null!=e&&e[e.length-1]},emptyHandler:function(){},jsonParse:function(e){return"'"===e[0]?e.substr(1,e.length-2):"undefined"===e?void 0:JSON.parse(e)},mixins:{last:function(){return this.stack[this.stack.length-1]},add:function(e){this.last().add(e)},subSectionDepth:function(){return this.stack.length-1}},createRenderers:function(e,t,a,n,r,s){e.fn=n?this.makeRendererConvertScopes(n,t,a,s,e.metadata):createNoOpRenderer(e.metadata),e.inverse=r?this.makeRendererConvertScopes(r,t,a,s,e.metadata):createNoOpRenderer(e.metadata),e.isSection=!!(n||r)},makeRendererConvertScopes:function(e,t,a,n,r){var s=function(n,s,o){n===void 0||n instanceof canViewScope_4_13_6_canViewScope||(t?n=t.add(n):n=new canViewScope_4_13_6_canViewScope(n||{})),r&&(r.rendered=!0);var i=e(n||t,o||a);return i};return n?s:canObservationRecorder_1_3_1_canObservationRecorder.ignore(s)},makeView:function(e){var t=canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(t,a){return t instanceof canViewScope_4_13_6_canViewScope||(t=new canViewScope_4_13_6_canViewScope(t)),e(t,a)});return t[isViewSymbol]=!0,t},getItemsStringContent:function(e,t,a){for(var n="",r=canStacheKey_1_4_3_canStacheKey.get(e,"length"),s=canReflect_1_18_0_canReflect.isObservableLike(e),o=0,l;o<r;o++)l=s?new keyObservable(e,o):e[o],n+=a.fn(l);return n},getItemsFragContent:function(e,t,a){var n=[],r=canStacheKey_1_4_3_canStacheKey.get(e,"length"),s=canReflect_1_18_0_canReflect.isObservableLike(e),o=t.exprData&&t.exprData.hashExprs,l;0<canReflect_1_18_0_canReflect.size(o)&&(l={},canReflect_1_18_0_canReflect.eachKey(o,function(e,t){l[e.key]=t}));for(var d=0;d<r;d++){var p={},c=s?new keyObservable(e,d):e[d];0<canReflect_1_18_0_canReflect.size(l)&&(l.value&&(p[l.value]=c),l.index&&(p[l.index]=d)),n.push(t.fn(a.add(p,{notContext:!0}).add({index:d},{special:!0}).add(c)))}return n}},last=utils$1.last,decodeHTML="undefined"!=typeof document&&function(){var e=document$1().createElement("div");return function(t){return-1===t.indexOf("&")?t.replace(/\r\n/g,"\n"):(e.innerHTML=t,0===e.childNodes.length?"":e.childNodes.item(0).nodeValue)}}(),HTMLSectionBuilder=function(e){e&&(this.filename=e),this.stack=[new HTMLSection]};canAssign_1_3_3_canAssign(HTMLSectionBuilder.prototype,utils$1.mixins),canAssign_1_3_3_canAssign(HTMLSectionBuilder.prototype,{startSubSection:function(e){var t=new HTMLSection(e);return this.stack.push(t),t},endSubSectionAndReturnRenderer:function(){if(this.last().isEmpty())return this.stack.pop(),null;var e=this.endSection();return utils$1.makeView(e.compiled.hydrate.bind(e.compiled))},startSection:function(e){var t=new HTMLSection(e);this.last().add(t.targetCallback),this.stack.push(t)},endSection:function(){return this.last().compile(),this.stack.pop()},inverse:function(){this.last().inverse()},compile:function(){var e=this.stack.pop().compile();return utils$1.makeView(e.hydrate.bind(e))},push:function(e){this.last().push(e)},pop:function(){return this.last().pop()},removeCurrentNode:function(){this.last().removeCurrentNode()}});var HTMLSection=function(e){this.data="targetData",this.targetData=[],this.targetStack=[];var t=this;this.targetCallback=function(a,n){e.call(this,a,n,t.compiled.hydrate.bind(t.compiled),t.inverseCompiled&&t.inverseCompiled.hydrate.bind(t.inverseCompiled))}};canAssign_1_3_3_canAssign(HTMLSection.prototype,{inverse:function(){this.inverseData=[],this.data="inverseData"},push:function(e){this.add(e),this.targetStack.push(e)},pop:function(){return this.targetStack.pop()},add:function(e){"string"==typeof e&&(e=decodeHTML(e)),this.targetStack.length?last(this.targetStack).children.push(e):this[this.data].push(e)},compile:function(){return this.compiled=canViewTarget_4_1_6_canViewTarget(this.targetData,document$1()),this.inverseData&&(this.inverseCompiled=canViewTarget_4_1_6_canViewTarget(this.inverseData,document$1()),delete this.inverseData),this.targetStack=this.targetData=null,this.compiled},removeCurrentNode:function(){var e=this.children();return e.pop()},children:function(){return this.targetStack.length?last(this.targetStack).children:this[this.data]},isEmpty:function(){return!this.targetData.length}}),HTMLSectionBuilder.HTMLSection=HTMLSection;var html_section=HTMLSectionBuilder;function contains$1(e,t){return e.contains?e.contains(t):e.nodeType===Node.DOCUMENT_NODE&&e.documentElement?contains$1(e.documentElement,t):(t=t.parentNode,t===e)}var live={setup:function(e,t,a){var n=!1,r=function(){return n||(n=!0,a(o),s&&(s(),s=void 0)),!0},s,o;return o={teardownCheck:function(e){return!e&&r()}},s=canDomMutate_1_3_11_canDomMutate.onNodeRemoval(e,function(){var t=e.ownerDocument;contains$1(t,e)||r()}),t(o),o},listen:function(e,t,a,n){return live.setup(e,function(){canReflect_1_18_0_canReflect.onValue(t,a,n||"notify")},function(e){canReflect_1_18_0_canReflect.offValue(t,a,n||"notify"),e.nodeList&&canViewNodelist_4_3_4_canViewNodelist.unregister(e.nodeList)})},getAttributeParts:function(e){var t={},a;return canViewParser_4_1_3_canViewParser.parseAttrs(e,{attrStart:function(e){t[e]="",a=e},attrValue:function(e){t[a]+=e},attrEnd:function(){}}),t},isNode:function(e){return e&&e.nodeType},addTextNodeIfNoChildren:function(e){e.firstChild||e.appendChild(e.ownerDocument.createTextNode(""))},replace:function(e,t,a){var n=e.slice(0),r=canFragment_1_3_1_canFragment(t);return canViewNodelist_4_3_4_canViewNodelist.register(e,a),canViewNodelist_4_3_4_canViewNodelist.update(e,canChildNodes_1_2_1_canChildNodes(r)),canViewNodelist_4_3_4_canViewNodelist.replace(n,r),e},getParentNode:function(e,t){return t&&11===e.parentNode.nodeType?t:e.parentNode},makeString:function(e){return null==e?"":""+e}},core=live,canDomData_1_0_3_canDomData=createCommonjsModule(function(e){var t=function(e){for(var t in e)return!1;return!0},a=new WeakMap,n=function(e){var t=!1;return a.has(e)&&(t=!0,a.delete(e)),t};if(canNamespace_1_0_0_canNamespace.domData)throw new Error("You can't have two versions of can-dom-data, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.domData={_data:a,get:function(e,t){var n=a.get(e);return t===void 0?n:n&&n[t]},set:function(e,t,n){var r=a.get(e);return void 0===r&&(r={},a.set(e,r)),void 0!==t&&(r[t]=n),r},clean:function(e,r){var s=a.get(e);s&&s[r]&&delete s[r],t(s)&&n(e)},delete:n}}),global$1=global_1(),xmlnsAttrNamespaceURI="http://www.w3.org/2000/xmlns/",xlinkHrefAttrNamespaceURI="http://www.w3.org/1999/xlink",attrsNamespacesURI={xmlns:xmlnsAttrNamespaceURI,"xlink:href":xlinkHrefAttrNamespaceURI},formElements={INPUT:!0,TEXTAREA:!0,SELECT:!0,BUTTON:!0},toString$2=function(e){return null==e?"":""+e},isSVG=function(e){return"http://www.w3.org/2000/svg"===e.namespaceURI},truthy=function(){return!0},getSpecialTest=function(e){return e&&e.test||truthy},propProp=function(e,t){return t=t||{},t.get=function(){return this[e]},t.set=function(t){this[e]!==t&&(this[e]=t)},t},booleanProp=function(e){return{isBoolean:!0,set:function(t){e in this?this[e]=t:canDomMutate_1_3_11_node.setAttribute.call(this,e,"")},remove:function(){this[e]=!1}}},setupMO=function(e,t){var a=canDomData_1_0_3_canDomData.get(e,"attrMO");if(!a){var n=function(){t.call(e)},r=mutationObserver();if(r){var s=new r(n);s.observe(e,{childList:!0,subtree:!0}),canDomData_1_0_3_canDomData.set(e,"attrMO",s)}else canDomData_1_0_3_canDomData.set(e,"attrMO",!0),canDomData_1_0_3_canDomData.set(e,"canBindingCallback",{onMutation:n})}},_findOptionToSelect=function(e,t){for(var a=e.firstChild;a;){if("OPTION"===a.nodeName&&t===a.value)return a;if("OPTGROUP"===a.nodeName){var n=_findOptionToSelect(a,t);if(n)return n}a=a.nextSibling}},setChildOptions=function(e,t){var a;null!=t&&(a=_findOptionToSelect(e,t)),a?a.selected=!0:e.selectedIndex=-1},forEachOption=function(e,t){for(var a=e.firstChild;a;)"OPTION"===a.nodeName&&t(a),"OPTGROUP"===a.nodeName&&forEachOption(a,t),a=a.nextSibling},collectSelectedOptions=function(e){var t=[];return forEachOption(e,function(e){e.selected&&t.push(e.value)}),t},markSelectedOptions=function(e,t){forEachOption(e,function(e){e.selected=-1!==t.indexOf(e.value)})},setChildOptionsOnChange=function(e,t){var a=canDomData_1_0_3_canDomData.get(e,"attrSetChildOptions");return a?Function.prototype:(a=function(){setChildOptions(e,e.value)},canDomData_1_0_3_canDomData.set(e,"attrSetChildOptions",a),t.call(e,"change",a),function(t){canDomData_1_0_3_canDomData.clean(e,"attrSetChildOptions"),t.call(e,"change",a)})},behaviorRules=new Map,isPropWritable=function(e,t){var a=Object.getOwnPropertyDescriptor(e,t);if(a)return a.writable||a.set;var n=Object.getPrototypeOf(e);return!!n&&isPropWritable(n,t)},cacheRule=function(e,t,a){var n;return n=behaviorRules.get(e.prototype),n||(n={},behaviorRules.set(e.constructor,n)),n[t]=a,a},specialAttributes={checked:{get:function(){return this.checked},set:function(e){var t=!!e||""===e||0===arguments.length;this.checked=t,t&&"radio"===this.type&&(this.defaultChecked=!0)},remove:function(){this.checked=!1},test:function(){return"INPUT"===this.nodeName}},class:{get:function(){return isSVG(this)?this.getAttribute("class"):this.className},set:function(e){e=e||"",isSVG(this)?canDomMutate_1_3_11_node.setAttribute.call(this,"class",""+e):this.className=e}},disabled:booleanProp("disabled"),focused:{get:function(){return this===document.activeElement},set:function(e){function t(){e?r.focus():r.blur()}var a=attr.get(this,"focused"),n=this.ownerDocument.documentElement,r=this;if(a!==e)if(!n.contains(r))var s=canDomMutate_1_3_11_canDomMutate.onNodeInsertion(r,function(){s(),t()});else canQueues_1_3_1_canQueues.enqueueByQueue({mutate:[t]},null,[]);return!0},addEventListener:function(e,t,a){return a.call(this,"focus",t),a.call(this,"blur",t),function(e){e.call(this,"focus",t),e.call(this,"blur",t)}},test:function(){return"INPUT"===this.nodeName}},for:propProp("htmlFor"),innertext:propProp("innerText"),innerhtml:propProp("innerHTML"),innerHTML:propProp("innerHTML",{addEventListener:function(e,t){var a=[],n=this;return["change","blur"].forEach(function(e){var r=function(){t.apply(this,arguments)};canDomEvents_1_3_11_canDomEvents.addEventListener(n,e,r),a.push([e,r])}),function(e){a.forEach(function(t){e.call(n,t[0],t[1])})}}}),required:booleanProp("required"),readonly:booleanProp("readOnly"),selected:{get:function(){return this.selected},set:function(e){e=!!e,canDomData_1_0_3_canDomData.set(this,"lastSetValue",e),this.selected=e},addEventListener:function(e,t,a){var n=this,r=this.parentNode,s=n.selected,o=function(){var t=n.selected;s=canDomData_1_0_3_canDomData.get(n,"lastSetValue")||s,t!==s&&(s=t,canDomEvents_1_3_11_canDomEvents.dispatch(n,e))},i=setChildOptionsOnChange(r,a);return canDomEvents_1_3_11_canDomEvents.addEventListener(r,"change",o),a.call(n,e,t),function(a){i(a),canDomEvents_1_3_11_canDomEvents.removeEventListener(r,"change",o),a.call(n,e,t)}},test:function(){return"OPTION"===this.nodeName&&this.parentNode&&"SELECT"===this.parentNode.nodeName}},style:{set:function(){var e=global$1.document&&document$1().createElement("div");return e&&e.style&&"cssText"in e.style?function(e){this.style.cssText=e||""}:function(e){canDomMutate_1_3_11_node.setAttribute.call(this,"style",e)}}()},textcontent:propProp("textContent"),value:{get:function(){var e=this.value;return"SELECT"===this.nodeName&&"selectedIndex"in this&&-1===this.selectedIndex&&(e=void 0),e},set:function(e){var t=this.nodeName.toLowerCase();if(("input"===t||"textarea"===t)&&(e=toString$2(e)),(this.value!==e||"option"===t)&&(this.value=e),("input"===t||"textarea"===t)&&(this.defaultValue=e),"select"===t){canDomData_1_0_3_canDomData.set(this,"attrValueLastVal",e),setChildOptions(this,null===e?e:this.value);var a=this.ownerDocument.documentElement;if(!a.contains(this))var n=this,r=canDomMutate_1_3_11_canDomMutate.onNodeInsertion(n,function(){r(),setChildOptions(n,null===e?e:n.value)});setupMO(this,function(){var e=canDomData_1_0_3_canDomData.get(this,"attrValueLastVal");attr.set(this,"value",e),canDomEvents_1_3_11_canDomEvents.dispatch(this,"change")})}},test:function(){return formElements[this.nodeName]}},values:{get:function(){return collectSelectedOptions(this)},set:function(e){e=e||[],markSelectedOptions(this,e),canDomData_1_0_3_canDomData.set(this,"stickyValues",attr.get(this,"values")),setupMO(this,function(){var e=canDomData_1_0_3_canDomData.get(this,"stickyValues");attr.set(this,"values",e);var t=canDomData_1_0_3_canDomData.get(this,"stickyValues"),a=list(e.slice().sort(),t.slice().sort());a.length&&canDomEvents_1_3_11_canDomEvents.dispatch(this,"values")})},addEventListener:function(e,t,a){var n=function(){canDomEvents_1_3_11_canDomEvents.dispatch(this,"values")};return canDomEvents_1_3_11_canDomEvents.addEventListener(this,"change",n),a.call(this,e,t),function(a){canDomEvents_1_3_11_canDomEvents.removeEventListener(this,"change",n),a.call(this,e,t)}}}},attr={rules:behaviorRules,specialAttributes:specialAttributes,getRule:function(e,t){var a=specialAttributes[t];if(a)return a;var n=behaviorRules.get(e.constructor),r=n&&n[t];if(r)return r;if(!(t in e))return this.attribute(t);var s=isPropWritable(e,t)?this.property(t):this.attribute(t);return cacheRule(e,t,s)},attribute:function(e){return{get:function(){return this.getAttribute(e)},set:function(t){attrsNamespacesURI[e]?canDomMutate_1_3_11_node.setAttributeNS.call(this,attrsNamespacesURI[e],e,t):canDomMutate_1_3_11_node.setAttribute.call(this,e,t)}}},property:function(e){return{get:function(){return this[e]},set:function(t){this[e]=t}}},findSpecialListener:function(e){return specialAttributes[e]&&specialAttributes[e].addEventListener},setAttrOrProp:function(e,t,a){return this.set(e,t,a)},set:function(e,t,a){var n=this.getRule(e,t),r=n&&n.set;if(r)return r.call(e,a)},get:function(e,t){var a=this.getRule(e,t),n=a&&a.get;if(n)return a.test?a.test.call(e)&&n.call(e):n.call(e)},remove:function(e,t){t=t.toLowerCase();var a=specialAttributes[t],n=a&&a.set,r=a&&a.remove,s=getSpecialTest(a);"function"==typeof r&&s.call(e)?r.call(e):"function"==typeof n&&s.call(e)?n.call(e,void 0):canDomMutate_1_3_11_node.removeAttribute.call(e,t)}},canAttributeObservable_1_2_7_behaviors=attr;core.attr=function(e,t,a){core.listen(e,a,function(a){canQueues_1_3_1_canQueues.domUIQueue.enqueue(canAttributeObservable_1_2_7_behaviors.set,canAttributeObservable_1_2_7_behaviors,[e,t,a])}),canAttributeObservable_1_2_7_behaviors.set(e,t,canReflect_1_18_0_canReflect.getValue(a))},core.attrs=function(e,t,a,n){function r(t){var r=core.getAttributeParts(t),s;for(s in r){var o=r[s],l=i[s];if(o!==l){canDomMutate_1_3_11_node.setAttribute.call(e,s,o);var d=canViewCallbacks_4_4_1_canViewCallbacks.attr(s);d&&d(e,{attributeName:s,scope:a,options:n})}delete i[s]}for(s in i)canDomMutate_1_3_11_node.removeAttribute.call(e,s);i=r}if(!canReflect_1_18_0_canReflect.isObservableLike(t)){var s=core.getAttributeParts(t);for(var o in s)canDomMutate_1_3_11_node.setAttribute.call(e,o,s[o]);return}var i={};canReflect_1_18_0_canReflect.onValue(t,r,"domUI");var l=function(){canReflect_1_18_0_canReflect.offValue(t,r,"domUI"),d&&(d(),d=void 0)},d;d=canDomMutate_1_3_11_canDomMutate.onNodeRemoval(e,function(){var t=e.ownerDocument,a=t.contains?t:t.documentElement;a.contains(e)||l()}),r(canReflect_1_18_0_canReflect.getValue(t))};var viewInsertSymbol=canSymbol_1_6_5_canSymbol.for("can.viewInsert");function updateNodeList(e,t,a){if(!0!==e.nodeList.isUnregistered){var n=canReflect_1_18_0_canReflect.toArray(canChildNodes_1_2_1_canChildNodes(t));a||canViewNodelist_4_3_4_canViewNodelist.update(e.nodeList,n,e.oldNodes);var r=e.oldNodes;e.oldNodes=n,canViewNodelist_4_3_4_canViewNodelist.replace(r,t)}}core.html=function(e,t,a,n){function r(e){var t=canViewNodelist_4_3_4_canViewNodelist.first(l).parentNode;t&&o(e,!0);var a=canViewNodelist_4_3_4_canViewNodelist.first(l).parentNode;s.teardownCheck(a)}var s,o,i,l,d;n!==void 0&&(Array.isArray(n)?i=n:(i=n.nodeList,d=n));var p={reasonLog:"live.html replace::"+canReflect_1_18_0_canReflect.getName(t)};a=core.getParentNode(e,a),s=core.listen(a,t,r),l=i||[e],o=function(e,t){e&&"function"==typeof e[viewInsertSymbol]&&(e=e[viewInsertSymbol](d));var a="function"==typeof e,n=canFragment_1_3_1_canFragment(a?"":e);if(core.addTextNodeIfNoChildren(n),!0===t){s.oldNodes=canViewNodelist_4_3_4_canViewNodelist.unregisterChildren(l,!0);var r=!1;a&&(e(n.firstChild),r=canViewNodelist_4_3_4_canViewNodelist.first(l)===n.firstChild),canQueues_1_3_1_canQueues.domUIQueue.enqueue(updateNodeList,null,[s,n,r],p)}else s.oldNodes=canViewNodelist_4_3_4_canViewNodelist.update(l,canChildNodes_1_2_1_canChildNodes(n)),a&&e(n.firstChild),canViewNodelist_4_3_4_canViewNodelist.replace(s.oldNodes,n)},s.nodeList=l,i?i.unregistered=s.teardownCheck:canViewNodelist_4_3_4_canViewNodelist.register(l,s.teardownCheck),o(canReflect_1_18_0_canReflect.getValue(t))};function SetObservable(e,t){this.setter=t,canSimpleObservable_2_5_0_canSimpleObservable.call(this,e)}SetObservable.prototype=Object.create(canSimpleObservable_2_5_0_canSimpleObservable.prototype),SetObservable.prototype.constructor=SetObservable,SetObservable.prototype.set=function(e){this.setter(e)},canReflect_1_18_0_canReflect.assignSymbols(SetObservable.prototype,{"can.setValue":SetObservable.prototype.set});var setObservable=SetObservable,onValueSymbol$3=canSymbol_1_6_5_canSymbol.for("can.onValue"),offValueSymbol$1=canSymbol_1_6_5_canSymbol.for("can.offValue"),onPatchesSymbol$1=canSymbol_1_6_5_canSymbol.for("can.onPatches"),offPatchesSymbol=canSymbol_1_6_5_canSymbol.for("can.offPatches"),Patcher=function(e,t){this.handlers=new canKeyTree_1_2_2_canKeyTree([Object,Array],{onFirst:this.setup.bind(this),onEmpty:this.teardown.bind(this)}),this.observableOrList=e,this.isObservableValue=canReflect_1_18_0_canReflect.isValueLike(this.observableOrList)||canReflect_1_18_0_canReflect.isObservableLike(this.observableOrList),this.priority=this.isObservableValue?canReflect_1_18_0_canReflect.getPriority(e):t||0,this.onList=this.onList.bind(this),this.onPatchesNotify=this.onPatchesNotify.bind(this),this.onPatchesDerive=this.onPatchesDerive.bind(this),this.patches=[]};Patcher.prototype={constructor:Patcher,setup:function(){this.observableOrList[onValueSymbol$3]?(canReflect_1_18_0_canReflect.onValue(this.observableOrList,this.onList,"notify"),this.setupList(canReflect_1_18_0_canReflect.getValue(this.observableOrList))):this.setupList(this.observableOrList)},teardown:function(){this.observableOrList[offValueSymbol$1]&&canReflect_1_18_0_canReflect.offValue(this.observableOrList,this.onList,"notify"),this.currentList&&this.currentList[offPatchesSymbol]&&this.currentList[offPatchesSymbol](this.onPatchesNotify,"notify")},setupList:function(e){this.currentList=e,e&&e[onPatchesSymbol$1]&&e[onPatchesSymbol$1](this.onPatchesNotify,"notify")},onList:function(e){var t=this.currentList||[];e=e||[],t[offPatchesSymbol]&&t[offPatchesSymbol](this.onPatchesNotify,"notify");var a=list(t,e);this.currentList=e,this.onPatchesNotify(a),e[onPatchesSymbol$1]&&e[onPatchesSymbol$1](this.onPatchesNotify,"notify")},onPatchesNotify:function(e){this.patches.push.apply(this.patches,e),canQueues_1_3_1_canQueues.deriveQueue.enqueue(this.onPatchesDerive,this,[],{priority:this.priority})},onPatchesDerive:function(){var e=this.patches;this.patches=[],canQueues_1_3_1_canQueues.enqueueByQueue(this.handlers.getNode([]),this.currentList,[e,this.currentList],null,["Apply patches",e])}},canReflect_1_18_0_canReflect.assignSymbols(Patcher.prototype,{"can.onPatches":function(e,t){this.handlers.add([t||"mutate",e])},"can.offPatches":function(e,t){this.handlers.delete([t||"mutate",e])}});var patcher=Patcher,splice$2=[].splice,renderAndAddToNodeLists=function(e,t,a,n,r){var s=[];t&&(canViewNodelist_4_3_4_canViewNodelist.register(s,null,!0,!0),s.parentList=t,s.expression="#each SUBEXPRESSION");var o=a.apply(n,r.concat([s])),i=canFragment_1_3_1_canFragment(o),l=canReflect_1_18_0_canReflect.toArray(canChildNodes_1_2_1_canChildNodes(i));return t?(canViewNodelist_4_3_4_canViewNodelist.update(s,l),e.push(s)):e.push(canViewNodelist_4_3_4_canViewNodelist.register(l)),i},removeFromNodeList=function(e,t,a){var n=e.splice(t+1,a),r=[];return n.forEach(function(e){var t=canViewNodelist_4_3_4_canViewNodelist.unregister(e);[].push.apply(r,t)}),r},onPatchesSymbol$2=canSymbol_1_6_5_canSymbol.for("can.onPatches"),offPatchesSymbol$1=canSymbol_1_6_5_canSymbol.for("can.offPatches");function ListDOMPatcher(e,t,a,n,r,s,o){this.patcher=new patcher(t),r=core.getParentNode(e,r),this.value=t,this.render=a,this.context=n,this.parentNode=r,this.falseyRender=o,this.masterNodeList=s||canViewNodelist_4_3_4_canViewNodelist.register([e],null,!0),this.placeholder=e,this.indexMap=[],this.isValueLike=canReflect_1_18_0_canReflect.isValueLike(this.value),this.isObservableLike=canReflect_1_18_0_canReflect.isObservableLike(this.value),this.onPatches=this.onPatches.bind(this);var i=this.data=core.setup(r,this.setupValueBinding.bind(this),this.teardownValueBinding.bind(this));this.masterNodeList.unregistered=function(){i.teardownCheck()}}var onPatchesSymbol$2=canSymbol_1_6_5_canSymbol.for("can.onPatches"),offPatchesSymbol$1=canSymbol_1_6_5_canSymbol.for("can.offPatches");ListDOMPatcher.prototype={setupValueBinding:function(){this.patcher[onPatchesSymbol$2](this.onPatches,"domUI"),this.patcher.currentList&&this.patcher.currentList.length?this.onPatches([{insert:this.patcher.currentList,index:0,deleteCount:0}]):this.addFalseyIfEmpty()},teardownValueBinding:function(){this.patcher[offPatchesSymbol$1](this.onPatches,"domUI"),this.exit=!0,this.remove({length:this.patcher.currentList?this.patcher.currentList.length:0},0,!0)},onPatches:function(e){if(!this.exit)for(var t=0,a=e.length,n;t<a;t++)n=e[t],"move"===n.type?this.move(n.toIndex,n.fromIndex):(n.deleteCount&&this.remove({length:n.deleteCount},n.index,!0),n.insert&&n.insert.length&&this.add(n.insert,n.index))},add:function(e,t){var a=this.placeholder.ownerDocument.createDocumentFragment(),n=[],r=[],s=this.masterNodeList,o=this.render,l=this.context;e.forEach(function(e,i){var d=new canSimpleObservable_2_5_0_canSimpleObservable(i+t),p=new setObservable(e,function(e){canReflect_1_18_0_canReflect.setKeyValue(this.patcher.currentList,d.get(),e)}.bind(this)),c=renderAndAddToNodeLists(n,s,o,l,[p,d]);a.appendChild(c),r.push(d)},this);var d=t+1;if(!this.indexMap.length){var p=removeFromNodeList(s,0,s.length-1);canViewNodelist_4_3_4_canViewNodelist.remove(p)}if(!s[d])canViewNodelist_4_3_4_canViewNodelist.after(1===d?[this.placeholder]:[canViewNodelist_4_3_4_canViewNodelist.last(this.masterNodeList[d-1])],a);else{var c=canViewNodelist_4_3_4_canViewNodelist.first(s[d]);canDomMutate_1_3_11_node.insertBefore.call(c.parentNode,a,c)}splice$2.apply(this.masterNodeList,[d,0].concat(n)),splice$2.apply(this.indexMap,[t,0].concat(r));for(var u=t+r.length,y=this.indexMap.length;u<y;u++)this.indexMap[u].set(u)},remove:function(e,t){0>t&&(t=this.indexMap.length+t);var a=removeFromNodeList(this.masterNodeList,t,e.length),n=this.indexMap;n.splice(t,e.length);for(var r=t,s=n.length;r<s;r++)n[r].set(r);this.exit?canViewNodelist_4_3_4_canViewNodelist.unregister(this.masterNodeList):(this.addFalseyIfEmpty(),canViewNodelist_4_3_4_canViewNodelist.remove(a))},addFalseyIfEmpty:function(){if(this.falseyRender&&0===this.indexMap.length){var e=[],t=renderAndAddToNodeLists(e,this.masterNodeList,this.falseyRender,this.currentList,[this.currentList]);canViewNodelist_4_3_4_canViewNodelist.after([this.masterNodeList[0]],t),this.masterNodeList.push(e[0])}},move:function(e,t){++e,++t;var a=this.masterNodeList,n=this.indexMap,r=a[e],s=canFragment_1_3_1_canFragment(canViewNodelist_4_3_4_canViewNodelist.flatten(a[t])),o;o=t<e?canViewNodelist_4_3_4_canViewNodelist.last(r).nextSibling:canViewNodelist_4_3_4_canViewNodelist.first(r);var l=a[0].parentNode;l.insertBefore(s,o);var d=a[t];[].splice.apply(a,[t,1]),[].splice.apply(a,[e,0,d]),--e,--t;var p=n[t];[].splice.apply(n,[t,1]),[].splice.apply(n,[e,0,p]);var c=Math.min(t,e),u=n.length;for(u;c<u;c++)n[c].set(c)},set:function(e,t){this.remove({length:1},t,!0),this.add([e],t)}},core.list=function(e,t,a,n,r,s,o){if(e.nodeType!==Node.TEXT_NODE){var i;s?(i=document.createTextNode(""),canViewNodelist_4_3_4_canViewNodelist.replace(s,i),canViewNodelist_4_3_4_canViewNodelist.update(s,[i]),e=i):(i=document.createTextNode(""),e.parentNode.replaceChild(i,e),e=i)}new ListDOMPatcher(e,t,a,n,r,s,o)},core.text=function(e,t,a,n){function r(t){e.nodeValue=core.makeString(t)}if(e.nodeType!==Node.TEXT_NODE){var s;n?(s=document.createTextNode(""),canViewNodelist_4_3_4_canViewNodelist.replace(n,s),canViewNodelist_4_3_4_canViewNodelist.update(n,[s]),e=s):(s=document.createTextNode(""),e.parentNode.replaceChild(s,e),e=s)}var o=core.getParentNode(e,a);e.nodeValue=core.makeString(canReflect_1_18_0_canReflect.getValue(t));var i=core.listen(o,t,r,"domUI");n||(n=canViewNodelist_4_3_4_canViewNodelist.register([e],null,!0)),n.unregistered=i.teardownCheck,i.nodeList=n};var canViewLive_4_2_8_canViewLive=core,noop=function(){},TextSectionBuilder=function(e){e&&(this.filename=e),this.stack=[new TextSection]};canAssign_1_3_3_canAssign(TextSectionBuilder.prototype,utils$1.mixins),canAssign_1_3_3_canAssign(TextSectionBuilder.prototype,{startSection:function(e){var t=new TextSection;this.last().add({process:e,truthy:t}),this.stack.push(t)},endSection:function(){this.stack.pop()},inverse:function(){this.stack.pop();var e=new TextSection;this.last().last().falsey=e,this.stack.push(e)},compile:function(e){var t=this.stack[0].compile();return function(a){var n=new canObservation_4_2_0_canObservation(function(){return t(a)},null,{isObservable:!1});canReflect_1_18_0_canReflect.onValue(n,noop);var r=canReflect_1_18_0_canReflect.getValue(n);canReflect_1_18_0_canReflect.valueHasDependencies(n)?(e.textContentOnly?canViewLive_4_2_8_canViewLive.text(this,n):e.attr?canViewLive_4_2_8_canViewLive.attr(this,e.attr,n):canViewLive_4_2_8_canViewLive.attrs(this,n,a),canReflect_1_18_0_canReflect.offValue(n,noop)):e.textContentOnly?this.nodeValue=r:e.attr?canDomMutate_1_3_11_node.setAttribute.call(this,e.attr,r):canViewLive_4_2_8_canViewLive.attrs(this,r)}}});var passTruthyFalsey=function(e,t,a){return function(n){return e.call(this,n,t,a)}},TextSection=function(){this.values=[]};canAssign_1_3_3_canAssign(TextSection.prototype,{add:function(e){this.values.push(e)},last:function(){return this.values[this.values.length-1]},compile:function(){for(var e=this.values,t=e.length,a=0,n;a<t;a++)n=this.values[a],"object"==typeof n&&(e[a]=passTruthyFalsey(n.process,n.truthy&&n.truthy.compile(),n.falsey&&n.falsey.compile()));return function(a){for(var n="",r=0,s;r<t;r++)s=e[r],n+="string"==typeof s?s:s.call(this,a);return n}}});var text_section=TextSectionBuilder,Arg=function(e,t){this.expr=e,this.modifiers=t||{},this.isCompute=!1};Arg.prototype.value=function(){return this.expr.value.apply(this.expr,arguments)};var arg=Arg,Literal=function(e){this._value=e};Literal.prototype.value=function(){return this._value};var literal=Literal,setElementSymbol$1=canSymbol_1_6_5_canSymbol.for("can.setElement");function SetterObservable(e,t){this.setter=t,this.observation=new canObservation_4_2_0_canObservation(e),this.handler=this.handler.bind(this)}SetterObservable.prototype=Object.create(settable.prototype),SetterObservable.prototype.constructor=SetterObservable,SetterObservable.prototype.set=function(e){this.setter(e)},SetterObservable.prototype.hasDependencies=function(){return canReflect_1_18_0_canReflect.valueHasDependencies(this.observation)},canReflect_1_18_0_canReflect.assignSymbols(SetterObservable.prototype,{"can.setValue":SetterObservable.prototype.set,"can.valueHasDependencies":SetterObservable.prototype.hasDependencies,"can.setElement":function(e){this.observation[setElementSymbol$1](e)}});var setter=SetterObservable;function getObservableValue_fromDynamicKey_fromObservable(e,t){var a=function(){return canStacheKey_1_4_3_canStacheKey.reads((""+canReflect_1_18_0_canReflect.getValue(e)).replace(/\./g,"\\."))},n=new setter(function(){var e=canStacheKey_1_4_3_canStacheKey.read(canReflect_1_18_0_canReflect.getValue(t),a());return r=e.parentHasKey,e.value},function(e){canStacheKey_1_4_3_canStacheKey.write(canReflect_1_18_0_canReflect.getValue(t),a(),e)}),r;return canObservation_4_2_0_canObservation.temporarilyBind(n),n.initialValue=canObservationRecorder_1_3_1_canObservationRecorder.peekValue(n),n.parentHasKey=r,n}function convertToArgExpression(e){return e instanceof arg||e instanceof literal?e:new arg(e)}function toComputeOrValue(e){return canReflect_1_18_0_canReflect.isObservableLike(e)?canReflect_1_18_0_canReflect.isValueLike(e)&&!1===canReflect_1_18_0_canReflect.valueHasDependencies(e)?canReflect_1_18_0_canReflect.getValue(e):e.compute?e.compute:canViewScope_4_13_6_makeComputeLike(e):e}function toCompute(e){return e?e.isComputed?e:e.compute?e.compute:canViewScope_4_13_6_makeComputeLike(e):e}var expressionHelpers={getObservableValue_fromDynamicKey_fromObservable:getObservableValue_fromDynamicKey_fromObservable,convertToArgExpression:convertToArgExpression,toComputeOrValue:toComputeOrValue,toCompute:toCompute},Hashes=function(e){this.hashExprs=e};Hashes.prototype.value=function(){var e={};for(var t in this.hashExprs){var a=expressionHelpers.convertToArgExpression(this.hashExprs[t]),n=a.value.apply(a,arguments);e[t]={call:!a.modifiers||!a.modifiers.compute,value:n}}return new canObservation_4_2_0_canObservation(function(){var t={};for(var a in e)t[a]=e[a].call?canReflect_1_18_0_canReflect.getValue(e[a].value):expressionHelpers.toComputeOrValue(e[a].value);return t})};var hashes=Hashes,Bracket=function(e,t){this.root=t,this.key=e};Bracket.prototype.value=function(e,t){var a=this.root?this.root.value(e,t):e.peek("this");return expressionHelpers.getObservableValue_fromDynamicKey_fromObservable(this.key.value(e,t),a,e,t,{})},Bracket.prototype.closingTag=function(){};var bracket=Bracket,setIdentifier=function(e){this.value=e},sourceTextSymbol=canSymbol_1_6_5_canSymbol.for("can-stache.sourceText"),isViewSymbol$1=canSymbol_1_6_5_canSymbol.for("can.isView"),Call=function(e,t){this.methodExpr=e,this.argExprs=t.map(expressionHelpers.convertToArgExpression)};Call.prototype.args=function(e,t){for(var a={},n=[],r=0,s=this.argExprs.length,o;r<s;r++)if(o=this.argExprs[r],o.expr instanceof hashes&&canAssign_1_3_3_canAssign(a,o.expr.hashExprs),!("function"==typeof t)||!t(r)){var l=o.value.apply(o,arguments);n.push({call:!o.modifiers||!o.modifiers.compute,value:l})}return function(e){var t=[];0<canReflect_1_18_0_canReflect.size(a)&&(t.hashExprs=a);for(var r=0,s=n.length;r<s;r++)t[r]=e?n[r].value:n[r].call?canReflect_1_18_0_canReflect.getValue(n[r].value):expressionHelpers.toCompute(n[r].value);return t}},Call.prototype.value=function(e,t){var a=this,n=this.methodExpr.value(e,{proxyMethods:!1});canObservation_4_2_0_canObservation.temporarilyBind(n);var r=canReflect_1_18_0_canReflect.getValue(n),s=a.args(e,r&&r.ignoreArgLookup),o=function(a){var r=canReflect_1_18_0_canReflect.getValue(n);if("function"==typeof r){canReflect_1_18_0_canReflect.isObservableLike(r)&&(r=canReflect_1_18_0_canReflect.getValue(r));var o=s(r.isLiveBound);return r.requiresOptionsArgument&&(o.hashExprs&&t&&t.exprData&&(t.exprData.hashExprs=o.hashExprs),void 0!==t&&o.push(t)),!0===r[isViewSymbol$1]&&(!(o[0]instanceof canViewScope_4_13_6_canViewScope)&&(o[0]=e.getTemplateContext().add(o[0])),o.push(t.nodeList)),arguments.length&&o.unshift(new setIdentifier(a)),r.apply(n.thisArg||e.peek("this"),o)}};if(t&&t.doNotWrapInObservation)return o();var i=new setter(o,o);return i},Call.prototype.closingTag=function(){return this.methodExpr.key};var call$1=Call,Helper=function(e,t,a){this.methodExpr=e,this.argExprs=t,this.hashExprs=a,this.mode=null};Helper.prototype.args=function(){for(var e=[],t=0,a=this.argExprs.length,n;t<a;t++)n=this.argExprs[t],e.push(expressionHelpers.toComputeOrValue(n.value.apply(n,arguments)));return e},Helper.prototype.hash=function(){var e={};for(var t in this.hashExprs){var a=this.hashExprs[t];e[t]=expressionHelpers.toComputeOrValue(a.value.apply(a,arguments))}return e},Helper.prototype.value=function(e,t){var a=this.methodExpr instanceof literal?""+this.methodExpr._value:this.methodExpr.key,n=this,r=e.computeData(a,{proxyMethods:!1}),s=r&&r.initialValue,o=r&&r.thisArg;return"function"==typeof s&&(r=function(){var a=n.args(e),r=canAssign_1_3_3_canAssign(canAssign_1_3_3_canAssign({},t),{hash:n.hash(e),exprData:n});return a.push(r),s.apply(o||e.peek("this"),a)}),r},Helper.prototype.closingTag=function(){return this.methodExpr.key};var helper=Helper,sourceTextSymbol$1=canSymbol_1_6_5_canSymbol.for("can-stache.sourceText"),Lookup=function(e,t,a){this.key=e,this.rootExpr=t,canReflect_1_18_0_canReflect.setKeyValue(this,sourceTextSymbol$1,a)};Lookup.prototype.value=function(e,t){return this.rootExpr?expressionHelpers.getObservableValue_fromDynamicKey_fromObservable(this.key,this.rootExpr.value(e),e,{},{}):e.computeData(this.key,canAssign_1_3_3_canAssign({warnOnMissingKey:!0},t))};var lookup=Lookup,last$1=utils$1.last,sourceTextSymbol$2=canSymbol_1_6_5_canSymbol.for("can-stache.sourceText"),Hash=function(){},keyRegExp=/[\w\.\\\-_@\/\&%]+/,tokensRegExp=/('.*?'|".*?"|=|[\w\.\\\-_@\/*%\$]+|[\(\)]|,|\~|\[|\]\s*|\s*(?=\[))/g,bracketSpaceRegExp=/\]\s+/,literalRegExp=/^('.*?'|".*?"|-?[0-9]+\.?[0-9]*|true|false|null|undefined)$/,isTokenKey=function(e){return keyRegExp.test(e)},testDot=/^[\.@]\w/,isAddingToExpression=function(e){return isTokenKey(e)&&testDot.test(e)},ensureChildren=function(e){return e.children||(e.children=[]),e},Stack=function(){this.root={children:[],type:"Root"},this.current=this.root,this.stack=[this.root]};canAssign_1_3_3_canAssign(Stack.prototype,{top:function(){return last$1(this.stack)},isRootTop:function(){return this.top()===this.root},popTo:function(e){this.popUntil(e),this.pop()},pop:function(){this.isRootTop()||this.stack.pop()},first:function(e){for(var t=this.stack.length-1;0<t&&-1===e.indexOf(this.stack[t].type);)t--;return this.stack[t]},firstParent:function(e){for(var t=this.stack.length-2;0<t&&-1===e.indexOf(this.stack[t].type);)t--;return this.stack[t]},popUntil:function(e){for(;-1===e.indexOf(this.top().type)&&!this.isRootTop();)this.stack.pop();return this.top()},addTo:function(e,t){var a=this.popUntil(e);ensureChildren(a).children.push(t)},addToAndPush:function(e,t){this.addTo(e,t),this.stack.push(t)},push:function(e){this.stack.push(e)},topLastChild:function(){return last$1(this.top().children)},replaceTopLastChild:function(e){var t=ensureChildren(this.top()).children;return t.pop(),t.push(e),e},replaceTopLastChildAndPush:function(e){this.replaceTopLastChild(e),this.stack.push(e)},replaceTopAndPush:function(e){var t;return this.top()===this.root?t=ensureChildren(this.top()).children:(this.stack.pop(),t=ensureChildren(this.top()).children),t.pop(),t.push(e),this.stack.push(e),e}});var convertKeyToLookup=function(e){var t=e.lastIndexOf("./"),a=e.lastIndexOf(".");if(a>t)return e.substr(0,a)+"@"+e.substr(a+1);var n=-1===t?0:t+2,r=e.charAt(n);return"."===r||"@"===r?e.substr(0,n)+"@"+e.substr(n+1):e.substr(0,n)+"@"+e.substr(n)},convertToAtLookup=function(e){return"Lookup"===e.type&&(canReflect_1_18_0_canReflect.setKeyValue(e,sourceTextSymbol$2,e.key),e.key=convertKeyToLookup(e.key)),e},convertToHelperIfTopIsLookup=function(e){var t=e.top();if(t&&"Lookup"===t.type){var a=e.stack[e.stack.length-2];"Helper"!==a.type&&a&&e.replaceTopAndPush({type:"Helper",method:t})}},expression={toComputeOrValue:expressionHelpers.toComputeOrValue,convertKeyToLookup:convertKeyToLookup,Literal:literal,Lookup:lookup,Arg:arg,Hash:Hash,Hashes:hashes,Call:call$1,Helper:helper,Bracket:bracket,SetIdentifier:setIdentifier,tokenize:function(e){var t=[];return(e.trim()+" ").replace(tokensRegExp,function(e,a){bracketSpaceRegExp.test(a)?(t.push(a[0]),t.push(a.slice(1))):t.push(a)}),t},lookupRules:{default:function(e){return"Helper"===e.type?helper:lookup},method:function(){return lookup}},methodRules:{default:function(e){return"Call"===e.type?call$1:helper},call:function(){return call$1}},parse:function(e,t){t=t||{};var a=this.ast(e);t.lookupRule||(t.lookupRule="default"),"string"==typeof t.lookupRule&&(t.lookupRule=expression.lookupRules[t.lookupRule]),t.methodRule||(t.methodRule="default"),"string"==typeof t.methodRule&&(t.methodRule=expression.methodRules[t.methodRule]);var n=this.hydrateAst(a,t,t.baseMethodType||"Helper");return n},hydrateAst:function(e,t,a,n){var r;if("Lookup"===e.type){var s=t.lookupRule(e,a,n),o=new s(e.key,e.root&&this.hydrateAst(e.root,t,a),e[sourceTextSymbol$2]);return o}if("Literal"===e.type)return new literal(e.value);if("Arg"===e.type)return new arg(this.hydrateAst(e.children[0],t,a,n),{compute:!0});if("Hash"===e.type)throw new Error("");else{if("Hashes"===e.type)return r={},e.children.forEach(function(e){r[e.prop]=this.hydrateAst(e.children[0],t,a,!0)},this),new hashes(r);if("Call"===e.type||"Helper"===e.type){r={};var l=[],d=e.children,p=t.methodRule(e);if(d)for(var c=0,u;c<d.length;c++)u=d[c],"Hashes"===u.type&&"Helper"===e.type&&p!==call$1?u.children.forEach(function(a){r[a.prop]=this.hydrateAst(a.children[0],t,e.type,!0)},this):l.push(this.hydrateAst(u,t,e.type,!0));return new p(this.hydrateAst(e.method,t,e.type),l,r)}if("Bracket"===e.type){var y;return new bracket(this.hydrateAst(e.children[0],t),e.root?this.hydrateAst(e.root,t):void 0,y)}}},ast:function(e){var t=this.tokenize(e);return this.parseAst(t,{index:0})},parseAst:function(e,t){for(var a=new Stack,n,r,s;t.index<e.length;){var o=e[t.index],i=e[t.index+1];if(t.index++,"="===i){n=a.top(),n&&"Lookup"===n.type&&(r=a.firstParent(["Call","Helper","Hash"]),("Call"===r.type||"Root"===r.type)&&(a.popUntil(["Call"]),n=a.top(),a.replaceTopAndPush({type:"Helper",method:"Root"===n.type?last$1(n.children):n}))),r=a.first(["Call","Helper","Hashes","Root"]);var l={type:"Hash",prop:o};"Hashes"===r.type?a.addToAndPush(["Hashes"],l):(a.addToAndPush(["Helper","Call","Root"],{type:"Hashes",children:[l]}),a.push(l)),t.index++}else if(literalRegExp.test(o))convertToHelperIfTopIsLookup(a),r=a.first(["Helper","Call","Hash","Bracket"]),"Hash"===r.type&&r.children&&0<r.children.length?a.addTo(["Helper","Call","Bracket"],{type:"Literal",value:utils$1.jsonParse(o)}):"Bracket"===r.type&&r.children&&0<r.children.length?a.addTo(["Helper","Call","Hash"],{type:"Literal",value:utils$1.jsonParse(o)}):a.addTo(["Helper","Call","Hash","Bracket"],{type:"Literal",value:utils$1.jsonParse(o)});else if(keyRegExp.test(o))s=a.topLastChild(),r=a.first(["Helper","Call","Hash","Bracket"]),s&&("Call"===s.type||"Bracket"===s.type)&&isAddingToExpression(o)?a.replaceTopLastChildAndPush({type:"Lookup",root:s,key:o.slice(1)}):"Bracket"===r.type?r.children&&0<r.children.length?"Helper"===a.first(["Helper","Call","Hash","Arg"]).type&&"."!==o[0]?a.addToAndPush(["Helper"],{type:"Lookup",key:o}):a.replaceTopAndPush({type:"Lookup",key:o.slice(1),root:r}):a.addToAndPush(["Bracket"],{type:"Lookup",key:o}):(convertToHelperIfTopIsLookup(a),a.addToAndPush(["Helper","Call","Hash","Arg","Bracket"],{type:"Lookup",key:o}));else if("~"===o)convertToHelperIfTopIsLookup(a),a.addToAndPush(["Helper","Call","Hash"],{type:"Arg",key:o});else if("("===o){if(n=a.top(),s=a.topLastChild(),"Lookup"===n.type)a.replaceTopAndPush({type:"Call",method:convertToAtLookup(n)});else if(s&&"Call"===s.type)a.replaceTopAndPush({type:"Call",method:s});else throw new Error("Unable to understand expression "+e.join(""));}else if(")"===o)a.popTo(["Call"]);else if(","===o){var d=a.first(["Call"]);"Call"===d.type?a.popUntil(["Call"]):a.popUntil(["Hash"])}else if("["!==o)"]"===o?a.pop():" "===o&&a.push(o);else if(n=a.top(),s=a.topLastChild(),s&&("Call"===s.type||"Bracket"===s.type))a.replaceTopLastChildAndPush({type:"Bracket",root:s});else if("Lookup"===n.type||"Bracket"===n.type){var p={type:"Bracket",root:n};a.replaceTopAndPush(p)}else"Call"===n.type?a.addToAndPush(["Call"],{type:"Bracket"}):" "===n?(a.popUntil(["Lookup","Call"]),convertToHelperIfTopIsLookup(a),a.addToAndPush(["Helper","Call","Hash"],{type:"Bracket"})):a.replaceTopAndPush({type:"Bracket"})}return a.root.children[0]}},expression_1=expression,expression$1=expression_1,toDOMSymbol$1=canSymbol_1_6_5_canSymbol.for("can.toDOM");function HelperOptions(e,t,a,n){this.metadata={rendered:!1},this.stringOnly=n,this.scope=e,this.nodeList=t,this.exprData=a}canDefineLazyValue_1_1_1_defineLazyValue(HelperOptions.prototype,"context",function(){return this.scope.peek("this")});var mustacheLineBreakRegExp=/(?:(^|\r?\n)(\s*)(\{\{([\s\S]*)\}\}\}?)([^\S\n\r]*)($|\r?\n))|(\{\{([\s\S]*)\}\}\}?)/g,mustacheWhitespaceRegExp=/\s*\{\{--\}\}\s*|\s*(\{\{\{?)-|-(\}\}\}?)\s*/g,k=function(){},viewInsertSymbol$1=canSymbol_1_6_5_canSymbol.for("can.viewInsert");function valueShouldBeInsertedAsHTML(e){return null!==e&&"object"==typeof e&&("function"==typeof e[toDOMSymbol$1]||"function"==typeof e[viewInsertSymbol$1]||"number"==typeof e.nodeType)}var core$1={expression:expression$1,makeEvaluator:function(e,t,a,n,r,s,o){if("^"===a){var i=r;r=s,s=i}var l=new HelperOptions(e,t,n,o),d;if(utils$1.createRenderers(l,e,t,r,s,o),n instanceof expression$1.Call)d=n.value(e,l);else if(n instanceof expression$1.Bracket)d=n.value(e);else if(n instanceof expression$1.Lookup)d=n.value(e);else if(n instanceof expression$1.Literal)d=n.value.bind(n);else if(n instanceof expression$1.Helper&&n.methodExpr instanceof expression$1.Bracket)d=n.methodExpr.value(e,l);else if(d=n.value(e,l),"function"==typeof d)return d;return!a||l.metadata.rendered?d:"#"===a||"^"===a?function(){var t=canReflect_1_18_0_canReflect.getValue(d),a;if(l.metadata.rendered)a=t;else if("string"!=typeof t&&canReflect_1_18_0_canReflect.isListLike(t)){var n=canReflect_1_18_0_canReflect.isObservableLike(t)&&canReflect_1_18_0_canReflect.isListLike(t);a=canReflect_1_18_0_canReflect.getKeyValue(t,"length")?o?utils$1.getItemsStringContent(t,n,l):canFragment_1_3_1_canFragment(utils$1.getItemsFragContent(t,l,e)):l.inverse(e)}else a=t?l.fn(t||e):l.inverse(e);return l.metadata.rendered=!1,a}:void 0},makeLiveBindingPartialRenderer:function(e,t){e=e.trim();var a=e.split(/\s+/).shift(),n;return a!==e&&(n=core$1.expression.parse(e)),function(e,r){var s=[this];s.expression=">"+a,canViewNodelist_4_3_4_canViewNodelist.register(s,null,r||!0,t.directlyNested);var o=new canObservation_4_2_0_canObservation(function(){var t=a,r=e;if(n&&1===n.argExprs.length){var o=canReflect_1_18_0_canReflect.getValue(n.argExprs[0].value(e));"undefined"==typeof o||(r=e.add(o))}var i=canReflect_1_18_0_canReflect.getKeyValue(r.templateContext.partials,t),l;if(i)l=function(){return i.render?i.render(r,s):i(r)};else{var d=r.read(t,{isArgument:!0}).value;if(null===d||!d&&"*"===t[0])return canFragment_1_3_1_canFragment("");d&&(t=d),l=function(){if("function"==typeof t)return t(r,{},s);var e=core$1.getTemplateById(t);return e?e(r,{},s):document$1().createDocumentFragment()}}var p=canObservationRecorder_1_3_1_canObservationRecorder.ignore(l)();return canFragment_1_3_1_canFragment(p)});canReflect_1_18_0_canReflect.setPriority(o,s.nesting),canViewLive_4_2_8_canViewLive.html(this,o,this.parentNode,s)}},makeStringBranchRenderer:function(e,t){var a=core$1.expression.parse(t),n=e+t,r=function(t,r,s){var o=t.__cache[n];(e||!o)&&(o=makeEvaluator(t,null,e,a,r,s,!0),!e&&(t.__cache[n]=o));var i=o[canSymbol_1_6_5_canSymbol.for("can.onValue")],l;return l=i?canReflect_1_18_0_canReflect.getValue(o):o(),null==l?"":11===l.nodeType?l.textContent:""+l};return r.exprData=a,r},makeLiveBindingBranchRenderer:function(e,t,a){var n=core$1.expression.parse(t),r=function(r,s,o,i){var l=a.tag,d=[this];d.expression=t,canViewNodelist_4_3_4_canViewNodelist.register(d,null,s||!0,a.directlyNested);var p=makeEvaluator(r,d,e,n,o,i,l),c=p[canSymbol_1_6_5_canSymbol.for("can.onValue")],u;if(u=c?p:new canObservation_4_2_0_canObservation(p,null,{isObservable:!1}),!1===canReflect_1_18_0_canReflect.setPriority(u,d.nesting))throw new Error("can-stache unable to set priority on observable");canReflect_1_18_0_canReflect.onValue(u,k);var y=canReflect_1_18_0_canReflect.getValue(u);if("function"==typeof y&&!(n instanceof expression$1.Lookup))canObservationRecorder_1_3_1_canObservationRecorder.ignore(y)(this);else if(canReflect_1_18_0_canReflect.valueHasDependencies(u))a.attr?canViewLive_4_2_8_canViewLive.attr(this,a.attr,u):a.tag?canViewLive_4_2_8_canViewLive.attrs(this,u):a.text&&!valueShouldBeInsertedAsHTML(y)?canViewLive_4_2_8_canViewLive.text(this,u,this.parentNode,d):canViewLive_4_2_8_canViewLive.html(this,u,this.parentNode,{nodeList:d});else if(a.attr)canDomMutate_1_3_11_canDomMutate.setAttribute(this,a.attr,y);else if(a.tag)canViewLive_4_2_8_canViewLive.attrs(this,y);else if(a.text&&!valueShouldBeInsertedAsHTML(y))this.nodeValue=canViewLive_4_2_8_canViewLive.makeString(y);else if(null!=y)if("function"==typeof y[viewInsertSymbol$1]){var h=y[viewInsertSymbol$1]({nodeList:d}),g=canViewNodelist_4_3_4_canViewNodelist.update(d,[h]);canViewNodelist_4_3_4_canViewNodelist.replace(g,h)}else canViewNodelist_4_3_4_canViewNodelist.replace([this],canFragment_1_3_1_canFragment(y,this.ownerDocument));canReflect_1_18_0_canReflect.offValue(u,k)};return r.exprData=n,r},splitModeFromExpression:function(e,t){e=e.trim();var a=e.charAt(0);return 0<="#/{&^>!<".indexOf(a)?e=e.substr(1).trim():a=null,"{"===a&&t.node&&(a=null),{mode:a,expression:e}},cleanLineEndings:function(e){return e.replace(mustacheLineBreakRegExp,function(e,t,a,n,r,s,o,i,l,d){s=s||"",t=t||"",a=a||"";var p=splitModeFromExpression(r||l,{});return i||0<=">{".indexOf(p.mode)?e:0<="^#!/".indexOf(p.mode)?(a=t+a&&" ",a+n+(0!==d&&o.length?t+"\n":"")):a+n+s+(a.length||0!==d?t+"\n":"")})},cleanWhitespaceControl:function(e){return e.replace(mustacheWhitespaceRegExp,"$1$2")},getTemplateById:function(){}},makeEvaluator=core$1.makeEvaluator,splitModeFromExpression=core$1.splitModeFromExpression,mustache_core=core$1;canGlobals_1_2_2_canGlobalsInstance.define("base-url",function(){var e=canGlobals_1_2_2_canGlobalsInstance.getKeyValue("global"),t=canGlobals_1_2_2_canGlobalsInstance.getKeyValue("document");if(t&&"baseURI"in t)return t.baseURI;if(e.location){var a=e.location.href,n=a.lastIndexOf("/");return-1===n?a:a.substr(0,n)}return"undefined"==typeof process?void 0:process.cwd()});var baseUrl=canGlobals_1_2_2_canGlobalsInstance.makeExport("base-url"),canParseUri_1_2_2_canParseUri=canNamespace_1_0_0_canNamespace.parseURI=function(e){var t=(e+"").replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null},canJoinUris_1_2_0_canJoinUris=canNamespace_1_0_0_canNamespace.joinURIs=function(e,t){return t=canParseUri_1_2_2_canParseUri(t||""),e=canParseUri_1_2_2_canParseUri(e||""),t&&e?(t.protocol||e.protocol)+(t.protocol||t.authority?t.authority:e.authority)+function(e){var t=[];return e.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){"/.."===e?t.pop():t.push(e)}),t.join("").replace(/^\//,"/"===e.charAt(0)?"/":"")}(t.protocol||t.authority||"/"===t.pathname.charAt(0)?t.pathname:t.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+t.pathname:e.pathname)+(t.protocol||t.authority||t.pathname?t.search:t.search||e.search)+t.hash:null};function noop$1(){}var resolveValue=noop$1,evaluateArgs=noop$1,__testing={};function debuggerHelper(){canLog_1_0_2_canLog.warn("Forgotten {{debugger}} helper")}debuggerHelper.requiresOptionsArgument=!0;var Debugger={helper:debuggerHelper,evaluateArgs:evaluateArgs,resolveValue:resolveValue,__testing:__testing},truthyObservable=function(e){return new canObservation_4_2_0_canObservation(function(){var t=canReflect_1_18_0_canReflect.getValue(e);return!!t})};function makeConverter(e){return e=e||{},function(t,a){var n=canReflect_1_18_0_canReflect.toArray(arguments);return t instanceof setIdentifier?"function"==typeof e.set?e.set.apply(this,[t.value].concat(n.slice(1))):a(t.value):"function"==typeof e.get?e.get.apply(this,n):n[0]}}var converter=makeConverter,bindAndRead=function(e){return e&&canReflect_1_18_0_canReflect.isValueLike(e)?(canObservation_4_2_0_canObservation.temporarilyBind(e),canReflect_1_18_0_canReflect.getValue(e)):e};function forOfObject(e,t,a){var n=[];return canReflect_1_18_0_canReflect.each(e,function(r,s){var o=new keyObservable(e,s.replace(/\./g,"\\.")),i={};void 0!==t&&(i[t]=o),n.push(a.fn(a.scope.add({key:s},{special:!0}).addLetContext(i)))}),a.stringOnly?n.join(""):n}var forHelper=function(e){if(1!==e.exprData.argExprs.length)throw new Error("for(of) broken syntax");var t=e.exprData.argExprs[0].expr,a,n,r;if(t instanceof expression_1.Lookup)r=t.value(e.scope);else if(t instanceof expression_1.Helper){var s=t.argExprs[0];if("of"!==s.key)throw new Error("for(of) broken syntax");a=t.methodExpr.key,n=t.argExprs[1],r=n.value(e.scope)}var o=r,i=[].slice.call(arguments),l=i.pop(),d=bindAndRead(o);if(d&&!canReflect_1_18_0_canReflect.isListLike(d))return forOfObject(d,a,e);if(l.stringOnly){var p=[];return canReflect_1_18_0_canReflect.eachIndex(d,function(t,n){var r={};void 0!==a&&(r[a]=t),p.push(e.fn(l.scope.add({index:n},{special:!0}).addLetContext(r)))}),p.join("")}return l.metadata.rendered=!0,function(e){var t=[e];t.expression="live.list",canViewNodelist_4_3_4_canViewNodelist.register(t,null,l.nodeList,!0),canViewNodelist_4_3_4_canViewNodelist.update(l.nodeList,[e]);var n=function(e,t,n){var r={};return void 0!==a&&(r[a]=e),l.fn(l.scope.add({index:t},{special:!0}).addLetContext(r),l.options,n)};canViewLive_4_2_8_canViewLive.list(e,o,n,l.context,e.parentNode,t,function(e,t){return l.inverse(l.scope,l.options,t)})}};forHelper.isLiveBound=!0,forHelper.requiresOptionsArgument=!0,forHelper.ignoreArgLookup=function(e){return 0===e};var ForOf=forHelper;function isVariable(e){return!0===e._meta.variable}var letHelper=canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(e){if(e.isSection)return e.fn(e.scope.addLetContext(e.hash));var t=e.scope.getScope(isVariable);if(!t)throw new Error("There is no variable scope!");return canReflect_1_18_0_canReflect.assignMap(t._context,e.hash),document.createTextNode("")}),Let=letHelper,keepNodeSymbol=canSymbol_1_6_5_canSymbol.for("done.keepNode");function portalHelper(e,t){function a(){for(var e=t.fn(t.scope.addLetContext({}),t.options),a=e.firstChild;a;)a[keepNodeSymbol]=!0,a=a.nextSibling;return e}function n(){var t=s;i&&(i(),i=null),s&&(canReflect_1_18_0_canReflect.offValue(e,r),s=null),o&&(canReflect_1_18_0_canReflect.eachListLike(o,function(e){t===e.parentNode&&canDomMutate_1_3_11_node.removeChild.call(t,e)}),o=null)}function r(){if(n(),s=canReflect_1_18_0_canReflect.getValue(e),s){var l=document$1().createTextNode("");canDomMutate_1_3_11_node.appendChild.call(s,l),o=[l],o.expression="live.html",canViewNodelist_4_3_4_canViewNodelist.register(o,null,null,!0);var d=new canObservation_4_2_0_canObservation(a,null,{isObservable:!1});canViewLive_4_2_8_canViewLive.html(l,d,s,o),i=canDomMutate_1_3_11_canDomMutate.onNodeRemoval(s,n)}else t.metadata.rendered=!0;canReflect_1_18_0_canReflect.onValue(e,r)}var s,o,i;return r(),function(a){var r=document$1(),s=r.createComment("portal("+canReflect_1_18_0_canReflect.getName(e)+")"),o=r.createDocumentFragment();canDomMutate_1_3_11_node.appendChild.call(o,s),canViewNodelist_4_3_4_canViewNodelist.replace([a],o);var i=[s];i.expression="portal",canViewNodelist_4_3_4_canViewNodelist.register(i,n,t.nodeList,!0),canViewNodelist_4_3_4_canViewNodelist.update(t.nodeList,[s])}}portalHelper.isLiveBound=!0,portalHelper.requiresOptionsArgument=!0;var Portal=portalHelper,debuggerHelper$1=Debugger.helper,builtInHelpers={},builtInConverters={},converterPackages=new WeakMap,helpersCore={looksLikeOptions:function(e){return e&&"function"==typeof e.fn&&"function"==typeof e.inverse},resolve:function(e){return e&&canReflect_1_18_0_canReflect.isValueLike(e)?canReflect_1_18_0_canReflect.getValue(e):e},resolveHash:function(e){var t={};for(var a in e)t[a]=helpersCore.resolve(e[a]);return t},bindAndRead:function(e){return e&&canReflect_1_18_0_canReflect.isValueLike(e)?(canObservation_4_2_0_canObservation.temporarilyBind(e),canReflect_1_18_0_canReflect.getValue(e)):e},registerHelper:function(e,t){t.requiresOptionsArgument=!0,canStacheHelpers_1_2_0_canStacheHelpers[e]=t},registerHelpers:function(e){var t,a;for(t in e)a=e[t],helpersCore.registerHelper(t,helpersCore.makeSimpleHelper(a))},registerConverter:function(e,t){helpersCore.registerHelper(e,converter(t))},makeSimpleHelper:function(e){return function(){var t=[];return canReflect_1_18_0_canReflect.eachIndex(arguments,function(e){t.push(helpersCore.resolve(e))}),e.apply(this,t)}},addHelper:function(e,t){return"object"==typeof e?helpersCore.registerHelpers(e):helpersCore.registerHelper(e,helpersCore.makeSimpleHelper(t))},addConverter:function(e,t){if("object"==typeof e)return void(converterPackages.has(e)||(converterPackages.set(e,!0),canReflect_1_18_0_canReflect.eachKey(e,function(e,t){helpersCore.addConverter(t,e)})));var a=converter(t);a.isLiveBound=!0,helpersCore.registerHelper(e,a)},addLiveHelper:function(e,t){return t.isLiveBound=!0,helpersCore.registerHelper(e,t)},getHelper:function(e,t){var a=t&&t.getHelper(e);return a||(a=canStacheHelpers_1_2_0_canStacheHelpers[e]),a},__resetHelpers:function(){for(var e in canStacheHelpers_1_2_0_canStacheHelpers)delete canStacheHelpers_1_2_0_canStacheHelpers[e];converterPackages.delete(builtInConverters),helpersCore.addBuiltInHelpers(),helpersCore.addBuiltInConverters()},addBuiltInHelpers:function(){canReflect_1_18_0_canReflect.each(builtInHelpers,function(e,t){canStacheHelpers_1_2_0_canStacheHelpers[t]=e})},addBuiltInConverters:function(){helpersCore.addConverter(builtInConverters)},_makeLogicHelper:function(e,t){var a=canAssign_1_3_3_canAssign(function(){function e(){return n?!!t(a):t(a)}var a=Array.prototype.slice.call(arguments,0),n;helpersCore.looksLikeOptions(a[a.length-1])&&(n=a.pop());var r=new canObservation_4_2_0_canObservation(e);return n?r.get()?n.fn():n.inverse():r.get()},{requiresOptionsArgument:!0,isLiveBound:!0});return a}},ifHelper=canAssign_1_3_3_canAssign(function(e,t){var a;return a=e&&canReflect_1_18_0_canReflect.isValueLike(e)?canReflect_1_18_0_canReflect.getValue(new truthyObservable(e)):!!helpersCore.resolve(e),t?a?t.fn(t.scope||this):t.inverse(t.scope||this):!!a},{requiresOptionsArgument:!0,isLiveBound:!0}),isHelper=helpersCore._makeLogicHelper("eq",function(e){for(var t=0,a,n;t<e.length;t++){if(a=helpersCore.resolve(e[t]),a="function"==typeof a?a():a,0<t&&a!==n)return!1;n=a}return!0}),andHelper=helpersCore._makeLogicHelper("and",function(e){if(0===e.length)return!1;for(var t=0,a=e.length,n;t<a;t++)if(n=helpersCore.resolve(e[t]),!n)return n;return n}),orHelper=helpersCore._makeLogicHelper("or",function(e){if(0===e.length)return!1;for(var t=0,a=e.length,n;t<a;t++)if(n=helpersCore.resolve(e[t]),n)return n;return n}),switchHelper=function(e,t){helpersCore.resolve(e);var a=!1,n=function(t,n){if(!a&&helpersCore.resolve(e)===helpersCore.resolve(t))return a=!0,n.fn(n.scope)};n.requiresOptionsArgument=!0;var r=function(e){if(!a)return!e||e.scope.peek("this")};r.requiresOptionsArgument=!0,canReflect_1_18_0_canReflect.assignSymbols(r,{"can.isValueLike":!0,"can.isFunctionLike":!1,"can.getValue":function(){return this(t)}});var s=t.scope.add({case:n,default:r},{notContext:!0});return t.fn(s,t)};switchHelper.requiresOptionsArgument=!0;var domDataHelper=function(e,t){var a=(helpersCore.looksLikeOptions(t)?t.context:t)||this;return function(t){canDomData_1_0_3_canDomData.set(t,e,a)}},joinBaseHelper=function(){var e=[].slice.call(arguments),t=e.pop(),a=e.map(function(e){var t=helpersCore.resolve(e);return"function"==typeof t?t():t}).join(""),n=canReflect_1_18_0_canReflect.getKeyValue(t.scope.templateContext.helpers,"module"),r=n?n.uri:void 0,s="."===a[0];if(s&&r)return canJoinUris_1_2_0_canJoinUris(r,a);var o="undefined"!=typeof System&&(System.renderingBaseURL||System.baseURL)||baseUrl();return"/"!==a[0]&&"/"!==o[o.length-1]&&(o+="/"),canJoinUris_1_2_0_canJoinUris(o,a)};joinBaseHelper.requiresOptionsArgument=!0;var eachHelper=function(e){var t=[].slice.call(arguments),a=t.pop(),n=a.exprData.hashExprs,r=helpersCore.bindAndRead(e),s,o;if(0<canReflect_1_18_0_canReflect.size(n)&&(s={},canReflect_1_18_0_canReflect.eachKey(n,function(e,t){s[e.key]=t})),(canReflect_1_18_0_canReflect.isObservableLike(r)&&canReflect_1_18_0_canReflect.isListLike(r)||canReflect_1_18_0_canReflect.isListLike(r)&&canReflect_1_18_0_canReflect.isValueLike(e))&&!a.stringOnly)return a.metadata.rendered=!0,function(t){var n=[t];n.expression="live.list",canViewNodelist_4_3_4_canViewNodelist.register(n,null,a.nodeList,!0),canViewNodelist_4_3_4_canViewNodelist.update(a.nodeList,[t]);var r=function(e,t,n){var r={};return 0<canReflect_1_18_0_canReflect.size(s)&&(s.value&&(r[s.value]=e),s.index&&(r[s.index]=t)),a.fn(a.scope.add(r,{notContext:!0}).add({index:t},{special:!0}).add(e),a.options,n)};canViewLive_4_2_8_canViewLive.list(t,e,r,a.context,t.parentNode,n,function(e,t){return a.inverse(a.scope.add(e),a.options,t)})};var i=helpersCore.resolve(e),l;return!!i&&canReflect_1_18_0_canReflect.isListLike(i)?(l=utils$1.getItemsFragContent(i,a,a.scope),a.stringOnly?l.join(""):l):canReflect_1_18_0_canReflect.isObservableLike(i)&&canReflect_1_18_0_canReflect.isMapLike(i)||i instanceof Object?(l=[],canReflect_1_18_0_canReflect.each(i,function(e,t){var n=new keyObservable(i,t);o={},0<canReflect_1_18_0_canReflect.size(s)&&(s.value&&(o[s.value]=n),s.key&&(o[s.key]=t)),l.push(a.fn(a.scope.add(o,{notContext:!0}).add({key:t},{special:!0}).add(n)))}),a.stringOnly?l.join(""):l):void 0};eachHelper.isLiveBound=!0,eachHelper.requiresOptionsArgument=!0,eachHelper.ignoreArgLookup=function(e){return 1===e};var indexHelper=canAssign_1_3_3_canAssign(function(e,t){t||(t=e,e=0);var a=t.scope.peek("scope.index");return""+(("function"==typeof a?a():a)+e)},{requiresOptionsArgument:!0}),withHelper=function(e,t){var a=e;return t?(e=helpersCore.resolve(e),t.hash&&0<canReflect_1_18_0_canReflect.size(t.hash)&&(a=t.scope.add(t.hash,{notContext:!0}).add(a))):(t=e,e=!0,a=t.hash),t.fn(a||{})};withHelper.requiresOptionsArgument=!0;var dataHelper=function(e,t){var a=(helpersCore.looksLikeOptions(t)?t.context:t)||this;return function(t){canDomData_1_0_3_canDomData.set(t,e,a)}},unlessHelper=function(e,t){return t?ifHelper.apply(this,[e,canAssign_1_3_3_canAssign(canAssign_1_3_3_canAssign({},t),{fn:t.inverse,inverse:t.fn})]):!ifHelper.apply(this,[e])};unlessHelper.requiresOptionsArgument=!0,unlessHelper.isLiveBound=!0;var notConverter={get:function(e,t){return helpersCore.looksLikeOptions(t)?canReflect_1_18_0_canReflect.getValue(e)?t.inverse():t.fn():!canReflect_1_18_0_canReflect.getValue(e)},set:function(e,t){canReflect_1_18_0_canReflect.setValue(t,!e)}};canAssign_1_3_3_canAssign(builtInHelpers,{debugger:debuggerHelper$1,each:eachHelper,eachOf:eachHelper,index:indexHelper,if:ifHelper,is:isHelper,eq:isHelper,unless:unlessHelper,with:withHelper,console:console,data:dataHelper,domData:domDataHelper,switch:switchHelper,joinBase:joinBaseHelper,and:andHelper,or:orHelper,let:Let,for:ForOf,portal:Portal}),canAssign_1_3_3_canAssign(builtInConverters,{not:notConverter}),helpersCore.addBuiltInHelpers(),helpersCore.addBuiltInConverters();var core$2=helpersCore,mustacheLineBreakRegExp$1=/(?:(^|\r?\n)(\s*)(\{\{([\s\S]*)\}\}\}?)([^\S\n\r]*)($|\r?\n))|(\{\{([\s\S]*)\}\}\}?)/g,mustacheWhitespaceRegExp$1=/(\s*)(\{\{\{?)(-?)([\s\S]*?)(-?)(\}\}\}?)(\s*)/g;function splitModeFromExpression$1(e,t){e=e.trim();var a=e.charAt(0);return 0<="#/{&^>!<".indexOf(a)?e=e.substr(1).trim():a=null,"{"===a&&t.node&&(a=null),{mode:a,expression:e}}function cleanLineEndings(e){return e.replace(mustacheLineBreakRegExp$1,function(e,t,a,n,r,s,o,i,l,d){s=s||"",t=t||"",a=a||"";var p=splitModeFromExpression$1(r||l,{});return i||0<=">{".indexOf(p.mode)?e:0<="^#!/".indexOf(p.mode)?(a=t+a&&" ",a+n+(0!==d&&o.length?t+"\n":"")):a+n+s+(a.length||0!==d?t+"\n":"")})}function whiteSpaceReplacement(e,t,a,n,r,s,o,i){return"-"===n&&(t=""),"-"===s&&(i=""),t+a+r+o+i}function cleanWhitespaceControl(e){return e.replace(mustacheWhitespaceRegExp$1,whiteSpaceReplacement)}var cleanLineEndings_1=cleanLineEndings,cleanWhitespaceControl_1=cleanWhitespaceControl,canStacheAst_1_1_0_controls={cleanLineEndings:cleanLineEndings_1,cleanWhitespaceControl:cleanWhitespaceControl_1},parse=function(e,t){function a(e){h&&(i[h]=g,h=""),y?s.push(g):r.push(g),o.push({specifier:g,loc:{line:e},attributes:l}),l=new Map}1===arguments.length&&(t=arguments[0],e=void 0);var n=t;n=canStacheAst_1_1_0_controls.cleanWhitespaceControl(n),n=canStacheAst_1_1_0_controls.cleanLineEndings(n);var r=[],s=[],o=[],i={},l=new Map,d=!1,p=!1,c=!1,u=!1,y=!1,h="",g="",m=null,f=canViewParser_4_1_3_canViewParser(n,{filename:e,start:function(e,t){"can-import"===e?(u=t,y=!1,d=!0):"can-dynamic-import"===e?(u=t,y=!0,d=!0):d&&(y=!0,d=!1)},attrStart:function(e){m=e,l.set(m,!0),"from"===e?p=!0:("as"==e||"export-as"==e)&&(c=!0)},attrEnd:function(e){"from"===e?p=!1:("as"==e||"export-as"==e)&&(c=!1)},attrValue:function(e){d&&l.set(m,e),p&&d?g=e:c&&d&&(h=e)},end:function(e,t,n){("can-import"===e||"can-dynamic-import"===e)&&u&&a(n)},close:function(e,t,n){("can-import"===e||"can-dynamic-import"===e)&&a(n)},chars:function(e){0<e.trim().length&&(y=!0)},special:function(){y=!0}},!0);return{intermediate:f,program:f,imports:r,dynamicImports:s,importDeclarations:o,ases:i,exports:i}},canStacheAst_1_1_0_canStacheAst={parse:parse},canImportModule_1_2_0_canImportModule=canNamespace_1_0_0_canNamespace.import=function(e,t){return new Promise(function(a,n){try{var r=global_1();"object"==typeof r.System&&isFunction$1(r.System["import"])?r.System["import"](e,{name:t}).then(a,n):r.define&&r.define.amd?r.require([e],function(e){a(e)}):r.require?a(r.require(e)):"undefined"==typeof stealRequire?a():steal.import(e,{name:t}).then(a,n)}catch(e){n(e)}})};function isFunction$1(e){return"function"==typeof e}var getIntermediateAndImports=canStacheAst_1_1_0_canStacheAst.parse,makeRendererConvertScopes=utils$1.makeRendererConvertScopes,last$2=utils$1.last;canViewCallbacks_4_4_1_canViewCallbacks.tag("content")||canViewCallbacks_4_4_1_canViewCallbacks.tag("content",function(e,t){return t.scope});var isViewSymbol$2=canSymbol_1_6_5_canSymbol.for("can.isView"),svgNamespace="http://www.w3.org/2000/svg",xmlnsAttrNamespaceURI$1="http://www.w3.org/2000/xmlns/",xlinkHrefAttrNamespaceURI$1="http://www.w3.org/1999/xlink",namespaces={svg:svgNamespace,g:svgNamespace,defs:svgNamespace,path:svgNamespace,filter:svgNamespace,feMorphology:svgNamespace,feGaussianBlur:svgNamespace,feOffset:svgNamespace,feComposite:svgNamespace,feColorMatrix:svgNamespace,use:svgNamespace},attrsNamespacesURI$1={xmlns:xmlnsAttrNamespaceURI$1,"xlink:href":xlinkHrefAttrNamespaceURI$1},textContentOnlyTag={style:!0,script:!0};function stache(e,t){1===arguments.length&&(t=arguments[0],e=void 0);var a={};"string"==typeof t&&(t=mustache_core.cleanWhitespaceControl(t),t=mustache_core.cleanLineEndings(t));var n=new html_section(e),r={node:null,attr:null,sectionElementStack:[],text:!1,namespaceStack:[],textContentOnly:null},s=function(e,t,n,s){if(">"===t)e.add(mustache_core.makeLiveBindingPartialRenderer(n,i({filename:e.filename,lineNo:s})));else if("/"===t){var o=e.last();"<"===o.startedWith?(a[n]=e.endSubSectionAndReturnRenderer(),e.removeCurrentNode()):e.endSection(),e instanceof html_section&&r.sectionElementStack.pop()}else if("else"===t)e.inverse();else{var l=e instanceof html_section?mustache_core.makeLiveBindingBranchRenderer:mustache_core.makeStringBranchRenderer;if("{"===t||"&"===t)e.add(l(null,n,i({filename:e.filename,lineNo:s})));else if("#"===t||"^"===t||"<"===t){var d=l(t,n,i({filename:e.filename,lineNo:s}));e.startSection(d),e.last().startedWith=t,e instanceof html_section&&r.sectionElementStack.push({type:"section"})}else e.add(l(null,n,i({text:!0,filename:e.filename,lineNo:s})))}},o=function(){var e=r.sectionElementStack[r.sectionElementStack.length-1];return!r.sectionElementStack.length||"section"===e.type||"custom"===e.type},i=function(e){var t={tag:r.node&&r.node.tag,attr:r.attr&&r.attr.name,directlyNested:o(),textContentOnly:!!r.textContentOnly};return e?canAssign_1_3_3_canAssign(t,e):t},l=function(e,t){e.attributes||(e.attributes=[]),e.attributes.unshift(t)};canViewParser_4_1_3_canViewParser(t,{filename:e,start:function(e,t){var a=namespaces[e];a&&!t&&r.namespaceStack.push(a),r.node={tag:e,children:[],namespace:a||last$2(r.namespaceStack)}},end:function(t,a){var s=canViewCallbacks_4_4_1_canViewCallbacks.tag(t),i=o();a?(n.add(r.node),s&&l(r.node,function(e,a){canViewCallbacks_4_4_1_canViewCallbacks.tagHandler(this,t,{scope:e,subtemplate:null,templateType:"stache",parentNodeList:a,directlyNested:i})})):(n.push(r.node),r.sectionElementStack.push({type:s?"custom":null,tag:s?null:t,templates:{},directlyNested:i}),s?n.startSubSection():textContentOnlyTag[t]&&(r.textContentOnly=new text_section(e))),r.node=null},close:function(e){var t=namespaces[e];t&&r.namespaceStack.pop();var a=canViewCallbacks_4_4_1_canViewCallbacks.tag(e),s;a&&(s=n.endSubSectionAndReturnRenderer()),textContentOnlyTag[e]&&(n.last().add(r.textContentOnly.compile(i())),r.textContentOnly=null);var o=n.pop();if(a)if("can-template"===e){var d=r.sectionElementStack[r.sectionElementStack.length-2];s&&(d.templates[o.attrs.name]=makeRendererConvertScopes(s)),n.removeCurrentNode()}else{var p=r.sectionElementStack[r.sectionElementStack.length-1];l(o,function(t,a){canViewCallbacks_4_4_1_canViewCallbacks.tagHandler(this,e,{scope:t,subtemplate:s?makeRendererConvertScopes(s):s,templateType:"stache",parentNodeList:a,templates:p.templates,directlyNested:p.directlyNested})})}r.sectionElementStack.pop()},attrStart:function(e){r.node.section?r.node.section.add(e+"=\""):r.attr={name:e,value:""}},attrEnd:function(e){var t=attrsNamespacesURI$1[e];if(r.node.section)r.node.section.add("\" ");else{r.node.attrs||(r.node.attrs={}),r.node.attrs[r.attr.name]=r.attr.section?r.attr.section.compile(i()):t?{value:r.attr.value,namespaceURI:attrsNamespacesURI$1[e]}:r.attr.value;var a=canViewCallbacks_4_4_1_canViewCallbacks.attr(e);a&&(!r.node.attributes&&(r.node.attributes=[]),r.node.attributes.push(function(t,n){a(this,{attributeName:e,scope:t,nodeList:n})})),r.attr=null}},attrValue:function(e){var t=r.node.section||r.attr.section;t?t.add(e):r.attr.value+=e},chars:function(e){(r.textContentOnly||n).add(e)},special:function(t,a){var o=mustache_core.splitModeFromExpression(t,r),l=o.mode,d=o.expression;if("else"===d){var p;return p=r.attr&&r.attr.section?r.attr.section:r.node&&r.node.section?r.node.section:r.textContentOnly||n,void p.inverse()}if("!"!==l)if(r.node&&r.node.section)s(r.node.section,l,d,a),0===r.node.section.subSectionDepth()&&(r.node.attributes.push(r.node.section.compile(i())),delete r.node.section);else if(r.attr)r.attr.section||(r.attr.section=new text_section(e),r.attr.value&&r.attr.section.add(r.attr.value)),s(r.attr.section,l,d,a);else if(!r.node)s(r.textContentOnly||n,l,d,a);else if(r.node.attributes||(r.node.attributes=[]),!l)r.node.attributes.push(mustache_core.makeLiveBindingBranchRenderer(null,d,i({filename:n.filename,lineNo:a})));else if("#"===l||"^"===l)r.node.section||(r.node.section=new text_section(e)),s(r.node.section,l,d,a);else throw new Error(l+" is currently not supported within a tag.")},comment:function(e){n.add({comment:e})},done:function(){}});var d=n.compile(),p=canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(e,t,n){void 0===n&&canReflect_1_18_0_canReflect.isListLike(t)&&(n=t,t=void 0),!t||t.helpers||t.partials||t.tags||(t={helpers:t}),canReflect_1_18_0_canReflect.eachKey(t&&t.helpers,function(e){e.requiresOptionsArgument=!0});var r=new canViewScope_4_13_6_templateContext(t);if(canReflect_1_18_0_canReflect.eachKey(a,function(e,t){canReflect_1_18_0_canReflect.setKeyValue(r.partials,t,e)}),canReflect_1_18_0_canReflect.setKeyValue(r,"view",p),!(e instanceof canViewScope_4_13_6_canViewScope))e=new canViewScope_4_13_6_canViewScope(r).add(e);else{var s=new canViewScope_4_13_6_canViewScope(r);s._parent=e._parent,e._parent=s}return d(e.addLetContext(),n)});return p[isViewSymbol$2]=!0,p}canAssign_1_3_3_canAssign(stache,core$2),stache.safeString=function(e){return canReflect_1_18_0_canReflect.assignSymbols({},{"can.toDOM":function(){return e}})},stache.async=function(e){var t=getIntermediateAndImports(e),a=t.imports.map(function(e){return canImportModule_1_2_0_canImportModule(e)});return Promise.all(a).then(function(){return stache(t.intermediate)})};var templates={};stache.from=mustache_core.getTemplateById=function(e){if(!templates[e]){var t=document$1().getElementById(e);t&&(templates[e]=stache("#"+e,t.innerHTML))}return templates[e]},stache.registerPartial=function(e,t){templates[e]="string"==typeof t?stache(t):t},stache.addBindings=canViewCallbacks_4_4_1_canViewCallbacks.attrs;var canStache_4_17_21_canStache=canNamespace_1_0_0_canNamespace.stache=stache,viewModelSymbol=canSymbol_1_6_5_canSymbol.for("can.viewModel"),canViewModel_4_0_3_canViewModel=canNamespace_1_0_0_canNamespace.viewModel=function(e,t,a){if("string"==typeof e?e=document$1().querySelector(e):canReflect_1_18_0_canReflect.isListLike(e)&&!e.nodeType&&(e=e[0]),canReflect_1_18_0_canReflect.isObservableLike(t)&&canReflect_1_18_0_canReflect.isMapLike(t))return void(e[viewModelSymbol]=t);var n=e[viewModelSymbol];switch(n||(n=new canSimpleMap_4_3_2_canSimpleMap,e[viewModelSymbol]=n),arguments.length){case 0:case 1:return n;case 2:return canReflect_1_18_0_canReflect.getKeyValue(n,t);default:return canReflect_1_18_0_canReflect.setKeyValue(n,t,a),e;}},isDomEventTarget$2=util.isDomEventTarget,canEvent={on:function(e,t,a){isDomEventTarget$2(this)?canDomEvents_1_3_11_canDomEvents.addEventListener(this,e,t,a):canReflect_1_18_0_canReflect.onKeyValue(this,e,t,a)},off:function(e,t,a){isDomEventTarget$2(this)?canDomEvents_1_3_11_canDomEvents.removeEventListener(this,e,t,a):canReflect_1_18_0_canReflect.offKeyValue(this,e,t,a)},one:function e(t,a,n){var e=function(){return canEvent.off.call(this,t,e,n),a.apply(this,arguments)};return canEvent.on.call(this,t,e,n),this}},canAttributeObservable_1_2_7_event=canEvent,isRadioInput=function(e){return"input"===e.nodeName.toLowerCase()&&"radio"===e.type},canAttributeObservable_1_2_7_getEventName=function(e,t){var a="change";return isRadioInput(e)&&"checked"===t&&(a="can-attribute-observable-radiochange"),canAttributeObservable_1_2_7_behaviors.findSpecialListener(t)&&(a=t),a};function getRoot(){return document$1().documentElement}function findParentForm(e){for(;e&&!("FORM"===e.nodeName);)e=e.parentNode;return e}function shouldReceiveEventFromRadio(e,t){var a=e.getAttribute("name");return a&&a===t.getAttribute("name")&&findParentForm(e)===findParentForm(t)}function isRadioInput$1(e){return"INPUT"===e.nodeName&&"radio"===e.type}function attachRootListener(e,t){var a=getRoot(),n=function(a){var n=a.target;if(isRadioInput$1(n))for(var r in t){var s={type:r},o=t[r];o.forEach(function(t){shouldReceiveEventFromRadio(n,t)&&e.dispatch(t,s,!1)})}};return e.addEventListener(a,"change",n),n}function detachRootListener(e,t){var a=getRoot();e.removeEventListener(a,"change",t)}var radioChangeEvent={defaultEventType:"radiochange",addEventListener:function(e,t,a){if(!isRadioInput$1(e))throw new Error("Listeners for "+t+" must be radio inputs");var n=radioChangeEvent._eventTypeTrackedRadios;n||(n=radioChangeEvent._eventTypeTrackedRadios={},!radioChangeEvent._rootListener&&(radioChangeEvent._rootListener=attachRootListener(this,n)));var r=radioChangeEvent._eventTypeTrackedRadios[t];r||(r=radioChangeEvent._eventTypeTrackedRadios[t]=new Set),r.add(e),e.addEventListener(t,a)},removeEventListener:function(e,t,a){e.removeEventListener(t,a);var n=radioChangeEvent._eventTypeTrackedRadios;if(n){var r=n[t];if(r&&(r.delete(e),0===r.size)){for(var s in delete n[t],n)if(n.hasOwnProperty(s))return;delete radioChangeEvent._eventTypeTrackedRadios,detachRootListener(this,radioChangeEvent._rootListener),delete radioChangeEvent._rootListener}}}},canEventDomRadiochange_2_2_1_canEventDomRadiochange=canNamespace_1_0_0_canNamespace.domEventRadioChange=radioChangeEvent,onValueSymbol$4=canSymbol_1_6_5_canSymbol.for("can.onValue"),offValueSymbol$2=canSymbol_1_6_5_canSymbol.for("can.offValue"),onEmitSymbol$1=canSymbol_1_6_5_canSymbol.for("can.onEmit"),offEmitSymbol$1=canSymbol_1_6_5_canSymbol.for("can.offEmit"),internalRadioChangeEventType="can-attribute-observable-radiochange";canDomEvents_1_3_11_canDomEvents.addEvent(canEventDomRadiochange_2_2_1_canEventDomRadiochange,internalRadioChangeEventType);var isSelect=function(e){return"select"===e.nodeName.toLowerCase()},isMultipleSelect=function(e,t){return isSelect(e)&&"value"===t&&e.multiple},slice$3=Array.prototype.slice;function canUtilAEL(){var e=slice$3.call(arguments,0);return e.unshift(this),canDomEvents_1_3_11_canDomEvents.addEventListener.apply(null,e)}function canUtilREL(){var e=slice$3.call(arguments,0);return e.unshift(this),canDomEvents_1_3_11_canDomEvents.removeEventListener.apply(null,e)}function AttributeObservable(e,t,a,n){"string"==typeof a&&(n=a,a=void 0),this.el=e,this.bound=!1,this.prop=isMultipleSelect(e,t)?"values":t,this.event=n||canAttributeObservable_1_2_7_getEventName(e,t),this.handler=this.handler.bind(this),n!==void 0&&(this[onValueSymbol$4]=null,this[offValueSymbol$2]=null,this[onEmitSymbol$1]=AttributeObservable.prototype.on,this[offEmitSymbol$1]=AttributeObservable.prototype.off)}AttributeObservable.prototype=Object.create(settable.prototype),canAssign_1_3_3_canAssign(AttributeObservable.prototype,{constructor:AttributeObservable,get:function(){canObservationRecorder_1_3_1_canObservationRecorder.isRecording()&&(canObservationRecorder_1_3_1_canObservationRecorder.add(this),!this.bound&&canObservation_4_2_0_canObservation.temporarilyBind(this));var e=canAttributeObservable_1_2_7_behaviors.get(this.el,this.prop);return"function"==typeof e&&(e=e.bind(this.el)),e},set:function(e){var t=canAttributeObservable_1_2_7_behaviors.setAttrOrProp(this.el,this.prop,e);return t||(this._value=e),e},handler:function(e,t){var a=this._value,n=[];this._value=canAttributeObservable_1_2_7_behaviors.get(this.el,this.prop),(t!==void 0||this._value!==a)&&(n=[this.handlers.getNode([]),this,[e,a]],canQueues_1_3_1_canQueues.enqueueByQueue.apply(canQueues_1_3_1_canQueues,n))},onBound:function(){var e=this;e.bound=!0,e._handler=function(t){e.handler(canAttributeObservable_1_2_7_behaviors.get(e.el,e.prop),t)},e.event===internalRadioChangeEventType&&canAttributeObservable_1_2_7_event.on.call(e.el,"change",e._handler);var t=canAttributeObservable_1_2_7_behaviors.findSpecialListener(e.prop);t&&(e._specialDisposal=t.call(e.el,e.prop,e._handler,canUtilAEL)),canAttributeObservable_1_2_7_event.on.call(e.el,e.event,e._handler),this._value=canAttributeObservable_1_2_7_behaviors.get(this.el,this.prop)},onUnbound:function(){var e=this;e.bound=!1,e.event===internalRadioChangeEventType&&canAttributeObservable_1_2_7_event.off.call(e.el,"change",e._handler),e._specialDisposal&&(e._specialDisposal.call(e.el,canUtilREL),e._specialDisposal=null),canAttributeObservable_1_2_7_event.off.call(e.el,e.event,e._handler)},valueHasDependencies:function(){return!0},getValueDependencies:function(){var e=new Map,t=new Set;return t.add(this.prop),e.set(this.el,t),{keyDependencies:e}}}),canReflect_1_18_0_canReflect.assignSymbols(AttributeObservable.prototype,{"can.isMapLike":!1,"can.getValue":AttributeObservable.prototype.get,"can.setValue":AttributeObservable.prototype.set,"can.onValue":AttributeObservable.prototype.on,"can.offValue":AttributeObservable.prototype.off,"can.valueHasDependencies":AttributeObservable.prototype.hasDependencies,"can.getValueDependencies":AttributeObservable.prototype.getValueDependencies});var canAttributeObservable_1_2_7_canAttributeObservable=AttributeObservable,bindings=new Map,onMatchStr="on:",vmMatchStr="vm:",elMatchStr="el:",byMatchStr=":by:",toMatchStr=":to",fromMatchStr=":from",bindMatchStr=":bind",viewModelBindingStr="viewModel",attributeBindingStr="attribute",scopeBindingStr="scope",viewModelOrAttributeBindingStr="viewModelOrAttribute",viewModelSymbol$1=canSymbol_1_6_5_canSymbol.for("can.viewModel"),throwOnlyOneTypeOfBindingError=function(){throw new Error("can-stache-bindings - you can not have contextual bindings ( this:from='value' ) and key bindings ( prop:from='value' ) on one element.")},checkBindingState=function(e,t){var a=t.parent.exports&&t.child.source===viewModelBindingStr;if(a){var n=t.child.name;if(a&&("this"===n||"."===n)){if(e.isSettingViewModel||e.isSettingOnViewModel)throwOnlyOneTypeOfBindingError();else return{isSettingViewModel:!0,initialViewModelData:void 0};}else if(e.isSettingViewModel)throwOnlyOneTypeOfBindingError();else return{isSettingOnViewModel:!0,initialViewModelData:e.initialViewModelData}}else return e},getEventBindingData=function(e,t,a){var n=e.substr(onMatchStr.length),r=t&&t[viewModelSymbol$1],s=startsWith.call(n,elMatchStr),o=startsWith.call(n,vmMatchStr),i=-1<n.indexOf(byMatchStr),l="",d,p,c,u;o?(l="vm",n=n.substr(vmMatchStr.length)):s?(l="el",n=n.substr(elMatchStr.length)):!o&&!s&&(i?d=!0:r?o=!0:s=!0);var y;if(i){var h=n.indexOf(byMatchStr);y=n.substr(h+byMatchStr.length),n=n.substr(0,h)}if(c=n,!s)o?(p=r,i&&(p=r.get(y),u=new canViewScope_4_13_6_canViewScope(r).computeData(y))):d&&(p=a,i&&(p=p.get(y),u=a.computeData(y)));else if(i)throw new Error("binding with :by in element scope is not currently supported");else p=t;return{bindingContext:p,bindingContextObservable:u,eventName:c,bindingCode:l}},onKeyValueSymbol$3=canSymbol_1_6_5_canSymbol.for("can.onKeyValue"),makeScopeFromEvent=function(e,t,a,n,r,s){var o=s&&s[onKeyValueSymbol$3]!==void 0,i={element:e,event:t,viewModel:a,arguments:o?Array.prototype.slice.call(n,1):n,args:n};return r.scope.add(i,{special:!0})},runEventCallback=function(e,t,a,n,r){canQueues_1_3_1_canQueues.batch.start();var s=[];s=[function(){var t=r.value(n,{doNotWrapInObservation:!0});return t=canReflect_1_18_0_canReflect.isValueLike(t)?canReflect_1_18_0_canReflect.getValue(t):t,"function"==typeof t?t(e):t},null,null,{}],canQueues_1_3_1_canQueues.mutateQueue.enqueue.apply(canQueues_1_3_1_canQueues.mutateQueue,s),canQueues_1_3_1_canQueues.batch.stop()},behaviors={initializeViewModel:function(e,t,a,n){var r=[],s={},o={isSettingOnViewModel:!1,isSettingViewModel:!1,initialViewModelData:t||{}};e.forEach(function(e){e.binding.startParent();var t=e.siblingBindingData;if(o=checkBindingState(o,t),t.parent.exports){var a=t.child.setCompute?canViewScope_4_13_6_makeComputeLike(e.binding.parent):e.binding.parentValue;void 0!==a&&(o.isSettingViewModel?o.initialViewModelData=a:o.initialViewModelData[cleanVMName(t.child.name,n.scope)]=a)}r.push(e.binding.start.bind(e.binding)),s[t.bindingAttributeName]=e.binding.stop.bind(e.binding)});for(var l=a(o.initialViewModelData,0<e.length,o),d=0,p=r.length;d<p;d++)r[d]();return{viewModel:l,onTeardowns:s,bindingsState:o}},viewModel:function(e,t,a,n,r){var s=canAssign_1_3_3_canAssign({},n),o=canAssign_1_3_3_canAssign({element:e,viewModel:void 0},t),i={attributeViewModelBindings:s,alreadyUpdatedChild:!0,favorViewModel:!0},l=[];if(canReflect_1_18_0_canReflect.eachListLike(e.attributes||[],function(e){var t=makeDataBinding(e,o,i);t&&l.push(t)}),!(r&&0===l.length)){var d=behaviors.initializeViewModel(l,n,function(){o.viewModel=a.apply(this,arguments)},o),p=d.onTeardowns,c=d.bindingsState,u={},y;return c.isSettingViewModel||(i.alreadyUpdatedChild=!1,y=canDomMutate_1_3_11_canDomMutate.onNodeAttributeChange(e,function(t){var a=t.attributeName,n=e.getAttribute(a);p[a]&&p[a]();var r=u[a]&&u[a].parent.source===attributeBindingStr;if(null!==n||r){var s=makeDataBinding({name:a,value:n},o,i);s&&(s.binding.start(),u[a]=s.siblingBindingData,p[a]=s.binding.stop.bind(s.binding))}})),function(){for(var e in y&&(y(),y=void 0),p)p[e]()}}},data:function(e,t){if(!canDomData_1_0_3_canDomData.get(e,"preventDataBindings")){var a=canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(){return s||(s=canViewModel_4_0_3_canViewModel(e))}),n={element:e,templateType:t.templateType,scope:t.scope,parentNodeList:t.nodeList,get viewModel(){return a()}},r=makeDataBinding({name:t.attributeName,value:e.getAttribute(t.attributeName)},n,{syncChildWithParent:!1}),s,o,i,l;r.binding.start();var d=function(a){var r=a.attributeName,s=e.getAttribute(r);if(r===t.attributeName&&(o&&o(),null!==s)){var i=makeDataBinding({name:r,value:s},n,{syncChildWithParent:!1});i&&(i.binding.start(),o=i.binding.stop.bind(i.binding)),o=i.onTeardown}},p=function(){o&&(o(),o=void 0),l&&(l(),l=void 0),i&&(i(),i=void 0)};t.nodeList&&canViewNodelist_4_3_4_canViewNodelist.register([],p,t.nodeList,!1),o=r.binding.stop.bind(r.binding),i=canDomMutate_1_3_11_canDomMutate.onNodeAttributeChange(e,d),l=canDomMutate_1_3_11_canDomMutate.onNodeRemoval(e,function(){var t=e.ownerDocument,a=t.contains?t:t.documentElement;a&&!1!==a.contains(e)||p()})}},event:function(e,t){function a(e,t){t&&map$1.off.call(t,s,l),e&&(map$1.on.call(e,s,l),y=e)}var n=canAttributeEncoder_1_1_4_canAttributeEncoder.decode(t.attributeName),r,s,o,i;if(-1!==n.indexOf(toMatchStr+":")||-1!==n.indexOf(fromMatchStr+":")||-1!==n.indexOf(bindMatchStr+":"))return this.data(e,t);if(startsWith.call(n,onMatchStr))r=getEventBindingData(n,e,t.scope),s=r.eventName,o=r.bindingContext,i=r.bindingContextObservable;else throw new Error("can-stache-bindings - unsupported event bindings "+n);var l=function(a){var r=e.getAttribute(canAttributeEncoder_1_1_4_canAttributeEncoder.encode(n));if(r){var s=e[viewModelSymbol$1],i=expression_1.parse(r,{lookupRule:function(){return expression_1.Lookup},methodRule:"call"}),l=makeScopeFromEvent(e,a,s,arguments,t,o);if(i instanceof expression_1.Hashes){var d=i.hashExprs,p=Object.keys(d)[0],c=i.hashExprs[p].value(l),u=canReflect_1_18_0_canReflect.isObservableLike(c)&&canReflect_1_18_0_canReflect.isValueLike(c);l.set(p,u?canReflect_1_18_0_canReflect.getValue(c):c)}else if(i instanceof expression_1.Call)runEventCallback(e,a,t,l,i,n,r);else throw new Error("can-stache-bindings: Event bindings must be a call expression. Make sure you have a () in "+t.attributeName+"="+JSON.stringify(r))}},d=function(){o&&map$1.off.call(o,s,l),p&&(p(),p=void 0),c&&(c(),c=void 0),u&&(u(),u=void 0)},p,c,u,y;p=canDomMutate_1_3_11_canDomMutate.onNodeAttributeChange(e,function(t){var a=t.attributeName===n,r=!e.getAttribute(n);a&&r&&d()}),c=canDomMutate_1_3_11_canDomMutate.onNodeRemoval(e,function(){var t=e.ownerDocument,a=t.contains?t:t.documentElement;a&&a.contains(e)||d()}),!o&&i?(u=function(){y&&map$1.off.call(y,s,l),canReflect_1_18_0_canReflect.offValue(i,a)},canReflect_1_18_0_canReflect.onValue(i,a)):map$1.on.call(o,s,l)}};bindings.set(/[\w\.:]+:to$/,behaviors.data),bindings.set(/[\w\.:]+:from$/,behaviors.data),bindings.set(/[\w\.:]+:bind$/,behaviors.data),bindings.set(/[\w\.:]+:raw$/,behaviors.data),bindings.set(/[\w\.:]+:to:on:[\w\.:]+/,behaviors.data),bindings.set(/[\w\.:]+:from:on:[\w\.:]+/,behaviors.data),bindings.set(/[\w\.:]+:bind:on:[\w\.:]+/,behaviors.data),bindings.set(/on:[\w\.:]+/,behaviors.event);var getObservableFrom={viewModelOrAttribute:function(e,t){var a=t.element[viewModelSymbol$1];return a?this.viewModel.apply(this,arguments):this.attribute.apply(this,arguments)},scope:function(e,t){var a=t.scope,n=e.name,r=e.exports;if(!n)return new canSimpleObservable_2_5_0_canSimpleObservable;if(r||0<=n.indexOf("(")||0<=n.indexOf("=")){var s=expression_1.parse(n,{baseMethodType:"Call"});return s instanceof expression_1.Hashes?new canSimpleObservable_2_5_0_canSimpleObservable(function(){var e=s.hashExprs,t=Object.keys(e)[0],n=s.hashExprs[t].value(a),r=canReflect_1_18_0_canReflect.isObservableLike(n)&&canReflect_1_18_0_canReflect.isValueLike(n);a.set(t,r?canReflect_1_18_0_canReflect.getValue(n):n)}):s.value(a)}var o={};canReflect_1_18_0_canReflect.assignSymbols(o,{"can.getValue":function(){},"can.valueHasDependencies":function(){return!1},"can.setValue":function(e){var t=expression_1.parse(cleanVMName(n,a),{baseMethodType:"Call"}),r=t.value(a);canReflect_1_18_0_canReflect.setValue(r,e)},"can.getWhatIChange":function(){var e=a.getDataForScopeSet(cleanVMName(n,a)),t=new Map,r=new Set;return r.add(e.key),t.set(e.parent,r),{mutate:{keyDependencies:t}}},"can.getName":function(){}});var i=a.getDataForScopeSet(cleanVMName(n,a));return i.parent&&i.key&&canReflectDependencies_1_1_2_canReflectDependencies.addMutatedBy(i.parent,i.key,o),o},viewModel:function(e,t){var a=t.scope,n=e.name,r=e.setCompute,s=cleanVMName(n,a),o="."===n||"this"===n,i=o?[]:canStacheKey_1_4_3_canStacheKey.reads(n),l=new setter(function(){var e=t.viewModel;return canStacheKey_1_4_3_canStacheKey.read(e,i,{}).value},function(e){var a=t.viewModel;if(r){var n=canReflect_1_18_0_canReflect.getKeyValue(a,s);canReflect_1_18_0_canReflect.isObservableLike(n)?canReflect_1_18_0_canReflect.setValue(n,e):canReflect_1_18_0_canReflect.setKeyValue(a,s,new canSimpleObservable_2_5_0_canSimpleObservable(canReflect_1_18_0_canReflect.getValue(e)))}else o?canReflect_1_18_0_canReflect.setValue(a,e):canStacheKey_1_4_3_canStacheKey.write(a,i,e)});return l},attribute:function(e,t){return"this"===e.name?canReflect_1_18_0_canReflect.assignSymbols({},{"can.getValue":function(){return t.element},"can.valueHasDependencies":function(){return!1},"can.getName":function(){}}):new canAttributeObservable_1_2_7_canAttributeObservable(t.element,e.name,{},e.event)}},startsWith=String.prototype.startsWith||function(e){return 0===this.indexOf(e)};function getEventName(e){if(e.special.on!==void 0)return e.tokens[e.special.on+1]}var siblingBindingRules={to:{child:{exports:!0,syncSibling:!1},parent:{exports:!1,syncSibling:!1}},from:{child:{exports:!1,syncSibling:!1},parent:{exports:!0,syncSibling:!1}},bind:{child:{exports:!0,syncSibling:!1},parent:{exports:!0,syncSibling:!0}},raw:{child:{exports:!1,syncSibling:!1},parent:{exports:!0,syncSibling:!1}}},bindingNames=[],special$1={vm:!0,on:!0};canReflect_1_18_0_canReflect.eachKey(siblingBindingRules,function(e,t){bindingNames.push(t),special$1[t]=!0});function tokenize(e){var t=e.split(":"),a={tokens:[],special:{}};return t.forEach(function(e){special$1[e]?a.special[e]=a.tokens.push(e)-1:a.tokens.push(e)}),a}var getChildBindingStr=function(e,t){return 0<=e.indexOf("vm")?viewModelBindingStr:0<=e.indexOf("el")?attributeBindingStr:t?viewModelBindingStr:viewModelOrAttributeBindingStr};function getSiblingBindingData(e,t){var a=canAttributeEncoder_1_1_4_canAttributeEncoder.decode(e.name),n=e.value||"",r=tokenize(a),s,o,i;if(bindingNames.forEach(function(e){if(void 0!==r.special[e]&&0<r.special[e])return o=e,i=r.special[e],!1}),o){var l=getEventName(r),d=!(l&&"bind"!==o);return s={parent:canAssign_1_3_3_canAssign({source:scopeBindingStr,name:r.special.raw?"\""+n+"\"":n},siblingBindingRules[o].parent),child:canAssign_1_3_3_canAssign({source:getChildBindingStr(r.tokens,t&&t.favorViewModel),name:r.tokens[i-1],event:l},siblingBindingRules[o].child),bindingAttributeName:a,initializeValues:d},"~"===n.trim().charAt(0)&&(s.child.setCompute=!0),s}}var makeDataBinding=function(e,t,a){var n=getSiblingBindingData(e,a);if(n){var r=getObservableFrom[n.parent.source](n.parent,t,a),s=getObservableFrom[n.child.source](n.child,t,a,r),o=!!n.child.exports,i=!!n.parent.exports,l={child:s,childToParent:o,cycles:!0===o&&!0===i?0:100,onInitDoNotUpdateChild:a.alreadyUpdatedChild||!1===n.initializeValues,onInitDoNotUpdateParent:!1===n.initializeValues,onInitSetUndefinedParentIfChildIsDefined:!0,parent:r,parentToChild:i,priority:t.parentNodeList?t.parentNodeList.nesting+1:void 0,queue:"domUI",sticky:n.parent.syncSibling?"childSticksToParent":void 0},d=new canBind_1_5_1_canBind(l);return{siblingBindingData:n,binding:d}}},cleanVMName=function(e){return e.replace(/@/g,"")},canStacheBindings={behaviors:behaviors,getSiblingBindingData:getSiblingBindingData,bindings:bindings,getObservableFrom:getObservableFrom,makeDataBinding:makeDataBinding};canStacheBindings[canSymbol_1_6_5_canSymbol.for("can.callbackMap")]=bindings,canViewCallbacks_4_4_1_canViewCallbacks.attrs(canStacheBindings);var canStacheBindings_4_10_9_canStacheBindings=canStacheBindings,strUndHash=/_|-/,strColons=/\=\=/,strWords=/([A-Z]+)([A-Z][a-z])/g,strLowUp=/([a-z\d])([A-Z])/g,strDash=/([a-z\d])([A-Z])/g,strQuote=/"/g,strSingleQuote=/'/g,strHyphenMatch=/-+(.)?/g,strCamelMatch=/[a-z][A-Z]/g,convertBadValues=function(e){var t=null===e||e===void 0||isNaN(e)&&"NaN"==""+e;return""+(t?"":e)},string={esc:function(e){return convertBadValues(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(strQuote,"&#34;").replace(strSingleQuote,"&#39;")},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},camelize:function(e){return convertBadValues(e).replace(strHyphenMatch,function(e,t){return t?t.toUpperCase():""})},hyphenate:function(e){return convertBadValues(e).replace(strCamelMatch,function(e){return e.charAt(0)+"-"+e.charAt(1).toLowerCase()})},pascalize:function(e){return string.capitalize(string.camelize(e))},underscore:function(e){return e.replace(strColons,"/").replace(strWords,"$1_$2").replace(strLowUp,"$1_$2").replace(strDash,"_").toLowerCase()},undHash:strUndHash},canString_1_1_0_canString=string,controlsSymbol=canSymbol_1_6_5_canSymbol.for("can.controls"),bind=function(e,t,a,n){return map$1.on.call(e,t,a,n),function(){map$1.off.call(e,t,a,n)}},slice$4=[].slice,paramReplacer=/\{([^\}]+)\}/g,delegate=function(e,t,a,n){return map$1.on.call(e,a,t,n),function(){map$1.off.call(e,a,t,n)}},binder=function(e,t,a,n){return n?delegate(e,n.trim(),t,a):bind(e,t,a)},Control=canConstruct_3_5_6_canConstruct.extend("Control",{setup:function(){if(canConstruct_3_5_6_canConstruct.setup.apply(this,arguments),Control){var e=this,t;for(t in e.actions={},e.prototype)e._isAction(t)&&(e.actions[t]=e._action(t))}},_shifter:function(e,t){function a(){var a=r.wrapElement(this);return e.called=t,n.apply(e,[a].concat(slice$4.call(arguments,0)))}var n="string"==typeof t?e[t]:t;"function"!=typeof n&&(n=e[n]);var r=this;return a},_isAction:function(e){var t=this.prototype[e],a=typeof t;return"constructor"!==e&&("function"===a||"string"===a&&"function"==typeof this.prototype[t])&&!!(Control.isSpecial(e)||processors[e]||/[^\w]/.test(e))},_action:function(e,t,a){var n;if(paramReplacer.lastIndex=0,t||!paramReplacer.test(e)){var r=function(){var a=e.replace(paramReplacer,function(e,a){var r,s;return this._isDelegate(t,a)?(n=this._getDelegate(t,a),""):(a=this._removeDelegateFromKey(a),s=this._lookup(t)[0],r=canStacheKey_1_4_3_canStacheKey.read(s,canStacheKey_1_4_3_canStacheKey.reads(a),{readCompute:!1}).value,void 0===r&&"undefined"!=typeof window&&(r=get_1(window,a)),s&&(canReflect_1_18_0_canReflect.isObservableLike(s)&&canReflect_1_18_0_canReflect.isMapLike(s)||r)?"string"==typeof r?r:(n=r,""):null)}.bind(this)),n;a=a.trim();var r=a.split(/\s+/g),s=r.pop();return{processor:this.processors[s]||basicProcessor,parts:[a,r.join(" "),s],delegate:n||void 0}};if(n=new canObservation_4_2_0_canObservation(r,this),a){var s=function(t){a._bindings.control[e](a.element),a._bindings.control[e]=t.processor(t.delegate||a.element,t.parts[2],t.parts[1],e,a)};canReflect_1_18_0_canReflect.onValue(n,s,"mutate"),a._bindings.readyComputes[e]={compute:n,handler:s}}return n.get()}},_lookup:function(e){return[e,window]},_removeDelegateFromKey:function(e){return e},_isDelegate:function(e,t){return"element"===t},_getDelegate:function(){},processors:{},defaults:{},convertElement:function(e){return e="string"==typeof e?document.querySelector(e):e,this.wrapElement(e)},wrapElement:function(e){return e},unwrapElement:function(e){return e},isSpecial:function(e){return"inserted"===e||"removed"===e}},{setup:function(e,t){var a=this.constructor,n=a.pluginName||a.shortName,r;if(!e)throw new Error("Creating an instance of a named control without passing an element");if(this.element=a.convertElement(e),n&&"Control"!==n&&this.element.classList&&this.element.classList.add(n),r=this.element[controlsSymbol],r||(r=[],this.element[controlsSymbol]=r),r.push(this),canReflect_1_18_0_canReflect.isObservableLike(t)&&canReflect_1_18_0_canReflect.isMapLike(t)){for(var s in a.defaults)t.hasOwnProperty(s)||canStacheKey_1_4_3_canStacheKey.set(t,s,a.defaults[s]);this.options=t}else this.options=canAssign_1_3_3_canAssign(canAssign_1_3_3_canAssign({},a.defaults),t);return this.on(),[this.element,this.options]},on:function(e,t,a,n){if(!e){this.off();var r=this.constructor,s=this._bindings,o=r.actions,i=this.constructor.unwrapElement(this.element),l=Control._shifter(this,"destroy"),d,p;for(d in o)o.hasOwnProperty(d)&&(p=o[d]||r._action(d,this.options,this),p&&(s.control[d]=p.processor(p.delegate||i,p.parts[2],p.parts[1],d,this)));var c=canDomMutate_1_3_11_canDomMutate.onNodeRemoval(i,function(){var e=i.ownerDocument,t=e.contains?e:e.documentElement;t&&!1!==t.contains(i)||l()});return s.user.push(function(){c&&(c(),c=void 0)}),s.user.length}return"string"==typeof e&&(n=a,a=t,t=e,e=this.element),void 0===n&&(n=a,a=t,t=null),"string"==typeof n&&(n=Control._shifter(this,n)),this._bindings.user.push(binder(e,a,n,t)),this._bindings.user.length},off:function(){var e=this.constructor.unwrapElement(this.element),t=this._bindings;t&&((t.user||[]).forEach(function(t){t(e)}),canReflect_1_18_0_canReflect.eachKey(t.control||{},function(t){t(e)}),canReflect_1_18_0_canReflect.eachKey(t.readyComputes||{},function(e){canReflect_1_18_0_canReflect.offValue(e.compute,e.handler,"mutate")})),this._bindings={user:[],control:{},readyComputes:{}}},destroy:function(){if(null!==this.element){var e=this.constructor,t=e.pluginName||e.shortName&&canString_1_1_0_canString.underscore(e.shortName),a;this.off(),t&&"can_control"!==t&&this.element.classList&&this.element.classList.remove(t),a=this.element[controlsSymbol],a&&a.splice(a.indexOf(this),1),this.element=null}}}),processors,basicProcessor;processors=Control.processors,basicProcessor=function(e,t,a,n,r){return binder(e,t,Control._shifter(r,n),a)},["beforeremove","change","click","contextmenu","dblclick","keydown","keyup","keypress","mousedown","mousemove","mouseout","mouseover","mouseup","reset","resize","scroll","select","submit","focusin","focusout","mouseenter","mouseleave","touchstart","touchmove","touchcancel","touchend","touchleave","inserted","removed","dragstart","dragenter","dragover","dragleave","drag","drop","dragend"].forEach(function(e){processors[e]=basicProcessor});var canControl_4_4_3_canControl=canNamespace_1_0_0_canNamespace.Control=Control,paramReplacer$1=/\{([^\}]+)\}/g,ComponentControl=canControl_4_4_3_canControl.extend({_lookup:function(e){return[e.scope,e,window]},_removeDelegateFromKey:function(e){return e.replace(/^(scope|^viewModel)\./,"")},_isDelegate:function(e,t){return"scope"===t||"viewModel"===t},_getDelegate:function(e,t){return e[t]},_action:function(e,t,a){var n;return paramReplacer$1.lastIndex=0,n=paramReplacer$1.test(e),!a&&n?void 0:canControl_4_4_3_canControl._action.apply(this,arguments)}},{setup:function(e,t){return this.scope=t.scope,this.viewModel=t.viewModel,canControl_4_4_3_canControl.prototype.setup.call(this,e,t)},off:function(){this._bindings&&canReflect_1_18_0_canReflect.eachKey(this._bindings.readyComputes||{},function(e){canReflect_1_18_0_canReflect.offValue(e.compute,e.handler)}),canControl_4_4_3_canControl.prototype.off.apply(this,arguments),this._bindings.readyComputes={}},destroy:function(){canControl_4_4_3_canControl.prototype.destroy.apply(this,arguments),"function"==typeof this.options.destroy&&this.options.destroy.apply(this,arguments)}}),control=ComponentControl;canStache_4_17_21_canStache.addBindings(canStacheBindings_4_10_9_canStacheBindings);var createdByCanComponentSymbol=canSymbol_1_6_5_canSymbol("can.createdByCanComponent"),getValueSymbol$3=canSymbol_1_6_5_canSymbol.for("can.getValue"),setValueSymbol$4=canSymbol_1_6_5_canSymbol.for("can.setValue"),viewInsertSymbol$2=canSymbol_1_6_5_canSymbol.for("can.viewInsert"),viewModelSymbol$2=canSymbol_1_6_5_canSymbol.for("can.viewModel"),noop$2=function(){};function addContext(e,t,a){var n,r;canDomData_1_0_3_canDomData.set(e,"preventDataBindings",!0);var s=canStacheBindings_4_10_9_canStacheBindings.behaviors.viewModel(e,a,function(e,a,s){return s&&!0===s.isSettingOnViewModel?(r=t.scope.addLetContext(e),r._context):n=new canSimpleObservable_2_5_0_canSimpleObservable(e)},void 0,!0);return s?canAssign_1_3_3_canAssign(canAssign_1_3_3_canAssign({},t),{teardown:s,scope:r||t.scope.add(n)}):t}function makeReplacementTagCallback(e,t,a,n,r){var s=a.options;return function a(o,i){var l=r(o)||i.subtemplate,d=l!==i.subtemplate;if(l){delete s.tags[e];var p=d?n.toLightContent?addContext(o,{scope:i.scope.cloneFromRef(),options:i.options},i):addContext(o,t,i):addContext(o,i,i);var c=canViewNodelist_4_3_4_canViewNodelist.register([o],p.teardown||noop$2,i.parentNodeList||!0,i.directlyNested);c.expression="<can-slot name='"+o.getAttribute("name")+"'/>";var u=l(p.scope,p.options,c),y=canReflect_1_18_0_canReflect.toArray(canChildNodes_1_2_1_canChildNodes(u)),h=canViewNodelist_4_3_4_canViewNodelist.update(c,y);canViewNodelist_4_3_4_canViewNodelist.replace(h,u),s.tags[e]=a}}}function getSetupFunctionForComponentVM(e){return canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(t,a,n,r){var s={element:t,scope:a.scope,parentNodeList:a.parentNodeList,viewModel:void 0},o={},i=[];canReflect_1_18_0_canReflect.eachKey(e,function(e,t){var a=null!=e&&!!e[getValueSymbol$3],n=null!=e&&!!e[setValueSymbol$4];if(!0==a||n){var l=canStacheBindings_4_10_9_canStacheBindings.getObservableFrom.viewModel({name:t},s,o),d=new canBind_1_5_1_canBind({child:l,parent:e,queue:"domUI"});i.push({binding:d,siblingBindingData:{parent:{source:"scope",exports:a},child:{source:"viewModel",exports:n,name:t}}})}else r[t]=e});var l=canStacheBindings_4_10_9_canStacheBindings.behaviors.initializeViewModel(i,r,function(e){return s.viewModel=n(e)},s);return function(){for(var e in l.onTeardowns)l.onTeardowns[e]()}})}var Component=canConstruct_3_5_6_canConstruct.extend({setup:function(){if(canConstruct_3_5_6_canConstruct.setup.apply(this,arguments),Component){var e=this;void 0!==this.prototype.events&&0!==canReflect_1_18_0_canReflect.size(this.prototype.events)&&(this.Control=control.extend(this.prototype.events));var t=this.prototype.viewModel||this.prototype.scope;if(t&&this.prototype.ViewModel)throw new Error("Cannot provide both a ViewModel and a viewModel property");var a=canString_1_1_0_canString.capitalize(canString_1_1_0_canString.camelize(this.prototype.tag))+"VM";if(this.prototype.ViewModel?"function"==typeof this.prototype.ViewModel?this.ViewModel=this.prototype.ViewModel:this.ViewModel=map$2.extend(a,{},this.prototype.ViewModel):t?"function"==typeof t?canReflect_1_18_0_canReflect.isObservableLike(t.prototype)&&canReflect_1_18_0_canReflect.isMapLike(t.prototype)?this.ViewModel=t:this.viewModelHandler=t:canReflect_1_18_0_canReflect.isObservableLike(t)&&canReflect_1_18_0_canReflect.isMapLike(t)?this.viewModelInstance=t:(canLog_1_0_2_canLog.warn("can-component: "+this.prototype.tag+" is extending the viewModel into a can-simple-map"),this.ViewModel=canSimpleMap_4_3_2_canSimpleMap.extend(a,{},t)):this.ViewModel=canSimpleMap_4_3_2_canSimpleMap.extend(a,{},{}),this.prototype.template&&(this.view=this.prototype.template),this.prototype.view&&(this.view=this.prototype.view),"string"==typeof this.view){var n=canString_1_1_0_canString.capitalize(canString_1_1_0_canString.camelize(this.prototype.tag))+"View";this.view=canStache_4_17_21_canStache(n,this.view)}this.renderer=this.view;var r=function(t,a){void 0===t[createdByCanComponentSymbol]&&new e(t,a)};canViewCallbacks_4_4_1_canViewCallbacks.tag(this.prototype.tag,r)}}},{setup:function(e,t){this._initialArgs=[e,t];var a=this,n={helpers:{},tags:{}};if(void 0===t&&(void 0===e?t={}:(t=e,e=void 0)),void 0===e&&(e=document$1().createElement(this.tag),e[createdByCanComponentSymbol]=!0),this.element=e,!1===t.initializeBindings&&!this._skippedSetup)return this._skippedSetup=this._torndown=!0,void(this.viewModel=Object.create(null));var r=t.content;void 0!==r&&("function"==typeof r?t.subtemplate=r:"string"==typeof r&&(t.subtemplate=canStache_4_17_21_canStache(r)));var s=t.scope;void 0!==s&&!1==s instanceof canViewScope_4_13_6_canViewScope&&(t.scope=new canViewScope_4_13_6_canViewScope(s));var o=t.templates;void 0!==o&&canReflect_1_18_0_canReflect.eachKey(o,function(e,t){if("string"==typeof e){o[t]=canStache_4_17_21_canStache(t+" template",e)}});var i=canDomData_1_0_3_canDomData.get(e,"preventDataBindings"),l,d;if(i)l=e[viewModelSymbol$2];else{var p;p=t.setupBindings?function(e,t,a,n){return t.setupBindings(e,a,n)}:t.viewModel?getSetupFunctionForComponentVM(t.viewModel):canStacheBindings_4_10_9_canStacheBindings.behaviors.viewModel,d=p(e,t,function(n){var r=a.constructor.ViewModel,s=a.constructor.viewModelHandler,o=a.constructor.viewModelInstance;if(s){var i=s.call(a,n,t.scope,e);canReflect_1_18_0_canReflect.isObservableLike(i)&&canReflect_1_18_0_canReflect.isMapLike(i)?o=i:canReflect_1_18_0_canReflect.isObservableLike(i.prototype)&&canReflect_1_18_0_canReflect.isMapLike(i.prototype)?r=i:r=canSimpleMap_4_3_2_canSimpleMap.extend(i)}return r&&(o=new r(n)),l=o,o},{})}this.viewModel=l,e[viewModelSymbol$2]=l,e.viewModel=l,canDomData_1_0_3_canDomData.set(e,"preventDataBindings",!0);var c=[],u=function(){for(var e=0,t=c.length;e<t;e++)c[e]()};if(void 0!==this.helpers&&canReflect_1_18_0_canReflect.eachKey(this.helpers,function(e,t){"function"==typeof e&&(n.helpers[t]=e.bind(l))}),this.constructor.Control)this._control=new this.constructor.Control(e,{scope:this.viewModel,viewModel:this.viewModel,destroy:u});else var y=canDomMutate_1_3_11_canDomMutate.onNodeRemoval(e,function(){var t=e.ownerDocument,a=t.contains?t:t.documentElement;a&&a.contains(e)||!y||(x=!0,y(),u(),y=null,u=null)});var h={toLightContent:!0===this.leakScope,intoShadowContent:!0===this.leakScope},g=!!this.constructor.view,m,f,b;if(g){var v;v=h.intoShadowContent?{scope:t.scope.add(this.viewModel,{viewModel:!0}),options:n}:{scope:new canViewScope_4_13_6_canViewScope(this.viewModel,null,{viewModel:!0}),options:n},n.tags["can-slot"]=makeReplacementTagCallback("can-slot",t,v,h,function(e){var a=t.templates;if(a)return a[e.getAttribute("name")]}),n.tags.content=makeReplacementTagCallback("content",t,v,h,function(){return t.subtemplate}),f=this.constructor.view,b=v}else{var k={scope:t.scope.add(this.viewModel,{viewModel:!0}),options:n};b=k,f=t.subtemplate||e.ownerDocument.createDocumentFragment.bind(e.ownerDocument)}var L=canViewNodelist_4_3_4_canViewNodelist.register([],function(){y&&!x&&(y(),u(),y=null,u=null),a._torndown=!0,canDomEvents_1_3_11_canDomEvents.dispatch(e,"beforeremove",!1),d&&d(),S?S(e):"function"==typeof l.stopListening&&l.stopListening(),E&&(E(),E=null)},t.parentNodeList||!0,!1),S,E,V,x;if(L.expression="<"+this.tag+">",c.push(function(){canViewNodelist_4_3_4_canViewNodelist.unregister(L)}),this.nodeList=L,m=f(b.scope,b.options,L),canDomMutate_1_3_11_node.appendChild.call(e,m),canViewNodelist_4_3_4_canViewNodelist.update(L,canChildNodes_1_2_1_canChildNodes(e)),l&&l.connectedCallback){var I=document$1().body;V=I&&I.contains(e),V?S=l.connectedCallback(e):E=canDomMutate_1_3_11_canDomMutate.onNodeInsertion(e,function(){E(),E=null,S=l.connectedCallback(e)})}a._torndown=!1}});Component.prototype[viewInsertSymbol$2]=function(e){return this._torndown&&this.setup.apply(this,this._initialArgs),e.nodeList.newDeepChildren.push(this.nodeList),this.element};var canComponent_4_6_2_canComponent=canNamespace_1_0_0_canNamespace.Component=Component,Compute$1=function(e){return arguments.length?canReflect_1_18_0_canReflect.setValue(this,e):canReflect_1_18_0_canReflect.getValue(this)},translationHelpers=new WeakMap,makeCompute=function(e){var t=Compute$1.bind(e);return t.on=t.bind=t.addEventListener=function(a,n){var r=translationHelpers.get(n);r||(r=function(e,a){n.call(t,{type:"change"},e,a)},translationHelpers.set(n,r)),canReflect_1_18_0_canReflect.onValue(e,r)},t.off=t.unbind=t.removeEventListener=function(t,a){canReflect_1_18_0_canReflect.offValue(e,translationHelpers.get(a))},canReflect_1_18_0_canReflect.assignSymbols(t,{"can.getValue":function(){return canReflect_1_18_0_canReflect.getValue(e)},"can.setValue":function(t){return canReflect_1_18_0_canReflect.setValue(e,t)},"can.onValue":function(t,a){return canReflect_1_18_0_canReflect.onValue(e,t,a)},"can.offValue":function(t,a){return canReflect_1_18_0_canReflect.offValue(e,t,a)},"can.valueHasDependencies":function(){return canReflect_1_18_0_canReflect.valueHasDependencies(e)},"can.getPriority":function(){return canReflect_1_18_0_canReflect.getPriority(e)},"can.setPriority":function(t){canReflect_1_18_0_canReflect.setPriority(e,t)},"can.isValueLike":!0,"can.isFunctionLike":!1}),t.isComputed=!0,t};function stringify(e){return e&&"object"==typeof e?("serialize"in e?e=e.serialize():"function"==typeof e.slice?e=e.slice():canReflect_1_18_0_canReflect.assign({},e),canReflect_1_18_0_canReflect.eachKey(e,function(t,a){e[a]=stringify(t)})):void 0!==e&&null!==e&&"function"==typeof e.toString&&(e=e.toString()),e}function stringCoercingMapDecorator(e){var t=canSymbol_1_6_5_canSymbol.for("can.route.stringCoercingMapDecorator");if(!e.attr[t]){var a=e.attr;e.attr=function(e){var t="string"==typeof e&&(void 0===this.define||void 0===this.define[e]||!!this.define[e].serialize),n;return n=t?stringify(Array.apply(null,arguments)):arguments,a.apply(this,n)},canReflect_1_18_0_canReflect.setKeyValue(e.attr,t,!0)}return e}var stringCoercingMapDecorator_1=stringCoercingMapDecorator,stringify_1=stringify,stringCoercion={stringCoercingMapDecorator:stringCoercingMapDecorator_1,stringify:stringify_1},stringify$1=stringCoercion.stringify,routedata=map$2.extend("RouteData",{seal:!1},{"*":{type:stringify$1}}),urlDataObservable=new canSimpleObservable_2_5_0_canSimpleObservable(null);canReflect_1_18_0_canReflect.setName(urlDataObservable,"route.urlData");var bindingProxy={defaultBinding:null,urlDataObservable:urlDataObservable,bindings:{},call:function(){var e=canReflect_1_18_0_canReflect.toArray(arguments),t=e.shift(),a=urlDataObservable.value;if(null===a)throw new Error("there is no current binding!!!");var n=a[0===t.indexOf("can.")?canSymbol_1_6_5_canSymbol.for(t):t];return n.apply?n.apply(a,e):n}},bindingProxy_1=bindingProxy,regexps={curlies:/\{\s*([\w.]+)\s*\}/g,colon:/\:([\w.]+)/g},map$3=function(e,t){var a=[],n;for(var r in n=canReflect_1_18_0_canReflect.assignMap({},e),canReflect_1_18_0_canReflect.eachKey(t,function(r,s){e&&e.hasOwnProperty(s)?t[s]!==e[s]&&a.push({key:s,type:"set",value:r}):a.push({key:s,type:"add",value:r}),delete n[s]}),n)a.push({key:r,type:"delete"});return a};function removeBackslash(e){return e.replace(/\\/g,"")}function wrapQuote(e){return(e+"").replace(/([.?*+\^$\[\]\\(){}|\-])/g,"\\$1")}var RouteRegistry={routes:{},register:function(e,t){var a=bindingProxy_1.call("root");a.lastIndexOf("/")===a.length-1&&0===e.indexOf("/")&&(e=e.substr(1));var n;n=regexps.colon.test(e)?regexps.colon:regexps.curlies,t=t||{};for(var r=n.lastIndex=0,s=[],o="",i=bindingProxy_1.call("querySeparator"),l=bindingProxy_1.call("matchSlashes"),d,p;d=n.exec(e);)s.push(d[1]),o+=removeBackslash(e.substring(r,n.lastIndex-d[0].length)),p="\\"+(removeBackslash(e.substr(n.lastIndex,1))||i+(l?"":"|/")),o+="([^"+p+"]"+(t[d[1]]?"*":"+")+")",r=n.lastIndex;if(o+=removeBackslash(e.substr(r)),this.data instanceof routedata){var c=this.data,u=function(e){var a="string",n=t[e];null!=n&&(a=typeof n),canReflect_1_18_0_canReflect.defineInstanceKey(c.constructor,e,{type:a})};canReflect_1_18_0_canReflect.eachIndex(s,u),canReflect_1_18_0_canReflect.eachKey(t,function(e,t){u(t)})}return RouteRegistry.routes[e]={test:new RegExp("^"+o+"($|"+wrapQuote(i)+")"),route:e,names:s,defaults:t,length:e.split("/").length}}},register=RouteRegistry,digitTest=/^\d+$/,keyBreaker=/([^\[\]]+)|(\[\])/g,paramTest=/([^?#]*)(#.*)?$/,entityRegex=/%([^0-9a-f][0-9a-f]|[0-9a-f][^0-9a-f]|[^0-9a-f][^0-9a-f])/i,prep=function(t){t=t.replace(/\+/g," ");try{return decodeURIComponent(t)}catch(a){return decodeURIComponent(t.replace(entityRegex,function(e,t){return"%25"+t}))}};function isArrayLikeName(e){return digitTest.test(e)||"[]"===e}function idenity(e){return e}var canDeparam_1_2_1_canDeparam=canNamespace_1_0_0_canNamespace.deparam=function(e,t){t=t||idenity;var a={},n,r;return e&&paramTest.test(e)&&(n=e.split("&"),n.forEach(function(e){var n=e.split("="),s=prep(n.shift()),o=prep(n.join("=")),i=a;if(s){n=s.match(keyBreaker);for(var d=0,p=n.length-1;d<p;d++){var l=n[d],c=n[d+1],u=isArrayLikeName(l)&&i instanceof Array;i[l]||(u?i.push(isArrayLikeName(c)?[]:{}):i[l]=isArrayLikeName(c)?[]:{}),i=u?i[i.length-1]:i[l]}r=n.pop(),isArrayLikeName(r)?i.push(t(o)):i[r]=t(o)}})),a};function decode(e){try{return decodeURIComponent(e)}catch(t){return unescape(e)}}function toURLFragment(e){var t=bindingProxy_1.call("root");return t.lastIndexOf("/")===t.length-1&&0===e.indexOf("/")&&(e=e.substr(1)),e}function canRoute_getRule(e){e=toURLFragment(e);var t={length:-1};if(canReflect_1_18_0_canReflect.eachKey(register.routes,function(a){a.test.test(e)&&a.length>t.length&&(t=a)}),-1<t.length)return t}function canRoute_deparam(e){var t=canRoute_getRule(e),a=bindingProxy_1.call("querySeparator"),n=bindingProxy_1.call("paramsMatcher");if(e=toURLFragment(e),t){var r=e.match(t.test),s=r.shift(),o=e.substr(s.length-(r[r.length-1]===a?1:0)),l=o&&n.test(o)?canDeparam_1_2_1_canDeparam(o.slice(1)):{};return l=canReflect_1_18_0_canReflect.assignDeep(canReflect_1_18_0_canReflect.assignDeep({},t.defaults),l),r.forEach(function(e,n){e&&e!==a&&(l[t.names[n]]=decode(e))}),l}return e.charAt(0)!==a&&(e=a+e),n.test(e)?canDeparam_1_2_1_canDeparam(e.slice(1)):{}}canRoute_deparam.getRule=canRoute_getRule;var deparam_1=canRoute_deparam;function buildParam(e,t,a){if(Array.isArray(t))for(var n=0,r=t.length;n<r;++n){var s=t[n],o="object"==typeof s?"["+n+"]":"[]";buildParam(e+o,s,a)}else if(t&&"object"==typeof t)for(var l in t)buildParam(e+"["+l+"]",t[l],a);else a(e,t)}var canParam_1_1_2_canParam=canNamespace_1_0_0_canNamespace.param=function(e){var t=[],a=function(e,a){t.push(encodeURIComponent(e)+"="+encodeURIComponent(a))};for(var n in e)buildParam(n,e[n],a);return t.join("&").replace(/%20/g,"+")};function matchesData(e,t){var a=0,n={};for(var r in e.defaults)e.defaults[r]===t[r]&&(n[r]=1,a++);for(var s=0;s<e.names.length;s++){if(!t.hasOwnProperty(e.names[s]))return-1;n[e.names[s]]||a++}return a}function getMatchedRoute(e,t){var a=0,n=0,r,s;return delete e.route,canReflect_1_18_0_canReflect.eachKey(e,function(){n++}),canReflect_1_18_0_canReflect.eachKey(register.routes,function(t){if(s=matchesData(t,e),s>a&&(r=t,a=s),s>=n)return!1}),register.routes[t]&&matchesData(register.routes[t],e)===a&&(r=register.routes[t]),r}function paramFromRoute(e,t){var a,n,r,s;return e?(a=canReflect_1_18_0_canReflect.assignMap({},t),s=regexps.colon.test(e.route)?regexps.colon:regexps.curlies,n=e.route.replace(s,function(n,r){return delete a[r],t[r]===e.defaults[r]?"":encodeURIComponent(t[r])}).replace("\\",""),canReflect_1_18_0_canReflect.eachKey(e.defaults,function(e,t){a[t]===e&&delete a[t]}),r=canParam_1_1_2_canParam(a),n+(r?bindingProxy_1.call("querySeparator")+r:"")):0===canReflect_1_18_0_canReflect.size(t)?"":bindingProxy_1.call("querySeparator")+canParam_1_1_2_canParam(t)}function canRoute_param(e,t){return paramFromRoute(getMatchedRoute(e,t),e)}var param_1=canRoute_param;canRoute_param.paramFromRoute=paramFromRoute,canRoute_param.getMatchedRoute=getMatchedRoute;function formatAttributes(e){var t=[];return canReflect_1_18_0_canReflect.eachKey(e,function(e,a){var n="className"===a?"class":a,r="href"===a?e:canString_1_1_0_canString.esc(e);t.push(n+"=\""+r+"\"")}),t.join(" ")}function matchCheck(e,t){for(var a in e){var n=e[a],r=t[a];if(n&&r&&"object"==typeof n&&"object"==typeof t)return matchCheck(n,r);if(n!=r)return!1}return!0}function canRoute_url(e,t){if(t){var a=deparam_1(bindingProxy_1.call("can.getValue"));e=canReflect_1_18_0_canReflect.assignMap(canReflect_1_18_0_canReflect.assignMap({},a),e)}return bindingProxy_1.call("root")+param_1(e)}var urlHelpers={url:canRoute_url,link:function(e,t,a,n){return"<a "+formatAttributes(canReflect_1_18_0_canReflect.assignMap({href:canRoute_url(t,n)},a))+">"+e+"</a>"},isCurrent:function(e,t){var a=bindingProxy_1.call("can.getValue");if(t){var n=deparam_1(a);return matchCheck(e,n)}return a===param_1(e)}},paramsMatcher=/^(?:&[^=]+=[^&]*)+/;function getHash(){var e=location_1();return e.href.split(/#!?/)[1]||""}function HashchangeObservable(){var e=this.dispatchHandlers.bind(this),t=this;this._value="",this.handlers=new canKeyTree_1_2_2_canKeyTree([Object,Array],{onFirst:function(){t._value=getHash(),canDomEvents_1_3_11_canDomEvents.addEventListener(window,"hashchange",e)},onEmpty:function(){canDomEvents_1_3_11_canDomEvents.removeEventListener(window,"hashchange",e)}})}HashchangeObservable.prototype=Object.create(canSimpleObservable_2_5_0_canSimpleObservable.prototype),HashchangeObservable.constructor=HashchangeObservable,canReflect_1_18_0_canReflect.assign(HashchangeObservable.prototype,{paramsMatcher:paramsMatcher,querySeparator:"&",matchSlashes:!1,root:"#!",dispatchHandlers:function(){var e=this._value;this._value=getHash(),e!==this._value&&canQueues_1_3_1_canQueues.enqueueByQueue(this.handlers.getNode([]),this,[this._value,e])},get:function(){return canObservationRecorder_1_3_1_canObservationRecorder.add(this),getHash()},set:function(e){var t=location_1();return(e||t.hash)&&(t.hash==="#"+e||(t.hash="!"+e)),e}}),Object.defineProperty(HashchangeObservable.prototype,"value",{get:function(){return canReflect_1_18_0_canReflect.getValue(this)},set:function(e){canReflect_1_18_0_canReflect.setValue(this,e)}}),canReflect_1_18_0_canReflect.assignSymbols(HashchangeObservable.prototype,{"can.getValue":HashchangeObservable.prototype.get,"can.setValue":HashchangeObservable.prototype.set,"can.onValue":HashchangeObservable.prototype.on,"can.offValue":HashchangeObservable.prototype.off,"can.isMapLike":!1,"can.valueHasDependencies":function(){return!0}});var canRouteHash_1_0_2_canRouteHash=HashchangeObservable,funcConstructor=Function;canGlobals_1_2_2_canGlobalsInstance.define("isWebWorker",function(){var e=funcConstructor("return this")();return"undefined"!=typeof WorkerGlobalScope&&e instanceof WorkerGlobalScope});var isWebWorker=canGlobals_1_2_2_canGlobalsInstance.makeExport("isWebWorker"),stringCoercingMapDecorator$1=stringCoercion.stringCoercingMapDecorator,hashchangeObservable=new canRouteHash_1_0_2_canRouteHash;bindingProxy_1.bindings.hashchange=hashchangeObservable,bindingProxy_1.defaultBinding="hashchange",bindingProxy_1.urlDataObservable.value=hashchangeObservable;function canRoute(e,t){return register.register(e,t),canRoute}var currentRuleObservable=new canObservation_4_2_0_canObservation(function(){var e=bindingProxy_1.call("can.getValue");return canRoute.rule(e)}),timer;function updateUrl(){clearTimeout(timer),timer=setTimeout(function(){var e=canReflect_1_18_0_canReflect.serialize(canRoute.data),t=currentRuleObservable.get(),a=param_1.getMatchedRoute(e,t),n=param_1.paramFromRoute(a,e);bindingProxy_1.call("can.setValue",n);var r=canRoute._onStartComplete;r&&(canRoute._onStartComplete=void 0,r())},10)}function updateRouteData(){var e=bindingProxy_1.call("can.getValue");canQueues_1_3_1_canQueues.batch.start();var t=canRoute.deparam(e);delete t.route,canReflect_1_18_0_canReflect.update(canRoute.data,t),canQueues_1_3_1_canQueues.batch.stop()}Object.defineProperty(canRoute,"routes",{get:function(){return register.routes},set:function(e){return register.routes=e}}),Object.defineProperty(canRoute,"defaultBinding",{get:function(){return bindingProxy_1.defaultBinding},set:function(e){bindingProxy_1.defaultBinding=e;var t=bindingProxy_1.bindings[bindingProxy_1.defaultBinding];t&&(bindingProxy_1.urlDataObservable.value=t)}}),Object.defineProperty(canRoute,"urlData",{get:function(){return bindingProxy_1.urlDataObservable.value},set:function(e){canRoute._teardown(),bindingProxy_1.urlDataObservable.value=e}}),canReflect_1_18_0_canReflect.assignMap(canRoute,{param:param_1,deparam:deparam_1,map:function(e){canRoute.data=e},start:function(e){if(!0!==e&&(canRoute._setup(),isBrowserWindow()||isWebWorker())){var t=bindingProxy_1.call("can.getValue");canQueues_1_3_1_canQueues.batch.start();var a=canRoute.deparam(t);delete a.route,canReflect_1_18_0_canReflect.assign(canRoute.data,a),canQueues_1_3_1_canQueues.batch.stop(),updateUrl()}return canRoute},url:urlHelpers.url,link:urlHelpers.link,isCurrent:urlHelpers.isCurrent,bindings:bindingProxy_1.bindings,_setup:function(){if(!canRoute._canBinding){var e={parent:bindingProxy_1.urlDataObservable.value,setParent:updateUrl,child:canRoute.serializedObservation,setChild:updateRouteData,onInitDoNotUpdateChild:!0,cycles:1,queue:"notify"};canRoute._canBinding=new canBind_1_5_1_canBind(e),canRoute._canBinding.start()}},_teardown:function(){canRoute._canBinding&&(canRoute._canBinding.stop(),canRoute._canBinding=null),clearTimeout(timer)},stop:function(){return this._teardown(),canRoute},currentRule:makeCompute(currentRuleObservable),register:register.register,rule:function(e){var t=deparam_1.getRule(e);if(t)return t.route}});var bindToCanRouteData=function(e,t){return canRoute.data[e]?canRoute.data[e].apply(canRoute.data,t):canRoute.data.addEventListener.apply(canRoute.data,t)};["addEventListener","removeEventListener","bind","unbind","on","off"].forEach(function(e){canRoute[e]=function(t,a){return"__url"===t?bindingProxy_1.call("can.onValue",a):bindToCanRouteData(e,arguments)}}),["delegate","undelegate","removeAttr","compute","_get","___get","each"].forEach(function(e){canRoute[e]=function(){return bindToCanRouteData(e,arguments)}});var routeData,serializedObservation,serializedCompute;function setRouteData(e){return routeData=e,routeData}Object.defineProperty(canRoute,"serializedObservation",{get:function(){return serializedObservation||(serializedObservation=new canObservation_4_2_0_canObservation(function(){return canReflect_1_18_0_canReflect.serialize(canRoute.data)})),serializedObservation}}),Object.defineProperty(canRoute,"serializedCompute",{get:function(){return serializedCompute||(serializedCompute=makeCompute(canRoute.serializedObservation)),serializedCompute}});var viewModelSymbol$3=canSymbol_1_6_5_canSymbol.for("can.viewModel");Object.defineProperty(canRoute,"data",{get:function(){return routeData?routeData:setRouteData(new routedata)},set:function(e){canReflect_1_18_0_canReflect.isConstructorLike(e)&&(e=new e),e&&e[viewModelSymbol$3]!==void 0&&(e=e[viewModelSymbol$3]),"attr"in e?setRouteData(stringCoercingMapDecorator$1(e)):setRouteData(e)}}),canRoute.attr=function(e,t){return console.warn("can-route: can-route.attr is deprecated. Use methods on can-route.data instead."),"attr"in canRoute.data?canRoute.data.attr.apply(canRoute.data,arguments):1<arguments.length?(canReflect_1_18_0_canReflect.setKeyValue(canRoute.data,e,t),canRoute.data):"object"==typeof e?(canReflect_1_18_0_canReflect.assignDeep(canRoute.data,e),canRoute.data):1===arguments.length?canReflect_1_18_0_canReflect.getKeyValue(canRoute.data,e):canReflect_1_18_0_canReflect.unwrap(canRoute.data)},canReflect_1_18_0_canReflect.setKeyValue(canRoute,canSymbol_1_6_5_canSymbol.for("can.isFunctionLike"),!1),canRoute.matched=canRoute.currentRule,canRoute.current=canRoute.isCurrent;var canRoute_4_4_9_canRoute=canNamespace_1_0_0_canNamespace.route=canRoute,looksLikeOptions=core$2.looksLikeOptions,calculateArgs=function(){var e,t,a;return canReflect_1_18_0_canReflect.eachIndex(arguments,function(n){"boolean"==typeof n?t=n:n&&"object"==typeof n&&(looksLikeOptions(n)?a=n:e=core$2.resolveHash(n))}),!e&&a&&(e=core$2.resolveHash(a.hash)),{finalParams:e||{},finalMerge:t,optionsArg:a}},routeUrl=function(){var e=calculateArgs.apply(this,arguments);return canRoute_4_4_9_canRoute.url(e.finalParams,"boolean"==typeof e.finalMerge?e.finalMerge:void 0)};core$2.registerHelper("routeUrl",routeUrl);var routeCurrent=function(){var e=calculateArgs.apply(this,arguments),t=canRoute_4_4_9_canRoute.isCurrent(e.finalParams,"boolean"==typeof e.finalMerge?e.finalMerge:void 0);return e.optionsArg&&!(e.optionsArg instanceof expression_1.Call)?t?e.optionsArg.fn():e.optionsArg.inverse():t};routeCurrent.callAsMethod=!0,core$2.registerHelper("routeCurrent",routeCurrent);var canStacheRouteHelpers_1_2_1_canStacheRouteHelpers={routeUrl:routeUrl,routeCurrent:routeCurrent},sub=function(e,t,a){var n=[];return e=e||"",n.push(e.replace(canKey_1_2_1_utils.strReplacer,function(e,r){var s=get_1(t,r);return!0===a&&_delete(t,r),void 0===s||null===s?(n=null,""):!canReflect_1_18_0_canReflect.isPrimitive(s)&&n?(n.push(s),""):""+s})),null===n?n:1>=n.length?n[0]:n},addSerializeToThis=function(e){return canReflect_1_18_0_canReflect.assignSymbols(e,{"can.serialize":function(){return this}})},set$2;function reverseArgs(e){return function(t,a){return e.call(this,a,t)}}var setComparisonsSymbol=canSymbol_1_6_5_canSymbol.for("can.setComparisons");function addComparators(e,t,a){var n=e[setComparisonsSymbol];e[setComparisonsSymbol]||(n=e[setComparisonsSymbol]=new Map);var r=n.get(e);r||(r=new Map,n.set(e,r));var s=r.get(t);if(s)for(var o in a)s.hasOwnProperty(o)&&console.warn("Overwriting "+e.name+" "+o+" "+t.name+" comparitor"),s[o]=a[o];else r.set(t,a)}function Identity(){}var typeMap={number:Identity,string:Identity,undefined:Identity,boolean:Identity},get$1={};["intersection","difference","union"].forEach(function(e){get$1[e]=function(t,a,n){if(n===set$2.UNIVERSAL){if("intersection"===e)return a;if("union"===e)return set$2.UNIVERSAL;if("difference"===e)return set$2.EMPTY}if(a===set$2.UNIVERSAL){if("intersection"===e)return a;if("union"===e)return set$2.UNIVERSAL}if(t&&t[e]){var r=t[e](a,n);return void 0===r&&!0===t.undefinedIsEmptySet?set$2.EMPTY:r}throw new Error("Unable to perform "+e+" between "+set$2.getType(a).name+" and "+set$2.getType(n).name)}}),set$2={UNIVERSAL:canReflect_1_18_0_canReflect.assignSymbols({name:"UNIVERSAL"},{"can.serialize":function(){return this},"can.isMember":function(){return!0}}),EMPTY:canReflect_1_18_0_canReflect.assignSymbols({name:"EMPTY"},{"can.serialize":function(){return this},"can.isMember":function(){return!1}}),UNDEFINABLE:addSerializeToThis({name:"UNDEFINABLE"}),UNKNOWABLE:addSerializeToThis({name:"UNKNOWABLE"}),Identity:Identity,isSpecial:function(e){return e===set$2.UNIVERSAL||e===set$2.EMPTY||e===set$2.UNDEFINABLE||e===set$2.UNKNOWABLE},isDefinedAndHasMembers:function(e){return!(e===set$2.EMPTY||e===set$2.UNDEFINABLE||e===set$2.UNKNOWABLE)&&!!e},getType:function(e){return e===set$2.UNIVERSAL?set$2.UNIVERSAL:e===set$2.EMPTY?set$2.EMPTY:e===set$2.UNKNOWABLE?set$2.UNKNOWABLE:null===e?Identity:typeMap.hasOwnProperty(typeof e)?typeMap[typeof e]:e.constructor},ownAndMemberValue:function(e,t){if(null!=e||null!=t){var a=null==e?e:e.valueOf(),n=null==t?t:t.valueOf();return null==e||null==t?{own:a,member:n}:((null==a||a.constructor!==n.constructor)&&(n=new e.constructor(n).valueOf()),{own:a,member:n})}return{own:t,member:e}},getComparisons:function(e,t){var a=e[setComparisonsSymbol];if(a){var n=a.get(e);if(n)return n.get(t)}},hasComparisons:function(e){return!!e[setComparisonsSymbol]},defineComparison:function(e,t,a){if(addComparators(e,t,a),e!==t){var n={};for(var r in a)"difference"!=r&&(n[r]=reverseArgs(a[r]));addComparators(t,e,n)}},isSubset:function(e,t){if(e===t)return!0;var a=set$2.getType(e),n=set$2.getType(t),r=set$2.getComparisons(a,n);if(r){var s=get$1.intersection(r,e,t),o=get$1.difference(r,e,t);return s===set$2.UNKNOWABLE||o===set$2.UNKNOWABLE?void 0:s!==set$2.EMPTY&&o===set$2.EMPTY}throw new Error("Unable to perform subset comparison between "+a.name+" and "+n.name)},isProperSubset:function(e,t){return set$2.isSubset(e,t)&&!set$2.isEqual(e,t)},isEqual:function(e,t){if(e===set$2.UNKNOWABLE||t===set$2.UNKNOWABLE)return set$2.UNKNOWABLE;var a=set$2.isSpecial(e),n=set$2.isSpecial(t);if(a&&n)return a===n;var r=set$2.getType(e),s=set$2.getType(t);if(e===t)return!0;var o=set$2.getComparisons(r,s),i=set$2.getComparisons(s,r);if(o&&i){var l=get$1.intersection(o,e,t),d=get$1.difference(o,e,t);if(l!==set$2.EMPTY&&d===set$2.EMPTY){var p=get$1.intersection(i,t,e),c=get$1.difference(i,t,e);return p!==set$2.EMPTY&&c===set$2.EMPTY}return!1}var u=set$2.ownAndMemberValue(e,t);if(canReflect_1_18_0_canReflect.isPrimitive(u.own)&&canReflect_1_18_0_canReflect.isPrimitive(u.member))return u.own===u.member;throw new Error("Unable to perform equal comparison between "+r.name+" and "+s.name)},union:function(e,t){if(e===set$2.UNIVERSAL||t===set$2.UNIVERSAL)return set$2.UNIVERSAL;if(e===set$2.EMPTY)return t;if(t===set$2.EMPTY)return e;if(e===set$2.UNKNOWABLE||t===set$2.UNKNOWABLE)return set$2.UNKNOWABLE;var a=set$2.getType(e),n=set$2.getType(t),r=set$2.getComparisons(a,n);return get$1.union(r,e,t)},intersection:function(e,t){if(e===set$2.UNIVERSAL)return t;if(t===set$2.UNIVERSAL)return e;if(e===set$2.EMPTY||t===set$2.EMPTY)return set$2.EMPTY;if(e===set$2.UNKNOWABLE||t===set$2.UNKNOWABLE)return set$2.UNKNOWABLE;var a=set$2.getType(e),n=set$2.getType(t),r=set$2.getComparisons(a,n);if(r)return get$1.intersection(r,e,t);throw new Error("Unable to perform intersection comparison between "+a.name+" and "+n.name)},difference:function(e,t){if(e===set$2.EMPTY)return set$2.EMPTY;if(t===set$2.EMPTY)return e;if(e===set$2.UNKNOWABLE||t===set$2.UNKNOWABLE)return set$2.UNKNOWABLE;var a=set$2.getType(e),n=set$2.getType(t),r=set$2.getComparisons(a,n);if(r)return get$1.difference(r,e,t);throw new Error("Unable to perform difference comparison between "+a.name+" and "+n.name)},indexWithEqual:function(e,t){for(var a=0,n=e.length;a<n;a++)if(set$2.isEqual(e[a],t))return a;return-1}};function identityIntersection(e,t){return e===t?e:set$2.EMPTY}function identityDifference(e,t){return e===t?set$2.EMPTY:e}function identityUnion(e,t){return e===t?e:set$2.UNDEFINABLE}var identityComparitor={intersection:identityIntersection,difference:identityDifference,union:identityUnion};set$2.defineComparison(Identity,Identity,identityComparitor),set$2.defineComparison(set$2.UNIVERSAL,set$2.UNIVERSAL,identityComparitor);var set_1$1=set$2,replacer=/\{([^\}]+)\}/g,canFixture_3_1_7_dataFromUrl=function(e,t){if(!e)return{};var a=[],n=e.replace(".","\\.").replace("?","\\?"),r=new RegExp(n.replace(replacer,function(e,t){return a.push(t),"([^/]+)"})+"$").exec(t),s={};return r?(r.shift(),a.forEach(function(e){s[e]=r.shift()}),s):null};function getValue(e){return null==e?e:e.valueOf()}var arrayUnionIntersectionDifference=function(e,t){var a=new Set,n=[],r=[],s=e.slice(0);return e.forEach(function(e){a.add(getValue(e)),r.push(e)}),t.forEach(function(e){if(a.has(getValue(e))){n.push(e);var t=set_1$1.indexWithEqual(s,e);-1!==t&&s.splice(t,1)}else r.push(e)}),{intersection:n,union:r,difference:s}};function isMemberThatUsesTestOnValues(e){return this.constructor.test(this.values,e)}var isMemberThatUsesTestOnValues_1=isMemberThatUsesTestOnValues,comparisonsCommon={isMemberThatUsesTestOnValues:isMemberThatUsesTestOnValues_1},types={};function NotIdentity(e){this.value=e}var Identity$1=set_1$1.Identity;set_1$1.defineComparison(set_1$1.UNIVERSAL,Identity$1,{difference:function(e,t){return new NotIdentity(t)}}),set_1$1.defineComparison(set_1$1.UNIVERSAL,NotIdentity,{difference:function(e,t){return t.value}}),set_1$1.defineComparison(NotIdentity,NotIdentity,{}),set_1$1.defineComparison(NotIdentity,Identity$1,{union:function(e,t){if(set_1$1.isEqual(e.value,t))return set_1$1.UNIVERSAL;throw new Error("Not,Identity Union is not filled out")},intersection:function(e,t){return set_1$1.isEqual(!e.value,t)?t:set_1$1.EMPTY},difference:function(e,t){return set_1$1.isEqual(e.value,t)?e:set_1$1.UNDEFINABLE}}),set_1$1.defineComparison(Identity$1,NotIdentity,{difference:function(e,t){return set_1$1.isEqual(e,t.value)?e:set_1$1.UNDEFINABLE}}),NotIdentity.prototype.isMember=function(e){if(this.value&&"function"==typeof this.value.isMember)return!this.value.isMember(e);var t=set_1$1.ownAndMemberValue(this.value,e);return t.own!==t.member};var valuesNot=types.Not=NotIdentity,comparisons={All:function(e){this.values=e}};comparisons.All.prototype.isMember=comparisonsCommon.isMemberThatUsesTestOnValues;var is=comparisons;comparisons.All.test=function(e,t){return e.every(function(e){return t.some(function(t){var a=set_1$1.ownAndMemberValue(e,t);return a.own===a.member})})};function makeThrowCannotCompare(e,t,a){return function(){throw new Error("can-query-logic: Cannot perform "+e+" between "+t+" and "+a)}}function throwComparatorAllTypes(e,t){return{union:makeThrowCannotCompare("union",e,t),difference:makeThrowCannotCompare("difference",e,t),intersection:makeThrowCannotCompare("intersection",e,t)}}function throwComparatorDifference(e,t){return{difference:makeThrowCannotCompare("difference",e,t)}}var comparators={UNIVERSAL_All:{difference:function(e,t){return new valuesNot(t)}},All_UNIVERSAL:{difference:function(){return set_1$1.EMPTY}},All_All:{union:function(e,t){return new is.Or([e,t])}},In_All:throwComparatorDifference("In","All"),All_In:throwComparatorAllTypes("All","In"),NotIn_All:throwComparatorDifference("NotIn","All"),All_NotIn:throwComparatorAllTypes("All","NotIn"),GreaterThan_All:throwComparatorDifference("GreaterThan","All"),All_GreaterThan:throwComparatorAllTypes("All","GreaterThan"),GreaterThanEqual_All:throwComparatorDifference("GreaterThanEqual","All"),All_GreaterThanEqual:throwComparatorAllTypes("All","GreaterThanEqual"),LessThan_All:throwComparatorDifference("LessThan","All"),All_LessThan:throwComparatorAllTypes("All","LessThan"),LessThanEqual_All:throwComparatorDifference("LessThanEqual","All"),All_LessThanEqual:throwComparatorAllTypes("All","LessThanEqual"),All_And:throwComparatorDifference("All","And"),And_All:throwComparatorAllTypes("And","All"),All_Or:throwComparatorDifference("All","Or"),Or_All:throwComparatorAllTypes("Or","All")},comparisons_1=comparisons,comparators_1=comparators,arrayComparisons={comparisons:comparisons_1,comparators:comparators_1},isMemberSymbol$1=canSymbol_1_6_5_canSymbol.for("can.isMember"),comparisons$1=canReflect_1_18_0_canReflect.assign(arrayComparisons.comparisons,{In:function(e){this.values=e},NotIn:function(e){this.values=e},GreaterThan:function(e){this.value=e},GreaterThanEqual:function(e){this.value=e},LessThan:function(e){this.value=e},LessThanEqual:function(e){this.value=e},And:function(e){this.values=e},Or:function(e){this.values=e}});comparisons$1.Or.prototype.orValues=function(){return this.values},comparisons$1.In.test=function(e,t){return e.some(function(e){var a=set_1$1.ownAndMemberValue(e,t);return a.own===a.member})},comparisons$1.NotIn.test=function(e,t){return!comparisons$1.In.test(e,t)},comparisons$1.NotIn.testValue=function(e,t){return!comparisons$1.In.testValue(e,t)};function nullIsFalse(e){return function(t,a){return null!=t&&null!=a&&e(t,a)}}function nullIsFalseTwoIsOk(e){return function(t,a){return!(t!==a)||null!=t&&null!=a&&e(t,a)}}comparisons$1.GreaterThan.test=nullIsFalse(function(e,t){return e>t}),comparisons$1.GreaterThanEqual.test=nullIsFalseTwoIsOk(function(e,t){return e>=t}),comparisons$1.LessThan.test=nullIsFalse(function(e,t){return e<t}),comparisons$1.LessThanEqual.test=nullIsFalseTwoIsOk(function(e,t){return e<=t});function isMemberThatUsesTest(e){var t=set_1$1.ownAndMemberValue(this.value,e);return this.constructor.test(t.member,t.own)}[comparisons$1.GreaterThan,comparisons$1.GreaterThanEqual,comparisons$1.LessThan,comparisons$1.LessThanEqual,comparisons$1.LessThan].forEach(function(e){e.prototype.isMember=isMemberThatUsesTest}),[comparisons$1.In,comparisons$1.NotIn].forEach(function(e){e.prototype.isMember=comparisonsCommon.isMemberThatUsesTestOnValues}),comparisons$1.And.prototype.isMember=function(e){return this.values.every(function(t){return t.isMember(e)})},comparisons$1.Or.prototype.isMember=function(e){return this.values.some(function(t){return t.isMember(e)})},Object.keys(comparisons$1).forEach(function(e){comparisons$1[e].prototype[isMemberSymbol$1]=comparisons$1[e].prototype.isMember});var is$1=comparisons$1;function makeNot(e){return{test:function(t,a){return!e.test(t,a)}}}function makeEnum(e,t,n){return function(r,a){var s=arrayUnionIntersectionDifference(r.values,a.values);return s[e].length?new t(s[e]):n||set_1$1.EMPTY}}function swapArgs(e){return function(t,a){return e(a,t)}}function makeSecondValue(e,t){return function(a,n){return new e(n[t||"value"])}}function returnBiggerValue(e,t){return e.value<t.value?t:e}function returnSmallerValue(e,t){return e.value>t.value?t:e}function makeAndIf(e,t){return function(a,n){return e.test(a.value,n.value)?makeAnd([a,new t(n.value)]):set_1$1.EMPTY}}function make_InIfEqual_else_andIf(e,t){var n=makeAndIf(e,t);return function(e,t){return e.value===t.value?new is$1.In([e.value]):n(e,t)}}function make_filterFirstValueAgainstSecond(e,t,a){return function(n,r){var s=n.values.filter(function(t){return e.test(r,t)});return s.length?new t(s):a||set_1$1.EMPTY}}var isMemberTest={test:function(e,t){return e.isMember(t)}};function isOr(e){return e instanceof is$1.Or}function isAnd(e){return e instanceof is$1.And}function isAndOrOr(e){return isAnd(e)||isOr(e)}function combineFilterFirstValuesAgainstSecond(e){return function(t,a){var n=t.values.filter(function(t){return e.values.test(a,t)}),r;return r=e.complement?set_1$1.difference(set_1$1.UNIVERSAL,a):e.with?new e.with(a.value):a,n.length?e.combinedUsing([new e.arePut(n),r]):r}}function makeOrUnless(e,t){return function(a,n){return e.test(a.value,n.value)?t||set_1$1.UNIVERSAL:makeOr([a,n])}}function makeAndUnless(e,t){return function(a,n){return e.test(a.value,n.value)?t||set_1$1.EMPTY:makeAnd([a,n])}}function makeComplementSecondArgIf(e){return function(t,a){return e.test(t.value,a.value)?set_1$1.difference(set_1$1.UNIVERSAL,a):t}}function makeAnd(e){return comparisons$1.And?new comparisons$1.And(e):set_1$1.UNDEFINABLE}function makeOr(e){return comparisons$1.Or?new comparisons$1.Or(e):set_1$1.UNDEFINABLE}function combineValueWithRangeCheck(e,t,a){var n=new a(t.value),r=e.values.filter(function(e){return!n.isMember(e)});return r.length?r.length<e.values.length?makeOr([new is$1.In(r),n]):makeOr([e,t]):n}function makeOrWithInAndRange(e,t){if(t instanceof is$1.Or){var a=makeOrWithInAndRange(e,t.values[0]);if(!(a instanceof is$1.Or))return set_1$1.union(a,t.values[1]);var n=makeOrWithInAndRange(e,t.values[1]);return n instanceof is$1.Or?makeOr([e,t]):set_1$1.union(n,t.values[0])}return t instanceof is$1.GreaterThan?combineValueWithRangeCheck(e,t,is$1.GreaterThanEqual):t instanceof is$1.LessThan?combineValueWithRangeCheck(e,t,is$1.LessThanEqual):makeOr([e,t])}var In_RANGE={union:combineFilterFirstValuesAgainstSecond({values:makeNot(isMemberTest),arePut:is$1.In,combinedUsing:function(e){return makeOrWithInAndRange(e[0],e[1])}}),intersection:make_filterFirstValueAgainstSecond(isMemberTest,is$1.In,set_1$1.EMPTY),difference:make_filterFirstValueAgainstSecond(makeNot(isMemberTest),is$1.In,set_1$1.EMPTY)},RANGE_IN={difference:swapArgs(combineFilterFirstValuesAgainstSecond({values:isMemberTest,arePut:is$1.NotIn,combinedUsing:makeAnd}))},NotIn_RANGE=function(){return{union:make_filterFirstValueAgainstSecond(makeNot(isMemberTest),is$1.NotIn,set_1$1.UNIVERSAL),intersection:combineFilterFirstValuesAgainstSecond({values:isMemberTest,arePut:is$1.NotIn,combinedUsing:makeAnd}),difference:combineFilterFirstValuesAgainstSecond({values:makeNot(isMemberTest),arePut:is$1.NotIn,combinedUsing:makeAnd,complement:!0})}},RANGE_NotIn={difference:swapArgs(make_filterFirstValueAgainstSecond(isMemberTest,is$1.In,set_1$1.EMPTY))},RANGE_And_Union=function(e,t){var a=set_1$1.union(e,t.values[0]),n=set_1$1.union(e,t.values[1]);return isAndOrOr(a)||isAndOrOr(n)?new is$1.Or([e,t]):set_1$1.intersection(a,n)},RANGE_And_Intersection=function(e,t){var a=t.values[0],n=t.values[1],r=set_1$1.intersection(e,a),s=set_1$1.intersection(e,n);return r===set_1$1.EMPTY||s===set_1$1.EMPTY?set_1$1.EMPTY:isAndOrOr(r)?isAndOrOr(s)?new is$1.And([e,t]):new set_1$1.intersection(s,a):new set_1$1.intersection(r,n)},RANGE_And_Difference=function(e,t){var a=t.values[0],n=t.values[1],r=set_1$1.difference(e,a),s=set_1$1.difference(e,n);return r===set_1$1.EMPTY?s:s===set_1$1.EMPTY?r:new is$1.Or([r,s])},And_RANGE_Difference=function(e,t){var a=e.values[0],n=e.values[1],r=set_1$1.difference(a,t),s=set_1$1.difference(n,t);return set_1$1.intersection(r,s)},RANGE_Or={union:function(e,t){var a=t.values[0],n=t.values[1],r=set_1$1.union(e,a);if(!isAndOrOr(r))return set_1$1.union(r,n);var s=set_1$1.union(e,n);return isAndOrOr(s)?new is$1.Or([e,t]):set_1$1.union(a,s)},intersection:function(e,t){var a=t.values[0],n=t.values[1],r=set_1$1.intersection(e,a),s=set_1$1.intersection(e,n);return r===set_1$1.EMPTY?s:s===set_1$1.EMPTY?r:set_1$1.union(r,s)},difference:function(e,t){var a=t.values[0],n=t.values[1],r=set_1$1.difference(e,a),s=set_1$1.difference(e,n);return set_1$1.intersection(r,s)}},Or_RANGE={difference:function(e,t){var a=e.values[0],n=e.values[1],r=set_1$1.difference(a,t),s=set_1$1.difference(n,t);return set_1$1.union(r,s)}},comparators$1=canReflect_1_18_0_canReflect.assign(arrayComparisons.comparators,{In_In:{union:makeEnum("union",is$1.In),intersection:makeEnum("intersection",is$1.In),difference:makeEnum("difference",is$1.In)},UNIVERSAL_In:{difference:makeSecondValue(is$1.NotIn,"values")},In_NotIn:{union:swapArgs(makeEnum("difference",is$1.NotIn,set_1$1.UNIVERSAL)),intersection:makeEnum("difference",is$1.In),difference:makeEnum("intersection",is$1.In)},NotIn_In:{difference:makeEnum("union",is$1.NotIn)},In_GreaterThan:In_RANGE,GreaterThan_In:RANGE_IN,In_GreaterThanEqual:In_RANGE,GreaterThanEqual_In:RANGE_IN,In_LessThan:In_RANGE,LessThan_In:RANGE_IN,In_LessThanEqual:In_RANGE,LessThanEqual_In:RANGE_IN,In_And:In_RANGE,And_In:RANGE_IN,In_Or:In_RANGE,Or_In:RANGE_IN,NotIn_NotIn:{union:makeEnum("intersection",is$1.NotIn,set_1$1.UNIVERSAL),intersection:makeEnum("union",is$1.NotIn),difference:makeEnum("difference",is$1.In)},UNIVERSAL_NotIn:{difference:makeSecondValue(is$1.In,"values")},NotIn_GreaterThan:NotIn_RANGE(),GreaterThan_NotIn:RANGE_NotIn,NotIn_GreaterThanEqual:NotIn_RANGE(),GreaterThanEqual_NotIn:RANGE_NotIn,NotIn_LessThan:NotIn_RANGE(),LessThan_NotIn:RANGE_NotIn,NotIn_LessThanEqual:NotIn_RANGE(),LessThanEqual_NotIn:RANGE_NotIn,NotIn_And:NotIn_RANGE(),And_NotIn:RANGE_NotIn,NotIn_Or:NotIn_RANGE(),Or_NotIn:RANGE_NotIn,GreaterThan_GreaterThan:{union:returnSmallerValue,intersection:returnBiggerValue,difference:makeAndIf(is$1.LessThan,is$1.LessThanEqual)},UNIVERSAL_GreaterThan:{difference:makeSecondValue(is$1.LessThanEqual)},GreaterThan_GreaterThanEqual:{union:returnSmallerValue,intersection:returnBiggerValue,difference:makeAndIf(is$1.LessThan,is$1.LessThan)},GreaterThanEqual_GreaterThan:{difference:make_InIfEqual_else_andIf(is$1.LessThan,is$1.LessThanEqual)},GreaterThan_LessThan:{union:function(){var e=makeOrUnless(is$1.LessThan);return function(t,a){return comparisons$1.In.test([t.value],a.value)?new is$1.NotIn([t.value]):e(t,a)}}(),intersection:makeAndUnless(is$1.GreaterThan),difference:makeComplementSecondArgIf(is$1.LessThan)},LessThan_GreaterThan:{difference:makeComplementSecondArgIf(is$1.GreaterThan)},GreaterThan_LessThanEqual:{union:makeOrUnless(is$1.LessThanEqual),intersection:makeAndUnless(is$1.GreaterThanEqual),difference:makeComplementSecondArgIf(is$1.LessThanEqual)},LessThanEqual_GreaterThan:{difference:makeComplementSecondArgIf(is$1.GreaterThanEqual)},GreaterThan_And:{union:RANGE_And_Union,intersection:RANGE_And_Intersection,difference:RANGE_And_Difference},And_GreaterThan:{difference:And_RANGE_Difference},GreaterThan_Or:RANGE_Or,Or_GreaterThan:Or_RANGE,GreaterThanEqual_GreaterThanEqual:{union:returnSmallerValue,intersection:returnBiggerValue,difference:makeAndIf(is$1.LessThan,is$1.LessThan)},UNIVERSAL_GreaterThanEqual:{difference:makeSecondValue(is$1.LessThan)},GreaterThanEqual_LessThan:{union:makeOrUnless(is$1.LessThanEqual),intersection:makeAndUnless(is$1.GreaterThanEqual),difference:makeComplementSecondArgIf(is$1.LessThanEqual)},LessThan_GreaterThanEqual:{difference:makeComplementSecondArgIf(is$1.GreaterThanEqual)},GreaterThanEqual_LessThanEqual:{union:makeOrUnless(is$1.LessThanEqual),intersection:function(){var e=makeAndUnless(is$1.GreaterThan);return function(t,a){var n=new is$1.In([t.value]);return n.isMember(a.value)?n:e(t,a)}}(),difference:makeComplementSecondArgIf(is$1.LessThanEqual)},LessThanEqual_GreaterThanEqual:{difference:makeComplementSecondArgIf(is$1.GreaterThanEqual)},GreaterThanEqual_And:{union:RANGE_And_Union,intersection:RANGE_And_Intersection,difference:RANGE_And_Difference},And_GreaterThanEqual:{difference:And_RANGE_Difference},GreaterThanEqual_Or:RANGE_Or,Or_GreaterThanEqual:Or_RANGE,LessThan_LessThan:{union:returnBiggerValue,intersection:returnSmallerValue,difference:makeAndIf(is$1.GreaterThan,is$1.GreaterThanEqual)},UNIVERSAL_LessThan:{difference:makeSecondValue(is$1.GreaterThanEqual)},LessThan_LessThanEqual:{union:returnBiggerValue,intersection:returnSmallerValue,difference:makeAndIf(is$1.GreaterThan,is$1.GreaterThan)},LessThanEqual_LessThan:{difference:make_InIfEqual_else_andIf(is$1.GreaterThanEqual,is$1.GreaterThanEqual)},LessThan_And:{union:RANGE_And_Union,intersection:RANGE_And_Intersection,difference:RANGE_And_Difference},And_LessThan:{difference:And_RANGE_Difference},LessThan_Or:RANGE_Or,Or_LessThan:Or_RANGE,LessThanEqual_LessThanEqual:{union:returnBiggerValue,intersection:returnSmallerValue,difference:function(e,t){return e.value>=t.value?makeAnd([e,new is$1.GreaterThan(t.value)]):set_1$1.EMPTY}},UNIVERSAL_LessThanEqual:{difference:makeSecondValue(is$1.GreaterThan)},LessThanEqual_And:{union:RANGE_And_Union,intersection:RANGE_And_Intersection,difference:RANGE_And_Difference},And_LessThanEqual:{difference:And_RANGE_Difference},LessThanEqual_Or:RANGE_Or,Or_LessThanEqual:Or_RANGE,And_And:{union:function(e,t){var a=set_1$1.union(e,t.values[0]),n=set_1$1.union(e,t.values[1]);return(isAndOrOr(a)||isAndOrOr(n))&&(a=set_1$1.union(t,e.values[0]),n=set_1$1.union(t,e.values[1])),isAndOrOr(a)||isAndOrOr(n)?new is$1.Or([e,t]):set_1$1.intersection(a,n)},intersection:function(e,t){var a=set_1$1.intersection(e.values[0],t.values[0]),n=set_1$1.intersection(e.values[1],t.values[1]);return isAndOrOr(a)&&isAndOrOr(n)?(a=set_1$1.intersection(e.values[0],t.values[1]),n=set_1$1.intersection(e.values[1],t.values[0]),isAndOrOr(a)&&isAndOrOr(n)?new is$1.And([e,t]):set_1$1.intersection(a,n)):set_1$1.intersection(a,n)},difference:function(){return function(e,t){var a=set_1$1.difference(e,t.values[0]),n=set_1$1.difference(e,t.values[1]);return set_1$1.union(a,n)}}()},And_Or:{union:function(e,t){var a=set_1$1.union(e.values[0],t),n=set_1$1.union(e.values[1],t);return isAndOrOr(a)&&isAndOrOr(n)?new is$1.Or([e,t]):set_1$1.intersection(a,n)},intersection:function(e,t){var a=set_1$1.intersection(e,t.values[0]),n=set_1$1.intersection(e,t.values[1]);return isOr(a)||isOr(n)?new is$1.And([e,t]):set_1$1.union(a,n)},difference:function(e,t){var a=set_1$1.difference(e,t.values[0]),n=set_1$1.difference(e,t.values[1]);return set_1$1.intersection(a,n)}},Or_And:{difference:function(e,t){var a=set_1$1.difference(e,t.values[0]),n=set_1$1.difference(e,t.values[1]);return set_1$1.union(a,n)}},UNIVERSAL_And:{difference:function(e,t){var a=set_1$1.difference(e,t.values[0]),n=set_1$1.difference(e,t.values[1]);return set_1$1.union(a,n)}},Or_Or:{union:function(e,t){var a=set_1$1.union(e.values[0],t.values[0]),n=set_1$1.union(e.values[1],t.values[1]);return isAndOrOr(a)&&isAndOrOr(n)?(a=set_1$1.union(e.values[0],t.values[1]),n=set_1$1.union(e.values[1],t.values[0]),isAndOrOr(a)&&isAndOrOr(n)?new is$1.Or([e,t]):set_1$1.union(a,n)):set_1$1.union(a,n)},intersection:function(e,t){var a=t.values[0],n=t.values[1],r=set_1$1.intersection(e,a),s=set_1$1.intersection(e,n);return isOr(r)&&isOr(s)?(r=set_1$1.union(t,e.values[0]),s=set_1$1.union(t,e.values[1]),isOr(r)&&isOr(s)?new is$1.Or([e,t]):set_1$1.union(r,s)):set_1$1.union(r,s)},difference:function(e,t){var a=set_1$1.difference(e,t.values[0]),n=set_1$1.difference(e,t.values[1]);return set_1$1.intersection(a,n)}},UNIVERSAL_Or:{difference:function(e,t){var a=set_1$1.difference(e,t.values[0]),n=set_1$1.difference(e,t.values[1]);return set_1$1.intersection(a,n)}}}),names=Object.keys(comparisons$1);names.forEach(function(e,t){comparators$1[e+"_"+e]?set_1$1.defineComparison(comparisons$1[e],comparisons$1[e],comparators$1[e+"_"+e]):console.warn("no "+e+"_"+e),comparators$1["UNIVERSAL_"+e]?set_1$1.defineComparison(set_1$1.UNIVERSAL,comparisons$1[e],comparators$1["UNIVERSAL_"+e]):console.warn("no UNIVERSAL_"+e);for(var a=t+1,n;a<names.length;a++)n=names[a],comparators$1[e+"_"+n]?set_1$1.defineComparison(comparisons$1[e],comparisons$1[n],comparators$1[e+"_"+n]):console.warn("no "+e+"_"+n),comparators$1[n+"_"+e]?set_1$1.defineComparison(comparisons$1[n],comparisons$1[e],comparators$1[n+"_"+e]):console.warn("no "+n+"_"+e)});var comparisons_1$1=comparisons$1,makeRealNumberRangeInclusive=function(e,t){function a(a,n){this.start=0<arguments.length?+a:e,this.end=1<arguments.length?+n:t,this.range=new comparisons_1$1.And([new comparisons_1$1.GreaterThanEqual(this.start),new comparisons_1$1.LessThanEqual(this.end)])}function n(e){return set_1$1.isSubset(l.range,e.range)}function r(e){var t={};if(e.values.forEach(function(e){e instanceof comparisons_1$1.GreaterThanEqual&&(t.start=e.value),e instanceof comparisons_1$1.GreaterThan&&(t.start=e.value+1),e instanceof comparisons_1$1.LessThanEqual&&(t.end=e.value),e instanceof comparisons_1$1.LessThan&&(t.end=e.value-1)}),"start"in t&&"end"in t)return new a(t.start,t.end)}function s(e){var t;if(e instanceof comparisons_1$1.And&&(t=r(e)),e instanceof comparisons_1$1.Or){var s=r(e.values[0]),o=r(e.values[1]);if(s&&o){var i=s.range.values,l=o.range.values;if(i[1].value+1===l[0].value)t=new a(i[0].value,l[1].value);else if(l[1].value+1===i[0].value)t=new a(l[0].value,i[1].value);else return set_1$1.UNDEFINABLE}else return set_1$1.UNDEFINABLE}return t&&n(t)?set_1$1.UNIVERSAL:t}function o(e,t){var a=s(set_1$1.intersection(e.range,t.range));return a?a:set_1$1.EMPTY}function i(e,t){var a=s(set_1$1.difference(e.range,t.range));return a?a:set_1$1.EMPTY}var l=new a(e,t);return set_1$1.defineComparison(a,a,{union:function(e,t){var a=s(set_1$1.union(e.range,t.range));return a?a:set_1$1.EMPTY},intersection:o,difference:i}),set_1$1.defineComparison(set_1$1.UNIVERSAL,a,{difference:function(e,t){return n(t)?set_1$1.EMPTY:i(l,t)}}),a};function ValuesOr(e){this.values=e}ValuesOr.prototype.isMember=function(e){return this.values.some(function(t){return t&&t.isMember?t.isMember(e):t===e})},set_1$1.defineComparison(set_1$1.UNIVERSAL,ValuesOr,{difference:function(){return set_1$1.UNDEFINABLE}});var valuesOr=types.ValuesOr=ValuesOr;function ValuesAnd(e){this.values=e}ValuesAnd.prototype.isMember=function(e){return this.values.every(function(t){return t&&t.isMember?t.isMember(e):t===e})},set_1$1.defineComparison(set_1$1.UNIVERSAL,ValuesAnd,{difference:function(){return set_1$1.UNDEFINABLE}});var valuesAnd=types.ValuesAnd=ValuesAnd;function KeysAnd(e){var t=this.values={};canReflect_1_18_0_canReflect.eachKey(e,function(e,a){t[a]=canReflect_1_18_0_canReflect.isPlainObject(e)&&!set_1$1.isSpecial(e)?new KeysAnd(e):e})}var isMemberSymbol$2=canSymbol_1_6_5_canSymbol.for("can.isMember");KeysAnd.prototype.isMember=function(e,t,a){var n=!0,r=a?a+".":"";return canReflect_1_18_0_canReflect.eachKey(this.values,function(a,s){var o=a&&(a[isMemberSymbol$2]||a.isMember);o?!o.call(a,get_1(e,s),t||e,r+s)&&(n=!1):a!==get_1(e,s)&&(n=!1)}),n};function checkIfUniversalAndReturnUniversal(e){return set_1$1.isEqual(e,set_1$1.UNIVERSAL)?set_1$1.UNIVERSAL:e}var MISSING={};function eachInUnique(e,t,a,n,r){var s=canAssign_1_3_3_canAssign({},a),o;for(var i in e){if(o=t(i,e[i],i in a?a[i]:MISSING,e,a),void 0!==o)return o;delete s[i]}for(i in s)if(o=n(i,MISSING,a[i],e,a),void 0!==o)return o;return r}function keyDiff(e,t){var a=arrayUnionIntersectionDifference(Object.keys(e),Object.keys(t));return{aOnlyKeys:a.difference,aAndBKeys:a.intersection,bOnlyKeys:arrayUnionIntersectionDifference(Object.keys(t),Object.keys(e)).difference}}function notEmpty(e){return e!==set_1$1.EMPTY}function difference(e,t){var a=e.values,n=t.values,r=keyDiff(a,n),s=r.aOnlyKeys,o=r.aAndBKeys,i=r.bOnlyKeys,l={},d={},p={};o.forEach(function(e){var t=set_1$1.difference(a[e],n[e]);if(t===set_1$1.EMPTY)l[e]=a[e];else{var r=set_1$1.intersection(a[e],n[e]),s=r!==set_1$1.EMPTY;s?d[e]={difference:t,intersection:r}:p[e]=a[e]}});var c=Object.keys(d),u;if(1===c.length&&(u={},u[c[0]]=d[c[0]].difference),Object.keys(p).length)return e;if(0===s.length&&0===i.length)return 1<c.length?set_1$1.UNDEFINABLE:1===c.length?(canAssign_1_3_3_canAssign(l,u),new KeysAnd(l)):set_1$1.EMPTY;if(0<s.length&&0===i.length)return 1<c.length?set_1$1.UNDEFINABLE:1===c.length?(canAssign_1_3_3_canAssign(l,u),s.forEach(function(e){l[e]=a[e]}),new KeysAnd(l)):set_1$1.EMPTY;if(0===s.length&&0<i.length){if(1<c.length)return set_1$1.UNDEFINABLE;var y;if(1===c.length){var h=c[0];y=canAssign_1_3_3_canAssign({},l),y[h]=d[h].difference,l[h]=d[h].intersection}var g=i.map(function(e){var t=canAssign_1_3_3_canAssign({},l),a=t[e]=set_1$1.difference(set_1$1.UNIVERSAL,n[e]);return a===set_1$1.EMPTY?a:new KeysAnd(t)}).filter(notEmpty);return y&&g.push(new KeysAnd(y)),1<g.length?new types.ValuesOr(g):1===g.length?g[0]:set_1$1.EMPTY}if(0<s.length&&0<i.length){if(c.length)throw new Error("Can't handle any productable keys right now");if(s.forEach(function(e){l[e]=a[e]}),1===i.length){var m=i[0],f=canAssign_1_3_3_canAssign({},l);return f[m]=set_1$1.difference(set_1$1.UNIVERSAL,n[m]),new KeysAnd(f)}return set_1$1.UNDEFINABLE}}set_1$1.defineComparison(KeysAnd,KeysAnd,{union:function(e,t){var a=keyDiff(e.values,t.values),n=[],r={};a.aAndBKeys.forEach(function(a){set_1$1.isEqual(e.values[a],t.values[a])?r[a]=e.values[a]:n.push(a)});var s={},o={};if(n.forEach(function(a){s[a]=e.values[a],o[a]=t.values[a]}),!a.aOnlyKeys.length&&!a.bOnlyKeys.length){if(1===n.length){var i=n[0],l=r[i]=set_1$1.union(e.values[i],t.values[i]);return 1===canReflect_1_18_0_canReflect.size(r)&&set_1$1.isEqual(l,set_1$1.UNIVERSAL)?set_1$1.UNIVERSAL:new KeysAnd(r)}if(0===n.length)return e}if(0===n.length){if(0<a.aOnlyKeys.length&&0===a.bOnlyKeys.length)return checkIfUniversalAndReturnUniversal(t);if(0===a.aOnlyKeys.length&&0<a.bOnlyKeys.length)return checkIfUniversalAndReturnUniversal(e)}return 0<a.aOnlyKeys.length&&0===a.bOnlyKeys.length&&set_1$1.isSubset(new KeysAnd(s),new KeysAnd(o))?t:0<a.bOnlyKeys.length&&0===a.aOnlyKeys.length&&set_1$1.isSubset(new KeysAnd(o),new KeysAnd(s))?e:new types.ValuesOr([e,t])},intersection:function(e,t){var a=e.values,n=t.values,r=!1,s={};return eachInUnique(a,function(e,t,a){s[e]=a===MISSING?t:set_1$1.intersection(t,a),s[e]===set_1$1.EMPTY&&(r=!0)},n,function(e,t,a){s[e]=a,s[e]===set_1$1.EMPTY&&(r=!0)}),r?set_1$1.EMPTY:new KeysAnd(s)},difference:difference}),set_1$1.defineComparison(set_1$1.UNIVERSAL,KeysAnd,{difference:function(e,t){return difference({values:{}},t)}});var keysAnd=types.KeysAnd=KeysAnd,andOrNot={KeysAnd:keysAnd,ValuesOr:valuesOr,ValuesNot:valuesNot,ValuesAnd:valuesAnd},typeNumber={undefined:0,null:1,number:3,string:4,object:5,boolean:6},getTypeNumber=function(e){var t=typeof e;return null===e&&(t="null"),typeNumber[t]},typeCompare={$gt:function(e,t){return getTypeNumber(e)>getTypeNumber(t)},$lt:function(e,t){return getTypeNumber(e)<getTypeNumber(t)}},defaultCompare={$gt:function(e,t){return null==e||null==t?typeCompare.$gt(e,t):e>t},$lt:function(e,t){return null==e||null==t?typeCompare.$gt(e,t):e<t}},helpers$1={uniqueConcat:function(e,t,a){var n=new Set;return e.concat(t).filter(function(e){var t=a(e);return!n.has(t)&&(n.add(t),!0)})},getIdentityIndex:function(e,t,a,n,r){var s=canReflect_1_18_0_canReflect.getIdentity(a,r),o=t[n];if(0===e(a,o)&&s===canReflect_1_18_0_canReflect.getIdentity(o,r))return n;var i=this.getIdentityIndexByDirection(e,t,a,n+1,1,r),l;return i.index?i.index:(l=this.getIdentityIndexByDirection(e,t,a,n-1,-1,r),void 0===l.index?i.lastIndex:l.index)},getIdentityIndexByDirection:function(e,t,a,n,r,s){for(var o=n,i=canReflect_1_18_0_canReflect.getIdentity(a,s);0<=o&&o<t.length;){var l=t[o],d=e(a,l);if(!(0===d))return{lastIndex:o-r};else if(i===canReflect_1_18_0_canReflect.getIdentity(l,s))return{index:o};o+=r}return{lastIndex:o-r}},getIndex:function(e,t,a,n){if(t&&t.length){if(-1===e(a,t[0]))return 0;if(1===e(a,t[t.length-1]))return t.length;for(var r=0,s=t.length;r<s;){var o=r+s>>>1,i=t[o],l=e(a,i);if(0===l)return this.getIdentityIndex(e,t,a,o,n);-1===l?s=o:r=o+1}return s}},sortData:function(e){return"-"===e[0]?{prop:e.slice(1),desc:!0}:{prop:e,desc:!1}},defaultCompare:defaultCompare,typeCompare:typeCompare,sorter:function(e,t){var a=helpers$1.sortData(e),n;return n=t&&t[a.prop]?t[a.prop]:defaultCompare,function(e,t){var r=canReflect_1_18_0_canReflect.getKeyValue(e,a.prop),s=canReflect_1_18_0_canReflect.getKeyValue(t,a.prop),o;return a.desc&&(o=r,r=s,s=o),n.$lt(r,s)?-1:n.$gt(r,s)?1:0}},valueHydrator:function(e){if(canReflect_1_18_0_canReflect.isBuiltIn(e))return e;throw new Error("can-query-logic doesn't support comparison operator: "+JSON.stringify(e))}},helpers_1$1=helpers$1,KeysAnd$1=andOrNot.KeysAnd,Or=andOrNot.ValuesOr,Not=andOrNot.ValuesNot,And=andOrNot.ValuesAnd,RecordRange=makeRealNumberRangeInclusive(0,1/0);function makeSort(e,t){function a(t){this.key=t,this.schema=e,this.compare=helpers_1$1.sorter(t,r)}var n=e.keys,r={};return canReflect_1_18_0_canReflect.eachKey(n,function(e,a){r[a]={$gt:function(n,r){if(null==n||null==r)return helpers_1$1.typeCompare.$gt(n,r);var s=t({$gt:r},a,e,helpers_1$1.valueHydrator),o=t({$eq:n},a,e,helpers_1$1.valueHydrator);return set_1$1.isEqual(set_1$1.union(s,o),s)},$lt:function(n,r){if(null==n||null==r)return helpers_1$1.typeCompare.$lt(n,r);var s=t({$lt:r},a,e,helpers_1$1.valueHydrator),o=t({$eq:n},a,e,helpers_1$1.valueHydrator);return set_1$1.isEqual(set_1$1.union(s,o),s)}}}),set_1$1.defineComparison(a,a,{intersection:function(e,t){return e.key===t.key?e:set_1$1.EMPTY},difference:function(e,t){return e.key===t.key?set_1$1.EMPTY:e},union:function(e,t){return e.key===t.key?e:set_1$1.UNDEFINABLE}}),a}var DefaultSort=makeSort({keys:{},identity:["id"]});function BasicQuery(e){canAssign_1_3_3_canAssign(this,e),this.filter||(this.filter=set_1$1.UNIVERSAL),this.page||(this.page=new RecordRange),this.sort||(this.sort="id"),"string"==typeof this.sort&&(this.sort=new DefaultSort(this.sort))}BasicQuery.KeysAnd=KeysAnd$1,BasicQuery.Or=Or,BasicQuery.Not=Not,BasicQuery.And=And,BasicQuery.RecordRange=RecordRange,BasicQuery.makeSort=makeSort,canReflect_1_18_0_canReflect.assignMap(BasicQuery.prototype,{count:function(){return this.page.end-this.page.start+1},sortData:function(e){return e.slice(0).sort(this.sort.compare)},filterMembersAndGetCount:function(e,t){var a;if(!t)t=new BasicQuery;else if(a=set_1$1.isEqual(t.page,set_1$1.UNIVERSAL),a&&!set_1$1.isEqual(t.filter,set_1$1.UNIVERSAL)&&!set_1$1.isSubset(this,t))throw new Error("can-query-logic: Unable to get members from a set that is not a superset of the current set.");var n=e.filter(function(e){return this.filter.isMember(e)},this),r=n.length;r&&this.sort.key!==t.sort.key&&(n=this.sortData(n));var s=set_1$1.isEqual(this.page,set_1$1.UNIVERSAL);if(null==a&&(a=set_1$1.isEqual(t.page,set_1$1.UNIVERSAL)),a)return s?{data:n,count:r}:{data:n.slice(this.page.start,this.page.end+1),count:r};if(this.sort.key===t.sort.key&&set_1$1.isEqual(t.filter,this.filter))return{data:n.slice(this.page.start-t.page.start,this.page.end-t.page.start+1),count:r};throw new Error("can-query-logic: Unable to get members from the parent set for this subset.")},filterFrom:function(e,t){return this.filterMembersAndGetCount(e,t).data},merge:function(e,t,a,n){var r=set_1$1.union(this,e);if(r!==set_1$1.UNDEFINABLE){var s=helpers_1$1.uniqueConcat(t,a,n);return r.sortData(s)}},index:function(e,t){var a=helpers_1$1.sortData(this.sort.key);return canReflect_1_18_0_canReflect.hasOwnKey(e,a.prop)?helpers_1$1.getIndex(this.sort.compare,t,e,this.sort.schema):void 0},isMember:function(e){return this.filter.isMember(e)},removePagination:function(){this.page=new RecordRange}});var CLAUSE_TYPES=["filter","page","sort"];function getDifferentClauseTypes(e,t){var a=[];return CLAUSE_TYPES.forEach(function(n){set_1$1.isEqual(e[n],t[n])||a.push(n)}),a}function isSubset(e,t,a){return!!a[e+"FilterIsSubset"]&&(!!a[t+"PageIsUniversal"]||a[e+"PageIsSubset"]&&a.sortIsEqual)}function MetaInformation(e,t){this.queryA=e,this.queryB=t}canReflect_1_18_0_canReflect.eachKey({pageIsEqual:function(){return set_1$1.isEqual(this.queryA.page,this.queryB.page)},aPageIsUniversal:function(){return set_1$1.isEqual(this.queryA.page,set_1$1.UNIVERSAL)},bPageIsUniversal:function(){return set_1$1.isEqual(this.queryB.page,set_1$1.UNIVERSAL)},pagesAreUniversal:function(){return this.pageIsEqual&&this.aPageIsUniversal},sortIsEqual:function(){return this.queryA.sort.key===this.queryB.sort.key},aFilterIsSubset:function(){return set_1$1.isSubset(this.queryA.filter,this.queryB.filter)},bFilterIsSubset:function(){return set_1$1.isSubset(this.queryB.filter,this.queryA.filter)},aPageIsSubset:function(){return set_1$1.isSubset(this.queryA.page,this.queryB.page)},bPageIsSubset:function(){return set_1$1.isSubset(this.queryB.page,this.queryA.page)},filterIsEqual:function(){return set_1$1.isEqual(this.queryA.filter,this.queryB.filter)},aIsSubset:function(){return isSubset("a","b",this)},bIsSubset:function(){return isSubset("b","a",this)}},function(e,t){canDefineLazyValue_1_1_1_defineLazyValue(MetaInformation.prototype,t,e)});function metaInformation(e,t){var a=new MetaInformation(e,t);return a}set_1$1.defineComparison(BasicQuery,BasicQuery,{union:function(e,t){var a=metaInformation(e,t),n=set_1$1.union(e.filter,t.filter);if(a.pagesAreUniversal)return new BasicQuery({filter:n,sort:a.sortIsEqual?e.sort.key:void 0});if(a.filterIsEqual)return a.sortIsEqual?new BasicQuery({filter:e.filter,sort:e.sort.key,page:set_1$1.union(e.page,t.page)}):a.aIsSubset?t:a.bIsSubset?e:set_1$1.UNDEFINABLE;throw new Error("different filters, non-universal pages")},intersection:function(e,t){var a=metaInformation(e,t);if(a.pagesAreUniversal){var n=set_1$1.intersection(e.filter,t.filter);return set_1$1.isDefinedAndHasMembers(n)?new BasicQuery({filter:n,sort:a.sortIsEqual?e.sort.key:void 0}):n}return set_1$1.intersection(e.filter,t.filter)===set_1$1.EMPTY?set_1$1.EMPTY:a.filterIsEqual?a.sortIsEqual?new BasicQuery({filter:e.filter,sort:e.sort.key,page:set_1$1.intersection(e.page,t.page)}):a.aIsSubset?e:a.bIsSubset?t:set_1$1.UNKNOWABLE:a.aIsSubset?e:a.bIsSubset?t:set_1$1.UNDEFINABLE},difference:function(e,t){var a=getDifferentClauseTypes(e,t),n=metaInformation(e,t),r;if(1<a.length)return n.aIsSubset?set_1$1.EMPTY:n.pagesAreUniversal?new BasicQuery({filter:set_1$1.difference(e.filter,t.filter),sort:e.sort.key}):set_1$1.UNDEFINABLE;switch(r=a[0]){case void 0:return set_1$1.EMPTY;case"sort":return n.pagesAreUniversal?set_1$1.EMPTY:set_1$1.UNKNOWABLE;break;case"page":case"filter":{var s=set_1$1.difference(e[r],t[r]);if(set_1$1.isSpecial(s))return s;var o={filter:e.filter,page:e.page,sort:e.sort.key};return o[r]=s,new BasicQuery(o)}}}});var basicQuery=BasicQuery,Serializer=function(e){var t=this.serializers=new Map;e&&e.forEach(function(e){var a=e[0],n=e[1];t.set(a,n)}),this.serialize=this.serialize.bind(this)};Serializer.prototype.add=function(e){canReflect_1_18_0_canReflect.assign(this.serializers,e instanceof Serializer?e.serializers:e)},Serializer.prototype.serialize=function(e){if(!e)return e;var t=e.constructor,a=this.serializers.get(t);return a?a(e,this.serialize):canReflect_1_18_0_canReflect.serialize(e)};var serializer=Serializer;function makeNew(e){return function(t){return new e(t)}}var hydrateMap={};function addHydrateFrom(e,t){hydrateMap[e]=function(a,n){return t(n?n(a[e]):a[e])},Object.defineProperty(hydrateMap[e],"name",{value:"hydrate "+e,writable:!0})}function addHydrateFromValues(e,t){hydrateMap[e]=function(a,n){var r=a[e];return n&&(r=r.map(function(e){return n(e)})),t(r)},Object.defineProperty(hydrateMap[e],"name",{value:"hydrate "+e,writable:!0})}addHydrateFrom("$eq",function(e){return new comparisons_1$1.In([e])}),addHydrateFrom("$ne",function(e){return new comparisons_1$1.NotIn([e])}),addHydrateFrom("$gt",makeNew(comparisons_1$1.GreaterThan)),addHydrateFrom("$gte",makeNew(comparisons_1$1.GreaterThanEqual)),addHydrateFromValues("$in",makeNew(comparisons_1$1.In)),addHydrateFrom("$lt",makeNew(comparisons_1$1.LessThan)),addHydrateFrom("$lte",makeNew(comparisons_1$1.LessThanEqual)),addHydrateFromValues("$all",makeNew(comparisons_1$1.All));var oppositeTypeMap={LessThan:{Type:comparisons_1$1.GreaterThanEqual,prop:"value"},LessThanEqual:{Type:comparisons_1$1.GreaterThan,prop:"value"},GreaterThan:{Type:comparisons_1$1.LessThanEqual,prop:"value"},GreaterThanEqual:{Type:comparisons_1$1.LessThan,prop:"value"},In:{Type:comparisons_1$1.NotIn,prop:"values"},NotIn:{Type:comparisons_1$1.In,prop:"values"}};hydrateMap.$not=function(e,t){var a=hydrateValue(e.$not,t),n=a.constructor.name||a.constructor.toString().match(/^\s*function\s*(\S*)\s*\(/)[1];if(oppositeTypeMap[n]){var r=oppositeTypeMap[n],s=r.Type,o=r.prop;return new s(a[o])}return new valuesNot(a)},addHydrateFromValues("$nin",makeNew(comparisons_1$1.NotIn));var serializer$1=new serializer([[comparisons_1$1.In,function(e,t){return 1===e.values.length?t(e.values[0]):{$in:e.values.map(t)}}],[comparisons_1$1.NotIn,function(e,t){return 1===e.values.length?{$ne:t(e.values[0])}:{$nin:e.values.map(t)}}],[comparisons_1$1.GreaterThan,function(e,t){return{$gt:t(e.value)}}],[comparisons_1$1.GreaterThanEqual,function(e,t){return{$gte:t(e.value)}}],[comparisons_1$1.LessThan,function(e,t){return{$lt:t(e.value)}}],[comparisons_1$1.LessThanEqual,function(e,t){return{$lte:t(e.value)}}],[comparisons_1$1.And,function(e,t){var a={};return e.values.forEach(function(e){canReflect_1_18_0_canReflect.assignMap(a,t(e))}),a}],[comparisons_1$1.All,function(e,t){return{$all:t(e.values)}}]]);function hydrateValue(e,t){if(t||(t=function(){throw new Error("can-query-logic doesn't recognize operator: "+JSON.stringify(e))}),Array.isArray(e))return new comparisons_1$1.In(e.map(function(e){return t(e)}));if(e&&"object"==typeof e){var a=Object.keys(e),n=a.every(function(e){return hydrateMap[e]});if(n){var r=a.map(function(a){var n={};n[a]=e[a];var r=hydrateMap[a];return r(n,t)});return 1<r.length?new comparisons_1$1.And(r):r[0]}return t(e)}return new comparisons_1$1.In([t(e)])}var comparisons$2={hydrate:hydrateValue,serializer:serializer$1},schemaHelpers_1=schemaHelpers={isRangedType:function(e){return e&&canReflect_1_18_0_canReflect.isConstructorLike(e)&&!set_1$1.hasComparisons(e)&&!e[canSymbol_1_6_5_canSymbol.for("can.SetType")]&&e.prototype.valueOf&&e.prototype.valueOf!==Object.prototype.valueOf},categorizeOrValues:function(e){var t={primitives:[],valueOfTypes:[],others:[]};return e.forEach(function(e){canReflect_1_18_0_canReflect.isPrimitive(e)?t.primitives.push(e):schemaHelpers.isRangedType(e)?t.valueOfTypes.push(e):t.others.push(e)}),t}},comparisonSetTypeSymbol=canSymbol_1_6_5_canSymbol.for("can.ComparisonSetType"),isMemberSymbol$3=canSymbol_1_6_5_canSymbol.for("can.isMember"),schemaHelpers;function splitByRangeAndEnum(e,t){var a;if(t instanceof comparisons_1$1.And){var n=t.values.map(function(t){return splitByRangeAndEnum(e,t)});return n.reduce(function(e,t){return{range:set_1$1.intersection(e.range,t.range),enum:set_1$1.intersection(e.enum,t.enum)}},{range:set_1$1.UNIVERSAL,enum:e})}if(t instanceof comparisons_1$1.In){var r=t.values.filter(function(t){return e.isMember(t)});if(r.length){var s=t.values.slice(0);return canReflect_1_18_0_canReflect.removeValues(s,r),{enum:new comparisons_1$1.In(r),range:s.length?new comparisons_1$1.In(s):set_1$1.EMPTY}}return{enum:set_1$1.EMPTY,range:t}}if(t instanceof comparisons_1$1.NotIn){a=set_1$1.intersection(e,t);var o=t.values.filter(function(t){return!e.isMember(t)});return{range:o.length?new comparisons_1$1.NotIn(o):set_1$1.UNIVERSAL,enum:a}}return{enum:set_1$1.EMPTY,range:t}}function makeMaybe(e,t){function a(e){var t=splitByRangeAndEnum(n,e.range);if(this.range=t.range||set_1$1.EMPTY,this.enum=e.enum?t.enum===set_1$1.EMPTY?e.enum:set_1$1.union(t.enum,e.enum):t.enum,this.enum===set_1$1.EMPTY&&this.range===set_1$1.EMPTY)return set_1$1.EMPTY}var n=new comparisons_1$1.In(e);return a.prototype.orValues=function(){var e=[];return this.range!==set_1$1.EMPTY&&e.push(this.range),this.enum!==set_1$1.EMPTY&&e.push(this.enum),e},a.prototype[isMemberSymbol$3]=function(){var e=this.range[isMemberSymbol$3]||this.range.isMember,t=this.enum[isMemberSymbol$3]||this.enum.isMember;return e.apply(this.range,arguments)||t.apply(this.enum,arguments)},set_1$1.defineComparison(a,a,{union:function(e,t){var n=set_1$1.union(e.enum,t.enum),r=set_1$1.union(e.range,t.range);return new a({enum:n,range:r})},difference:function(e,t){var n=set_1$1.difference(e.enum,t.enum),r=set_1$1.difference(e.range,t.range);return new a({enum:n,range:r})},intersection:function(e,t){var n=set_1$1.intersection(e.enum,t.enum),r=set_1$1.intersection(e.range,t.range);return new a({enum:n,range:r})}}),a.inValues=e,set_1$1.defineComparison(set_1$1.UNIVERSAL,a,{difference:function(e,t){var r,s;if(t.range===set_1$1.UNIVERSAL)return new a({range:t.range,enum:set_1$1.difference(n,t.enum)});if(t.enum===set_1$1.EMPTY){var o=set_1$1.difference(set_1$1.UNIVERSAL,t.range),i=set_1$1.difference(n,t.range),l=set_1$1.difference(i,o);return new a({range:o,enum:l})}return r=set_1$1.difference(e,t.range),s=set_1$1.difference(n,t.enum),new a({enum:s,range:r})}}),t=t||function(e){return e},a.hydrate=function(e,n){return new a({range:n(e,t)})},a}makeMaybe.canMakeMaybeSetType=function(e){var t=canReflect_1_18_0_canReflect.getSchema(e);if(t&&"Or"===t.type){var a=schemaHelpers_1.categorizeOrValues(t.values);return 1===a.valueOfTypes.length&&a.valueOfTypes.length+a.primitives.length===t.values.length}return!1},makeMaybe.makeMaybeSetTypes=function(e){var t=canReflect_1_18_0_canReflect.getSchema(e),a=schemaHelpers_1.categorizeOrValues(t.values),n;return e[comparisonSetTypeSymbol]?n=e[comparisonSetTypeSymbol]:(n=function(t){this.value=canReflect_1_18_0_canReflect.new(e,t)},n.prototype.valueOf=function(){return this.value},canReflect_1_18_0_canReflect.assignSymbols(n.prototype,{"can.serialize":function(){return this.value}})),{Maybe:makeMaybe(a.primitives,function(e){return new n(e)}),ComparisonSetType:n}};var makeMaybe_1=makeMaybe,setTypeSymbol=canSymbol_1_6_5_canSymbol.for("can.SetType"),isMemberSymbol$4=canSymbol_1_6_5_canSymbol.for("can.isMember"),newSymbol$2=canSymbol_1_6_5_canSymbol.for("can.new");function makeEnumSetType(e,t){function a(e){var a=Array.isArray(e)?e:[e];this.values=t?a.map(t):a}canReflect_1_18_0_canReflect.assignSymbols(a.prototype,{"can.serialize":function(){return 1===this.values.length?this.values[0]:this.values}}),a.prototype[isMemberSymbol$4]=function(e){return this.values.some(function(t){return set_1$1.isEqual(t,e)})},a.UNIVERSAL=new a(e);var n=function(e,t){var n=arrayUnionIntersectionDifference(e.values,t.values);return n.difference.length?new a(n.difference):set_1$1.EMPTY};return set_1$1.defineComparison(a,a,{union:function(e,t){var n=arrayUnionIntersectionDifference(e.values,t.values);return n.union.length?new a(n.union):set_1$1.EMPTY},intersection:function(e,t){var n=arrayUnionIntersectionDifference(e.values,t.values);return n.intersection.length?new a(n.intersection):set_1$1.EMPTY},difference:n}),set_1$1.defineComparison(a,set_1$1.UNIVERSAL,{difference:function(t){return n(t,{values:e.slice(0)})}}),set_1$1.defineComparison(set_1$1.UNIVERSAL,a,{difference:function(t,a){return n({values:e.slice(0)},a)}}),a}function makeEnum$1(e,t,a){var n=makeEnumSetType(t,a);return e[setTypeSymbol]=n,e[isMemberSymbol$4]=function(e){return t.some(function(t){return set_1$1.isEqual(t,e)})},n}makeEnum$1.canMakeEnumSetType=function(e){var t=canReflect_1_18_0_canReflect.getSchema(e);if(t&&"Or"===t.type){var a=schemaHelpers_1.categorizeOrValues(t.values);return a.primitives.length===t.values.length}return!1},makeEnum$1.makeEnumSetType=function(e){var t=canReflect_1_18_0_canReflect.getSchema(e),a=schemaHelpers_1.categorizeOrValues(t.values),n=e[newSymbol$2]?e[newSymbol$2].bind(e):void 0;return makeEnumSetType(a.primitives,n)};var makeEnum_1=makeEnum$1,setTypeSymbol$1=canSymbol_1_6_5_canSymbol.for("can.SetType"),schemaSymbol=canSymbol_1_6_5_canSymbol.for("can.getSchema"),defaultQuery=new basicQuery({});function getSchemaProperties(e){var t=e.constructor;if(t&&t[schemaSymbol]){var a=t[schemaSymbol]();return a.keys||{}}return{}}function hydrateFilter(e,t,a){var n=e&&"object"==typeof e;return n&&"$or"in e?hydrateOrs(e.$or,t,a):n&&"$and"in e?hydrateAnds(e.$and,t,a):hydrateAndValues(e,t,a)}var setTypeMap=new WeakMap;function hydrateAndValue(e,t,a,n){if(a){var r=a[setTypeSymbol$1];return r?r.hydrate?r.hydrate(e,comparisons$2.hydrate):set_1$1.hasComparisons(r)?new r(e):comparisons$2.hydrate(e,function(e){return new r(e)}):makeEnum_1.canMakeEnumSetType(a)?(setTypeMap.has(a)||setTypeMap.set(a,makeEnum_1.makeEnumSetType(a)),r=setTypeMap.get(a),new r(e)):makeMaybe_1.canMakeMaybeSetType(a)?(setTypeMap.has(a)||setTypeMap.set(a,makeMaybe_1.makeMaybeSetTypes(a)),r=setTypeMap.get(a).Maybe,r.hydrate(e,comparisons$2.hydrate)):comparisons$2.hydrate(e,n)}return comparisons$2.hydrate(e,n)}function hydrateAndValues(e,t,a){function n(e){if(e){if(Array.isArray(e))return e.map(a);if(canReflect_1_18_0_canReflect.isPlainObject(e))return hydrateAndValues(e,getSchemaProperties(e))}return a?a(e):e}t=t||{};var r={};return canReflect_1_18_0_canReflect.eachKey(e,function(e,a){r[a]=hydrateAndValue(e,a,t[a],n)}),new basicQuery.KeysAnd(r)}function combineAnds(e){var t=Object.keys(e[0].values),a={},n=new comparisons_1$1.In(t);t.map(function(e){a[e]=[]});var r=e.every(function(e){return!!set_1$1.isEqual(n,new comparisons_1$1.In(Object.keys(e.values)))&&(canReflect_1_18_0_canReflect.eachKey(e.values,function(e,t){a[t].push(e)}),!0)});if(r){var s=[];if(t.forEach(function(e){var t=a[e].reduce(function(e,t){if(!1===t)return!1;if(void 0===t)return e;var a=set_1$1.isEqual(e,t);return!!a&&e});t||s.push(e)}),1===s.length){var o=s[0],i=a[o].reduce(function(e,t){return set_1$1.union(e,t)},set_1$1.EMPTY),l={};return t.map(function(e){l[e]=a[e][0]}),l[o]=i,new basicQuery.KeysAnd(l)}}}function hydrateOrs(e,t,a){var n=e.map(function(e){return hydrateAndValues(e,t,a)}),r=combineAnds(n);return r?r:new basicQuery.Or(n)}function hydrateAnds(e,t,a){var n=e.map(function(e){return hydrateAndValues(e,t,a)});return new basicQuery.And(n)}function recursivelyAddOrs(e,t,a,n){t.orValues().forEach(function(t){if("function"==typeof t.orValues)recursivelyAddOrs(e,t,a,n);else{var r={};r[n]=a(t),e.push(r)}})}var basicQuery$1=function(e){var t=e.identity&&e.identity[0],a=e.keys,n=[[basicQuery.Or,function(e,t){return e.values.map(function(e){return t(e)})}],[basicQuery.And,function(e,t){return{$and:e.values.map(function(e){return t(e)})}}],[basicQuery.Not,function(e,t){return{$not:t(e.value)}}],[basicQuery.KeysAnd,function(e,t){var a=[],n={};return canReflect_1_18_0_canReflect.eachKey(e.values,function(e,r){"function"==typeof e.orValues?recursivelyAddOrs(a,e,t,r):n[r]=t(e)}),a.length?1===a.length?a[0]:{$or:a.map(function(e){return canReflect_1_18_0_canReflect.assign(canReflect_1_18_0_canReflect.serialize(n),e)})}:n}],[basicQuery.RecordRange,function(e){return{start:e.start,end:e.end}}],[basicQuery,function(e,a){var n=set_1$1.isEqual(e.filter,set_1$1.UNIVERSAL)?{}:a(e.filter),r={};return 0!==canReflect_1_18_0_canReflect.size(n)&&(r.filter=n),set_1$1.isEqual(e.page,defaultQuery.page)||(r.page={start:e.page.start},e.page.end!==defaultQuery.page.end&&(r.page.end=e.page.end)),e.sort.key!==t&&(r.sort=e.sort.key),r}]],r=basicQuery.makeSort(e,hydrateAndValue),s=new serializer(n);return s.add(comparisons$2.serializer),{hydrate:function(e){var n=canReflect_1_18_0_canReflect.serialize(e.filter),s=hydrateFilter(n,a,helpers_1$1.valueHydrator),o={filter:s};return e.page&&(o.page=new basicQuery.RecordRange(e.page.start,e.page.end)),o.sort=e.sort?new r(e.sort):new r(t),new basicQuery(o)},serializer:s}},schemaSymbol$1=canSymbol_1_6_5_canSymbol.for("can.getSchema"),newSymbol$3=canSymbol_1_6_5_canSymbol.for("can.new");function QueryLogic(e,t){e=e||{};var a=t&&t.toQuery,n=t&&t.toParams,r;r=e[schemaSymbol$1]?e[schemaSymbol$1]():e;var s=r.identity&&r.identity[0];s||(r.identity=["id"]);var o=basicQuery$1(r),i,l;i=a?function(e){return o.hydrate(a(e))}:o.hydrate,l=n?function(e){return n(o.serializer.serialize(e))}:o.serializer.serialize,this.hydrate=i,this.serialize=l,this.schema=r}function makeNewSet(e){return function(t,a){var n=this.hydrate(t),r=this.hydrate(a),s=set_1$1[e](n,r);return this.serialize(s)}}function makeReturnValue(e){return function(t,a){var n=this.hydrate(t),r=this.hydrate(a);return set_1$1[e](n,r)}}for(var prop$2 in canReflect_1_18_0_canReflect.assignSymbols(QueryLogic.prototype,{"can.getSchema":function(){return this.schema}}),canReflect_1_18_0_canReflect.assign(QueryLogic.prototype,{union:makeNewSet("union"),difference:makeNewSet("difference"),intersection:makeNewSet("intersection"),isEqual:makeReturnValue("isEqual"),isProperSubset:makeReturnValue("isProperSubset"),isSubset:makeReturnValue("isSubset"),isSpecial:set_1$1.isSpecial,isDefinedAndHasMembers:set_1$1.isDefinedAndHasMembers,count:function(e){var t=this.hydrate(e);return t.page.end-t.page.start+1},identityKeys:function(){return this.schema.identity},filterMembers:function(e,t,a){var n=this.hydrate(e);if(3<=arguments.length){var r=this.hydrate(t);return n.filterFrom(a,r)}return n.filterFrom(t)},filterMembersAndGetCount:function(e,t,a){var n=this.hydrate(e),r=this.hydrate(t);return n.filterMembersAndGetCount(a,r)},unionMembers:function(e,t,a,n){var r=this.hydrate(e),s=this.hydrate(t),o=this.schema;return r.merge(s,a,n,function(e){return canReflect_1_18_0_canReflect.getIdentity(e,o)})},isMember:function(e,t){return this.hydrate(e).isMember(t)},memberIdentity:function(e){return canReflect_1_18_0_canReflect.getIdentity(e,this.schema)},index:function(e,t,a){return this.hydrate(e).index(a,t)},insert:function(e,t,a){var n=this.index(e,t,a);void 0===n&&(n=t.length);var r=t.slice(0);return r.splice(n,0,a),r},isPaginated:function(e){var t=this.hydrate(e);return!set_1$1.isEqual(t.page,set_1$1.UNIVERSAL)},removePagination:function(e){var t=this.hydrate(e);return t.removePagination(),this.serialize(t)}}),set_1$1)void 0===QueryLogic[prop$2]&&(QueryLogic[prop$2]=set_1$1[prop$2]);QueryLogic.makeEnum=function(e){var t=function(){};return t[newSymbol$3]=function(e){return e},makeEnum_1(t,e),t},QueryLogic.KeysAnd=basicQuery.KeysAnd,QueryLogic.ValuesOr=basicQuery.Or,QueryLogic.In=comparisons_1$1.In,QueryLogic.NotIn=comparisons_1$1.NotIn,QueryLogic.GreaterThan=comparisons_1$1.GreaterThan,QueryLogic.GreaterThanEqual=comparisons_1$1.GreaterThanEqual,QueryLogic.LessThan=comparisons_1$1.LessThan,QueryLogic.LessThanEqual=comparisons_1$1.LessThanEqual,QueryLogic.ValueAnd=comparisons_1$1.And,QueryLogic.ValueOr=comparisons_1$1.Or;var canQueryLogic_1_2_2_canQueryLogic=QueryLogic;function deepMatches(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t))return e.every(function(e,a){return deepMatches(e,t[a])});if(e&&t&&canReflect_1_18_0_canReflect.isPlainObject(e)&&canReflect_1_18_0_canReflect.isPlainObject(t)){for(var a in e){if(!t.hasOwnProperty(a))return!1;if(!deepMatches(e[a],t[a]))return!1}return!0}return!1}function removeFixtureAndXHR(e){if(e.fixture||e.xhr||e.data){var t=canReflect_1_18_0_canReflect.serialize(e);return delete t.fixture,delete t.xhr,delete t.data,t}return e}function identityIntersection$1(e,t){return e.value===t.value?e:set_1$1.EMPTY}function identityDifference$1(e,t){return e.value===t.value?set_1$1.EMPTY:e}function identityUnion$1(e,t){return e.value===t.value?e:set_1$1.UNDEFINABLE}var identityComparitor$1={intersection:identityIntersection$1,difference:identityDifference$1,union:identityUnion$1};function makeComparatorType(e){var t=function(){},a=function(e){this.value=e};return a.prototype.isMember=function(t,a,n){return e(this.value,t,a,n)},canReflect_1_18_0_canReflect.assignSymbols(t,{"can.SetType":a}),set_1$1.defineComparison(a,a,identityComparitor$1),set_1$1.defineComparison(set_1$1.UNIVERSAL,a,{difference:function(){return set_1$1.UNDEFINABLE}}),t}function quickEqual(e,t){var a=e.data,n=t.data;if(a&&n&&!deepMatches(a,n))return!1;var r=new canQueryLogic_1_2_2_canQueryLogic.KeysAnd(removeFixtureAndXHR(e)),s=new canQueryLogic_1_2_2_canQueryLogic.KeysAnd(removeFixtureAndXHR(t));return set_1$1.isEqual(r,s)}function quickSubset(e,t){return set_1$1.isSubset(new canQueryLogic_1_2_2_canQueryLogic.KeysAnd(e),new canQueryLogic_1_2_2_canQueryLogic.KeysAnd(t))}var types$1={};canReflect_1_18_0_canReflect.eachKey({IsEmptyOrNull:function(e,t){return!(null!=e||0!==canReflect_1_18_0_canReflect.size(t))||null==t&&0===canReflect_1_18_0_canReflect.size(e)||quickEqual(e,t)},isEmptyOrSubset:function(e,t){return!(null!=e||0!==canReflect_1_18_0_canReflect.size(t))||null==t&&0===canReflect_1_18_0_canReflect.size(e)||quickSubset(e,t)},TemplateUrl:function(e,t){return!!canFixture_3_1_7_dataFromUrl(e,t)},StringIgnoreCase:function(e,t){return t&&e?e.toLowerCase()===t.toLowerCase():t===e},Ignore:function(){return!0}},function(e,t){types$1[t]=makeComparatorType(e)});var schema$1={identity:["id"],keys:{url:types$1.TemplateUrl,fixture:types$1.Ignore,xhr:types$1.Ignore,type:types$1.StringIgnoreCase,method:types$1.StringIgnoreCase,helpers:types$1.Ignore,headers:types$1.IsEmptyOrNull,data:types$1.IsEmptyOrSubset}},query=new canQueryLogic_1_2_2_canQueryLogic(schema$1),canFixture_3_1_7_matches={fixture:quickEqual,request:function(e,t){return query.isMember({filter:t},e)},matches:function(e,t,a){return a?this.fixture(e,t):this.request(e,t)},makeComparatorType:makeComparatorType};function getItems(e){return Array.isArray(e)?e:e.data}function indexOf$1(e,t,a){for(var n=canReflect_1_18_0_canReflect.getSchema(a),r=0;r<e.length;r++)if(t===canReflect_1_18_0_canReflect.getIdentity(e[r],n))return r;return-1}function makeSimpleStore(e){e.constructor=makeSimpleStore;var t=Object.create(e);return canReflect_1_18_0_canReflect.assignMap(t,{getRecordFromParams:function(e){var t=canReflect_1_18_0_canReflect.getIdentity(e,this.queryLogic.schema);return this.getRecord(t)},log:function(){this._log=!0},getSets:function(){return this.getQueries()},getQueries:function(){return Promise.resolve(this.getQueriesSync())},getQueriesSync:function(){return this.getQueryDataSync().map(function(e){return e.query})},getListData:function(e){e=e||{};var t=this.getListDataSync(e);return t?Promise.resolve(t):Promise.reject({title:"no data",status:"404",detail:"No data available for this query.\nAvailable queries: "+JSON.stringify(this.getQueriesSync())})},getPaginatedListDataSync:function(e){var t=this.getAllRecords(),a=this.queryLogic.removePagination(e.query),n=this.queryLogic.filterMembersAndGetCount(a,{},t),r=indexOf$1(n.data,e.startIdentity,this.queryLogic),s=n.data.slice(r,r+this.queryLogic.count(e.query));return{count:n.data.length,data:s}},getListDataSync:function(e){for(var t=this.getQueryDataSync(),a=this.queryLogic.isPaginated(e),n=0,r,s;n<t.length;n++)s=t[n].query,this.queryLogic.isSubset(e,s)&&(r=t[n]);var o=this.getAllRecords();if(a&&this.queryLogic.isPaginated(r.query)){var l=this.getPaginatedListDataSync(r);return this.queryLogic.filterMembersAndGetCount(e,r.query,l.data)}var d=this.queryLogic.filterMembersAndGetCount(e,{},o);return d&&d.count?d:r?{count:0,data:[]}:void 0},updateListData:function(e,t){var a=this.getQueryDataSync();t=t||{};var n=canReflect_1_18_0_canReflect.serialize(e),r=getItems(n);this.updateRecordsSync(r);var s=this.queryLogic.isPaginated(t),o=r.length?canReflect_1_18_0_canReflect.getIdentity(r[0],this.queryLogic.schema):void 0;if(s){for(var l=0;l<a.length;l++){var d=a[l].query,p=this.queryLogic.union(d,t);if(this.queryLogic.isDefinedAndHasMembers(p)){var c=this.getPaginatedListDataSync(a[l]),u=this.queryLogic.unionMembers(d,t,c.data,r);return o=canReflect_1_18_0_canReflect.getIdentity(u[0],this.queryLogic.schema),a[l]={query:p,startIdentity:o},this.updateQueryDataSync(a),Promise.resolve()}}return a.push({query:t,startIdentity:o}),this.updateQueryDataSync(a),Promise.resolve()}var y=this.getAllRecords(),h=this.queryLogic.filterMembers(t,y);if(h.length){var g=new Map;h.forEach(function(e){g.set(canReflect_1_18_0_canReflect.getIdentity(e,this.queryLogic.schema),e)},this),r.forEach(function(e){g.delete(canReflect_1_18_0_canReflect.getIdentity(e,this.queryLogic.schema))},this),this.destroyRecords(canReflect_1_18_0_canReflect.toArray(g))}var m=this.getQueryDataSync(),f=m.filter(function(e){return!this.queryLogic.isSubset(e.query,t)},this),b=f.filter(function(e){return this.queryLogic.isSubset(t,e.query)},this);return b.length?this.updateQueryDataSync(f):this.updateQueryDataSync(f.concat([{query:t,startIdentity:o}])),Promise.resolve()},getData:function(e){var t=canReflect_1_18_0_canReflect.getIdentity(e,canReflect_1_18_0_canReflect.getSchema(this.queryLogic)),a=this.getRecord(t);return a?Promise.resolve(a):Promise.reject({title:"no data",status:"404",detail:"No record with matching identity ("+t+")."})},createData:function(e){return this.updateRecordsSync([e]),Promise.resolve(canReflect_1_18_0_canReflect.assignMap({},this.getRecordFromParams(e)))},updateData:function(e){if(this.errorOnMissingRecord&&!this.getRecordFromParams(e)){var t=canReflect_1_18_0_canReflect.getIdentity(e,this.queryLogic.schema);return Promise.reject({title:"no data",status:"404",detail:"No record with matching identity ("+t+")."})}return this.updateRecordsSync([e]),Promise.resolve(canReflect_1_18_0_canReflect.assignMap({},this.getRecordFromParams(e)))},destroyData:function(e){var t=canReflect_1_18_0_canReflect.getIdentity(e,this.queryLogic.schema),a=this.getRecordFromParams(e);return this.errorOnMissingRecord&&!a?Promise.reject({title:"no data",status:"404",detail:"No record with matching identity ("+t+")."}):(this.destroyRecords([e]),Promise.resolve(canReflect_1_18_0_canReflect.assignMap({},a||e)))}})}var canMemoryStore_1_0_2_makeSimpleStore=makeSimpleStore,canMemoryStore_1_0_2_canMemoryStore=canNamespace_1_0_0_canNamespace.memoryStore=function e(t){t.constructor=e;var a=Object.create(canMemoryStore_1_0_2_makeSimpleStore(t));return canReflect_1_18_0_canReflect.assignMap(a,{clear:function(){this._instances={},this._queries=[]},_queryData:[],updateQueryDataSync:function(e){this._queryData=e},getQueryDataSync:function(){return this._queryData},_instances:{},getRecord:function(e){return this._instances[e]},getAllRecords:function(){var e=[];for(var t in this._instances)e.push(this._instances[t]);return e},destroyRecords:function(e){canReflect_1_18_0_canReflect.eachIndex(e,function(e){var t=canReflect_1_18_0_canReflect.getIdentity(e,this.queryLogic.schema);delete this._instances[t]},this)},updateRecordsSync:function(e){e.forEach(function(e){var t=canReflect_1_18_0_canReflect.getIdentity(e,this.queryLogic.schema);this._instances[t]=e},this)}}),a},connectToConnection=function(e,t){return function(a,n){this.connection[e](t.call(this,a.data)).then(function(e){n(e)},function(e){n(parseInt(e.status,10),e)})}},makeMakeItems=function(e,t){var a=Math.max;return function(){var n=[],r=0,s="number";return e.forEach(function(e){n.push(canReflect_1_18_0_canReflect.serialize(e));var o=typeof e[t];"number"==o?r=a(e[t],r):s=o}),{maxId:r,items:n,idType:s}}},stringToAny=function(e){switch(e){case"NaN":case"Infinity":return+e;case"null":return null;case"undefined":return;case"true":case"false":return"true"===e;default:var t=+e;return isNaN(t)?e:t;}},Store=function(e,t,a){var n=e.queryLogic.schema,r=n.identity[0],s=n.keys;for(var o in s&&s[r]||console.warn("No type specified for identity key. Going to convert strings to reasonable type."),this.connection=e,this.makeItems=t,this.idProp=a,this.reset(),Store.prototype)this[o]=this[o].bind(this)},doNotConvert=function(e){return e};function typeConvert(e){var t=this.connection.queryLogic.schema,a=this.idType,n=t.identity[0],r=t.keys;r&&r[n]||(r={},r[n]=function(e){return"string"===a?""+e:"string"==typeof e?stringToAny(e):e});var s={};return canReflect_1_18_0_canReflect.eachKey(e,function(e,t){s[t]=r[t]?canReflect_1_18_0_canReflect.serialize(canReflect_1_18_0_canReflect.convert(e,r[t])):e}),s}canReflect_1_18_0_canReflect.assignMap(Store.prototype,{getListData:connectToConnection("getListData",doNotConvert),getData:connectToConnection("getData",typeConvert),createData:function(e,t){var a=this.idProp;e.data[a]=++this.maxId,this.connection.createData(typeConvert.call(this,e.data)).then(function(e){t(e)},function(e){t(403,e)})},createInstance:function(e){var t=this.idProp;return t in e||(e[t]=++this.maxId),this.connection.createData(e)},updateData:connectToConnection("updateData",typeConvert),updateInstance:function(e){return this.connection.updateData(e)},destroyInstance:function(e){return this.connection.destroyData(e)},destroyData:connectToConnection("destroyData",typeConvert),reset:function(e){e&&(this.makeItems=makeMakeItems(e,this.idProp));var t=this.makeItems();this.maxId=t.maxId,this.idType=t.idType,this.connection.updateListData(t.items,{})},get:function(e){var t=this.connection.queryLogic.memberIdentity(e);return this.connection.getRecord(t)},getList:function(e){return this.connection.getListDataSync(e)}});function looksLikeAQueryLogic(e){return e&&"identityKeys"in e}Store.make=function(e,t,a){var n=Math.max,r,s;"number"==typeof e?(a?!looksLikeAQueryLogic(a)&&(a=new canQueryLogic_1_2_2_canQueryLogic(a)):a=new canQueryLogic_1_2_2_canQueryLogic({}),s=a.identityKeys()[0]||"id",r=function(){for(var a=[],r=0,o=0,l;o<e;o++)l=t(o,a),l[s]||(l[s]=o),r=n(l[s],r),a.push(l);return{maxId:r,items:a}}):Array.isArray(e)&&(a=t,a?!looksLikeAQueryLogic(a)&&(a=new canQueryLogic_1_2_2_canQueryLogic(a)):a=new canQueryLogic_1_2_2_canQueryLogic({}),s=a.identityKeys()[0]||"id",r=makeMakeItems(e,s));var o=canMemoryStore_1_0_2_canMemoryStore({queryLogic:a,errorOnMissingRecord:!0});return new Store(o,r,s)};var canFixture_3_1_7_store=Store,canFixture_3_1_7_core=createCommonjsModule(function(e,t){function a(e){return e&&(e.getData||e.getListData)}function n(e){var t=e.match(/(GET|POST|PUT|DELETE|PATCH) (.+)/i);if(!t)return[void 0,e];var a=t[1],n=t[2];return[a,n]}function r(e){var t=e.match(/\{(.*)\}/),a=t&&2===t.length;if(a)return t[1]}function s(e,t){if(t=t||r(e),!t)return[void 0,e];var a=new RegExp("\\/\\{"+t+"\\}.*"),n=a.test(e),s=n?e.replace(a,""):e,o=n?e:e.trim()+"/{"+t+"}";return[o,s]}function o(e,t){var a={},r=n(e),o=r[0],i=r[1],l=s(i,t.idProp),d=l[0],c=l[1];if(o){var u=["fixture(\""+e+"\", fixture) must use a store method, not a store directly."];if(d){var y=p.item[o];if(y){a[o+" "+d]=t[y];u.push("Replace with fixture(\""+o+" "+d+"\", fixture."+y+") for items.")}}var h=p.list[o];if(h){a[o+" "+c]=t[h];u.push("Replace with fixture(\""+o+" "+c+"\", fixture."+h+") for lists.")}var g=u.join(" ");dev.warn(g)}else{var m=p.item;for(var f in m){var b=m[f];a[f+" "+d]=t[b]}var v=p.list;for(var k in v){var L=v[k];a[k+" "+c]=t[L]}}return a}function i(e){var t=n(e),a=t[0],r=t[1];return a?{type:a,url:r}:{url:r}}function l(e,a,n){var r=t.index(a,!0),s;if(-1<r&&(s=d.splice(r,1)),null==n)return s;if("object"==typeof n){var o=n;n=function(){return o}}return a.fixture=n,d.unshift(a),s}var d=[];t.fixtures=d;var p={item:{GET:"getData",PUT:"updateData",DELETE:"destroyData"},list:{GET:"getListData",POST:"createData"}};t.add=function(e,n){if(void 0===n){var r=[];if(Array.isArray(e))canReflect_1_18_0_canReflect.eachIndex(e,function(e){var a=e.fixture;return e=canReflect_1_18_0_canReflect.assignMap({},e),delete e.fixture,t.add(e,a)});else return canReflect_1_18_0_canReflect.eachKey(e,function(e,a){r=r.concat(t.add(a,e))}),r}return a(n)?(e=o(e,n),t.add(e)):("string"==typeof e&&(e=i(e)),l(d,e,n))};var c=t.add;c.on=!0,c.delay=10,t.callDynamicFixture=function(e,a,n){e.data=a.data;var r=function(){var a=t.extractResponse.apply(e,arguments);return n.apply(this,a)},s=function(){var t=a.fixture(e,r,e.headers,a);canReflect_1_18_0_canReflect.isPromise(t)?t.then(function(e){e!==void 0&&r(200,e)}):t!==void 0&&r(200,t)};return e.async?setTimeout(s,c.delay):(s(),null)},t.index=function(e,t){for(var a=0;a<d.length;a++)if(canFixture_3_1_7_matches.matches(e,d[a],t))return a;return-1},t.get=function(e){if(c.on){var a=t.index(e,!0);-1===a&&(a=t.index(e,!1));var n=0<=a?canReflect_1_18_0_canReflect.assignMap({},d[a]):void 0;if(n){var r=n.fixture,s=canFixture_3_1_7_dataFromUrl(n.url,e.url);if("string"==typeof n.fixture)s&&(r=sub(r,s)),n.url=r,n.data=null,n.type="GET",n.error||(n.error=function(e,t,a){throw"fixtures.js Error "+t+" "+a});else if(canReflect_1_18_0_canReflect.isPlainObject(e.data)||null==e.data){var o=canReflect_1_18_0_canReflect.assignMap({},e.data||{});n.data=canReflect_1_18_0_canReflect.assignMap(o,s)}else n.data=e.data}return n}},t.matches=canFixture_3_1_7_matches,t.extractResponse=function(e,t,a,n){return"number"!=typeof e&&(a=t,t=e,e=200),"string"==typeof a&&(n=a,a={}),[e,t,a,n]}}),canFixture_3_1_7_core_1=canFixture_3_1_7_core.fixtures,canFixture_3_1_7_core_2=canFixture_3_1_7_core.add,canFixture_3_1_7_core_3=canFixture_3_1_7_core.callDynamicFixture,canFixture_3_1_7_core_4=canFixture_3_1_7_core.index,canFixture_3_1_7_core_5=canFixture_3_1_7_core.get,canFixture_3_1_7_core_6=canFixture_3_1_7_core.matches,canFixture_3_1_7_core_7=canFixture_3_1_7_core.extractResponse,XHR=XMLHttpRequest,GLOBAL="undefined"==typeof commonjsGlobal?window:commonjsGlobal,props$2=["type","url","async","response","responseText","responseType","responseXML","responseURL","status","statusText","readyState"],events=["abort","error","load","loadend","loadstart","progress","readystatechange"];(function(){var e=new XHR;for(var t in e)0===t.indexOf("on")?-1===events.indexOf(t.substr(2))&&events.push(t.substr(2)):-1===props$2.indexOf(t)&&"function"!=typeof e[t]&&props$2.push(t)})();function callEvents(e,t){for(var a=e.__events[t]||[],n=0,r=a.length,s;n<r;n++)s=a[n],s.call(e)}function defineNonEnumerable$2(e,t,a){Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:a})}GLOBAL.XMLHttpRequest=function(){var e=this,t=new XHR;defineNonEnumerable$2(this,"_xhr",t),defineNonEnumerable$2(this,"_requestHeaders",{}),defineNonEnumerable$2(this,"__events",{}),events.forEach(function(a){t["on"+a]=function(){if(callEvents(e,a),e["on"+a])return e["on"+a].apply(e,arguments)}}),this.onload=null},GLOBAL.XMLHttpRequest._XHR=XHR,canReflect_1_18_0_canReflect.assignMap(XMLHttpRequest.prototype,{setRequestHeader:function(e,t){this._requestHeaders[e]=t},open:function(e,t,a){this.type=e,this.url=t,this.async=!1!==a},getAllResponseHeaders:function(){return this._xhr.getAllResponseHeaders.apply(this._xhr,arguments)},addEventListener:function(e,t){var a=this.__events[e]=this.__events[e]||[];a.push(t)},removeEventListener:function(e,t){var a=this.__events[e]=this.__events[e]||[],n=a.indexOf(t);0<=n&&a.splice(n,1)},setDisableHeaderCheck:function(e){this._disableHeaderCheck=!!e},getResponseHeader:function(e){return this._xhr.getResponseHeader(e)},abort:function(){var e=this._xhr;return void 0!==this.timeoutId&&(clearTimeout(this.timeoutId),e.open(this.type,this.url,!1!==this.async),e.send()),e.abort()},send:function(e){var t=this.type.toLowerCase()||"get",a={url:this.url,data:e,headers:this._requestHeaders,type:t,method:t,async:this.async,xhr:this};if((a.data||"get"!==a.type)&&"delete"!==a.type||(a.data=canDeparam_1_2_1_canDeparam(a.url.split("?")[1]),a.url=a.url.split("?")[0]),"string"==typeof a.data)try{a.data=JSON.parse(a.data)}catch(t){a.data=canDeparam_1_2_1_canDeparam(a.data)}var n=canFixture_3_1_7_core.get(a),r=this;if(n&&"function"==typeof n.fixture)return void(this.timeoutId=canFixture_3_1_7_core.callDynamicFixture(a,n,function(e,t,a,n){t="string"==typeof t?t:JSON.stringify(t),r._xhr={open:function(){},send:function(){},abort:function(){},getResponseHeader:function(){}},canReflect_1_18_0_canReflect.assignMap(r,{readyState:4,status:e});200<=e&&300>e||304===e?canReflect_1_18_0_canReflect.assignMap(r,{statusText:n||"OK",responseText:t}):canReflect_1_18_0_canReflect.assignMap(r,{statusText:n||"error",responseText:t}),r.getAllResponseHeaders=function(){var e=[];return canReflect_1_18_0_canReflect.eachKey(a||{},function(t,a){Array.prototype.push.apply(e,[a,": ",t,"\r\n"])}),e.join("")},r.onreadystatechange&&r.onreadystatechange({target:r}),callEvents(r,"progress"),r.onprogress&&r.onprogress(),callEvents(r,"load"),r.onload&&r.onload(),callEvents(r,"loadend"),r.onloadend&&r.onloadend()}));var s=function(){return r._xhr.open(r._xhr.type,r._xhr.url,r._xhr.async),r._requestHeaders&&Object.keys(r._requestHeaders).forEach(function(e){r._xhr.setRequestHeader(e,r._requestHeaders[e])}),r._xhr.send(e)};return n&&"number"==typeof n.fixture?(canLog_1_0_2_canLog.log("can-fixture: "+a.url+" => delay "+n.fixture+"ms"),void(this.timeoutId=setTimeout(s,n.fixture))):(n&&(canLog_1_0_2_canLog.log("can-fixture: "+a.url+" => "+n.url),canReflect_1_18_0_canReflect.assignMap(r,n)),s())}}),props$2.forEach(function(e){Object.defineProperty(XMLHttpRequest.prototype,e,{get:function(){return this._xhr[e]},set:function(t){try{this._xhr[e]=t}catch(t){}}})});var fixture=canFixture_3_1_7_core.add,noop$3=function(){};canReflect_1_18_0_canReflect.assignMap(fixture,{rand:function e(t,a,n){var r=Math.floor;if("number"==typeof t)return"number"==typeof a?t+r(Math.random()*(a-t+1)):r(Math.random()*(t+1));var s=t.slice(0);a===void 0?(a=1,n=s.length):n===void 0&&(n=a);for(var o=[],l=a+Math.round(e(n-a)),d=0;d<l;d++){var p=e(s.length-1),c=s.splice(p,1)[0];o.push(c)}return o},xhr:function(e){return canReflect_1_18_0_canReflect.assignMap({},{abort:noop$3,getAllResponseHeaders:function(){return""},getResponseHeader:function(){return""},open:noop$3,overrideMimeType:noop$3,readyState:4,responseText:"",responseXML:null,send:noop$3,setRequestHeader:noop$3,status:200,statusText:"OK"},e)},store:canFixture_3_1_7_store.make,fixtures:canFixture_3_1_7_core.fixtures}),"undefined"!=typeof window&&"function"!=typeof commonjsRequire.resolve&&(window.fixture=function(){return dev.warn("You are using the global fixture. Make sure you import can-fixture."),fixture.apply(this,arguments)});var canFixture_3_1_7_fixture=canNamespace_1_0_0_canNamespace.fixture=fixture,behaviorsMap={};function behavior(e,t){"string"!=typeof e&&(t=e,e=void 0);var a=function(a){var n=function(){};Object.defineProperty(n,"name",{value:e,configurable:!0}),n.prototype=a;var r=new n,s="function"==typeof t?t.apply(r,arguments):t;for(var o in s)s.hasOwnProperty(o)?Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(s,o)):r[o]=s[o];return r.__behaviorName=e,r};return e&&(a.behaviorName=e,behaviorsMap[e]=a),a.isBehavior=!0,a}behavior.map=behaviorsMap;var canConnect_3_2_5_behavior=behavior,behavior$1=canConnect_3_2_5_behavior,connect=function(e,t){e=e.map(function(e,t){var a=-1;return"string"==typeof e?(a=connect.order.indexOf(e),e=e.map[e]):e.isBehavior?a=connect.order.indexOf(e.behaviorName):e=connect.behavior(e),{originalIndex:t,sortedIndex:a,behavior:e}}),e.sort(function(e,t){return~e.sortedIndex&&~t.sortedIndex?e.sortedIndex-t.sortedIndex:e.originalIndex-t.originalIndex}),e=e.map(function(e){return e.behavior});var a=connect.base(connect.behavior("options",function(){return t})());return e.forEach(function(e){a=e(a)}),a.init&&a.init(),a};connect.order=["data/localstorage-cache","data/url","data/parse","cache-requests","data/combine-requests","constructor","constructor/store","can/map","can/ref","fall-through-cache","data/worker","real-time","data/callbacks-cache","data/callbacks","constructor/callbacks-once"],connect.behavior=behavior$1;var canConnect_3_2_5_connect=connect,base=canConnect_3_2_5_behavior("base",function(e){var t;return{id:function(e){if(this.queryLogic)return canReflect_1_18_0_canReflect.getIdentity(e,this.queryLogic.schema);if(this.idProp)return e[this.idProp];throw new Error("can-connect/base/base - Please add a queryLogic option.")},listQuery:function(e){return e[this.listQueryProp]},listQueryProp:canSymbol_1_6_5_canSymbol.for("can.listQuery"),init:function(){},get queryLogic(){if(t)return t;return e.queryLogic?e.queryLogic:e.algebra?e.algebra:void 0},set queryLogic(e){t=e}}});canConnect_3_2_5_connect.base=base;var canConnect_3_2_5_canConnect=canNamespace_1_0_0_canNamespace.connect=canConnect_3_2_5_connect,assign$1=canReflect_1_18_0_canReflect.assignMap,WeakReferenceMap=function(){this.set={}};assign$1(WeakReferenceMap.prototype,{has:function(e){return!!this.set[e]},addReference:function(e,t,a){if("undefined"==typeof e)throw new Error("can-connect: You must provide a key to store a value in a WeakReferenceMap");var n=this.set[e];n||(n=this.set[e]={item:t,referenceCount:0,key:e}),n.referenceCount+=a||1},referenceCount:function(e){var t=this.set[e];if(t)return t.referenceCount},deleteReference:function(e){var t=this.set[e];t&&(t.referenceCount--,0===t.referenceCount&&delete this.set[e])},get:function(e){var t=this.set[e];if(t)return t.item},forEach:function(e){for(var t in this.set)e(this.set[t].item,t)}});var weakReferenceMap=WeakReferenceMap,updateDeepExceptIdentity=function(e,t,a){if(a||(a=canReflect_1_18_0_canReflect.getSchema(e)),!a)throw new Error("can-diff/update-except-id is unable to update without a schema.");a.identity.forEach(function(a){var n=canReflect_1_18_0_canReflect.getKeyValue(e,a);void 0!==n&&canReflect_1_18_0_canReflect.setKeyValue(t,a,n)}),canReflect_1_18_0_canReflect.updateDeep(e,t)},idMerge=function(e,t,n,a){var r=list(e,t,function(e,t){return n(e)===n(t)});r.forEach(function(t){canReflect_1_18_0_canReflect.splice(e,t.index,t.deleteCount,t.insert.map(a))})},makeArray=canReflect_1_18_0_canReflect.toArray,assign$2=canReflect_1_18_0_canReflect.assignMap,constructor_1=canConnect_3_2_5_behavior("constructor",function(){var e={cidStore:new weakReferenceMap,_cid:0,get:function(e){var t=this;return this.getData(e).then(function(e){return t.hydrateInstance(e)})},getList:function(e){e=e||{};var t=this;return this.getListData(e).then(function(a){return t.hydrateList(a,e)})},hydrateList:function(e,t){Array.isArray(e)&&(e={data:e});for(var a=[],n=0;n<e.data.length;n++)a.push(this.hydrateInstance(e.data[n]));if(e.data=a,this.list)return this.list(e,t);var r=e.data.slice(0);return r[this.listQueryProp||"__listQuery"]=t,copyMetadata(e,r),r},hydrateInstance:function(e){return this.instance?this.instance(e):assign$2({},e)},save:function(e){var t=this.serializeInstance(e),a=this.id(e),n=this;if(void 0===a){var r=this._cid++;return this.cidStore.addReference(r,e),this.createData(t,r).then(function(t){return void 0!==t&&n.createdInstance(e,t),n.cidStore.deleteReference(r,e),e})}return this.updateData(t).then(function(t){return void 0!==t&&n.updatedInstance(e,t),e})},destroy:function(e){var t=this.serializeInstance(e),a=this,n=this.id(e);return void 0===n?(this.destroyedInstance(e,{}),Promise.resolve(e)):this.destroyData(t).then(function(t){return void 0!==t&&a.destroyedInstance(e,t),e})},createdInstance:function(e,t){assign$2(e,t)},updatedInstance:function(e,t){updateDeepExceptIdentity(e,t,this.queryLogic.schema)},updatedList:function(e,t){for(var a=[],n=0;n<t.data.length;n++)a.push(this.hydrateInstance(t.data[n]));idMerge(e,a,this.id.bind(this),this.hydrateInstance.bind(this)),copyMetadata(t,e)},destroyedInstance:function(e,t){updateDeepExceptIdentity(e,t,this.queryLogic.schema)},serializeInstance:function(e){return assign$2({},e)},serializeList:function(e){var t=this;return makeArray(e).map(function(e){return t.serializeInstance(e)})},isNew:function(e){var t=this.id(e);return!(t||0===t)}};return e});function copyMetadata(e,t){for(var a in e)"data"!=a&&("function"==typeof t.set?t.set(a,e[a]):"function"==typeof t.attr?t.attr(a,e[a]):t[a]=e[a])}var assignDeepExceptIdentity=function(e,t,a){if(a||(a=canReflect_1_18_0_canReflect.getSchema(e)),!a)throw new Error("can-diff/update-except-id is unable to update without a schema.");a.identity.forEach(function(a){var n=canReflect_1_18_0_canReflect.getKeyValue(e,a);void 0!==n&&canReflect_1_18_0_canReflect.setKeyValue(t,a,n)}),canReflect_1_18_0_canReflect.assignDeep(e,t)};function smartMerge(e,t){return t=canReflect_1_18_0_canReflect.serialize(t),canReflect_1_18_0_canReflect.isMoreListLikeThanMapLike(e)?mergeList(e,t):mergeMap(e,t),e}function mergeMap(e,t){canReflect_1_18_0_canReflect.eachKey(e,function(a,n){if(!canReflect_1_18_0_canReflect.hasKey(t,n))return void canReflect_1_18_0_canReflect.deleteKeyValue(e,n);var r=canReflect_1_18_0_canReflect.getKeyValue(t,n);if(canReflect_1_18_0_canReflect.deleteKeyValue(t,n),canReflect_1_18_0_canReflect.isPrimitive(a))return void canReflect_1_18_0_canReflect.setKeyValue(e,n,r);var s=Array.isArray(r),o=canReflect_1_18_0_canReflect.isMoreListLikeThanMapLike(a);if(o&&s)mergeList(a,r);else if(!s&&!o&&canReflect_1_18_0_canReflect.isMapLike(a)&&canReflect_1_18_0_canReflect.isPlainObject(r)){var i=canReflect_1_18_0_canReflect.getSchema(a);if(i&&i.identity&&i.identity.length){var l=canReflect_1_18_0_canReflect.getIdentity(a,i);if(null!=l&&l===canReflect_1_18_0_canReflect.getIdentity(r,i))return void mergeMap(a,r)}canReflect_1_18_0_canReflect.setKeyValue(e,n,canReflect_1_18_0_canReflect.new(a.constructor,r))}else canReflect_1_18_0_canReflect.setKeyValue(e,n,r)}),canReflect_1_18_0_canReflect.eachKey(t,function(t,a){canReflect_1_18_0_canReflect.setKeyValue(e,a,t)})}function mergeList(e,t){var a=canReflect_1_18_0_canReflect.getSchema(e),n,r;a&&(n=a.values),n&&(r=canReflect_1_18_0_canReflect.getSchema(n)),!r&&0<canReflect_1_18_0_canReflect.size(e)&&(r=canReflect_1_18_0_canReflect.getSchema(canReflect_1_18_0_canReflect.getKeyValue(e,0)));var s=r&&r.identity&&r.identity.length?function(e,t){var a=canReflect_1_18_0_canReflect.getIdentity(e,r),n=canReflect_1_18_0_canReflect.getIdentity(t,r),s=a===n;return s&&mergeMap(e,t),s}:function(e,t){var a=e===t;return a&&!canReflect_1_18_0_canReflect.isPrimitive(e)&&mergeMap(e,t),a};var o=list(e,t,s),i=n?canReflect_1_18_0_canReflect.new.bind(canReflect_1_18_0_canReflect,n):function(e){return e};return o.length?void o.forEach(function(t){applyPatch(e,t,i)}):e}function applyPatch(e,t,a){var n=a&&t.insert.map(function(e){return a(e)})||t.insert,r=[t.index,t.deleteCount].concat(n);return e.splice.apply(e,r),e}smartMerge.applyPatch=applyPatch;var mergeDeep=smartMerge,each$1=canReflect_1_18_0_canReflect.each,isPlainObject$1=canReflect_1_18_0_canReflect.isPlainObject,getNameSymbol$1=canSymbol_1_6_5_canSymbol.for("can.getName");function smartMergeExceptIdentity(e,t,a){if(a||(a=canReflect_1_18_0_canReflect.getSchema(e)),!a)throw new Error("can-connect/can/map/ is unable to update without a schema.");a.identity.forEach(function(a){var n=canReflect_1_18_0_canReflect.getKeyValue(e,a);void 0!==n&&canReflect_1_18_0_canReflect.setKeyValue(t,a,n)}),mergeDeep(e,t)}var canMapBehavior=canConnect_3_2_5_behavior("can/map",function(e){var t={init:function(){if(!this.Map)throw new Error("can-connect/can/map/map must be configured with a Map type");this[getNameSymbol$1]||(this[getNameSymbol$1]=function(){return this.name?"Connection{"+this.name+"}":this.Map?"Connection{"+canReflect_1_18_0_canReflect.getName(this.Map)+"}":"string"==typeof this.url?"Connection{"+this.url+"}":"Connection{}"}),this.List=this.List||this.Map.List;var t=!!this.List;t||Object.defineProperty(this,"List",{get:function(){throw new Error("can-connect/can/map/map - "+canReflect_1_18_0_canReflect.getName(this)+" should be configured with a List type.")}}),overwrite(this,this.Map,mapOverwrites),t&&overwrite(this,this.List,listOverwrites),this.queryLogic||(this.queryLogic=new canQueryLogic_1_2_2_canQueryLogic(this.Map));var a=this;if(this.Map[canSymbol_1_6_5_canSymbol.for("can.onInstanceBoundChange")]){var n=function(e,t){var n=t?"addInstanceReference":"deleteInstanceReference";a[n]&&a[n](e)};this.Map[canSymbol_1_6_5_canSymbol.for("can.onInstanceBoundChange")](n)}else console.warn("can-connect/can/map is unable to listen to onInstanceBoundChange on the Map type");if(t)if(this.List[canSymbol_1_6_5_canSymbol.for("can.onInstanceBoundChange")]){var r=function(e,t){var n=t?"addListReference":"deleteListReference";a[n]&&a[n](e)};this.List[canSymbol_1_6_5_canSymbol.for("can.onInstanceBoundChange")](r)}else console.warn("can-connect/can/map is unable to listen to onInstanceBoundChange on the List type");this.Map[canSymbol_1_6_5_canSymbol.for("can.onInstancePatches")]?this.Map[canSymbol_1_6_5_canSymbol.for("can.onInstancePatches")](function(e,t){t.forEach(function(t){("add"===t.type||"set"===t.type)&&t.key===a.idProp&&e[canSymbol_1_6_5_canSymbol.for("can.isBound")]()&&a.addInstanceReference(e)})}):console.warn("can-connect/can/map is unable to listen to onInstancePatches on the Map type"),e.init.apply(this,arguments)},serializeInstance:function(e){return canReflect_1_18_0_canReflect.serialize(e)},serializeList:function(e){return canReflect_1_18_0_canReflect.serialize(e)},instance:function(e){var t=this.Map;return new t(e)},list:function(e,t){var a=this.List||this.Map&&this.Map.List,n=canReflect_1_18_0_canReflect.new(a,e.data);return canReflect_1_18_0_canReflect.eachKey(e,function(e,t){"data"!==t&&canReflect_1_18_0_canReflect.setKeyValue(n,t,e)}),n[this.listQueryProp]=t,n},updatedList:function(){canQueues_1_3_1_canQueues.batch.start();canQueues_1_3_1_canQueues.mutateQueue.enqueue(e.updatedList,this,arguments,{}),canQueues_1_3_1_canQueues.batch.stop()},save:function(t){canReflect_1_18_0_canReflect.setKeyValue(t,"_saving",!0);var a=function(){canReflect_1_18_0_canReflect.setKeyValue(t,"_saving",!1)},n=e.save.apply(this,arguments);return n.then(a,a),n},destroy:function(t){canReflect_1_18_0_canReflect.setKeyValue(t,"_destroying",!0);var a=function(){canReflect_1_18_0_canReflect.setKeyValue(t,"_destroying",!1)},n=e.destroy.apply(this,arguments);return n.then(a,a),n}};return each$1(["created","updated","destroyed"],function(e){t[e+"Instance"]=function(t,a){a&&"object"==typeof a&&("destroyed"===e&&0===canReflect_1_18_0_canReflect.size(a)||(this.constructor.removeAttr?updateDeepExceptIdentity(t,a,this.queryLogic.schema):this.updateInstanceWithAssignDeep?assignDeepExceptIdentity(t,a,this.queryLogic.schema):smartMergeExceptIdentity(t,a,this.queryLogic.schema))),"created"===e&&this.moveCreatedInstanceToInstanceStore&&this.moveCreatedInstanceToInstanceStore(t),canMapBehavior.callbackInstanceEvents(e,t)}}),t});canMapBehavior.callbackInstanceEvents=function(e,t){var a=t.constructor;canQueues_1_3_1_canQueues.batch.start(),map$1.dispatch.call(t,{type:e,target:t}),map$1.dispatch.call(a,e,[t]),canQueues_1_3_1_canQueues.batch.stop()};var mapOverwrites={static:{getList:function(e,t){return function(e){return t.getList(e)}},findAll:function(e,t){return function(e){return t.getList(e)}},get:function(e,t){return function(e){return t.get(e)}},findOne:function(e,t){return function(e){return t.get(e)}}},prototype:{isNew:function(e,t){return function(){return t.isNew(this)}},isSaving:function(){return function(){return!!canReflect_1_18_0_canReflect.getKeyValue(this,"_saving")}},isDestroying:function(){return function(){return!!canReflect_1_18_0_canReflect.getKeyValue(this,"_destroying")}},save:function(e,t){return function(e,a){var n=t.save(this);return n.then(e,a),n}},destroy:function(e,t){return function(e,a){var n=t.destroy(this);return n.then(e,a),n}}},properties:{_saving:{enumerable:!1,value:!1,configurable:!0,writable:!0},_destroying:{enumerable:!1,value:!1,configurable:!0,writable:!0}}},listOverwrites={static:{_bubbleRule:function(e){return function(t,a){var n=e(t,a);return n.push("destroyed"),n}}},prototype:{setup:function(e,t){return function(a){isPlainObject$1(a)&&!Array.isArray(a)?(this[t.listQueryProp]=a,e.apply(this),this.replace(canReflect_1_18_0_canReflect.isPromise(a)?a:t.getList(a))):e.apply(this,arguments)}}},properties:{}},overwrite=function(e,t,a){for(var n in a.properties)canReflect_1_18_0_canReflect.defineInstanceKey(t,n,a.properties[n]);for(n in a.prototype)t.prototype[n]=a.prototype[n](t.prototype[n],e);if(a.static)for(n in a.static)t[n]=a.static[n](t[n],e)},map$4=canMapBehavior,assign$3=canReflect_1_18_0_canReflect.assignMap,WeakReferenceSet=function(){this.set=[]};assign$3(WeakReferenceSet.prototype,{has:function(e){return-1!==this._getIndex(e)},addReference:function(e,t){var a=this._getIndex(e),n=this.set[a];n||(n={item:e,referenceCount:0},this.set.push(n)),n.referenceCount+=t||1},deleteReference:function(e){var t=this._getIndex(e),a=this.set[t];a&&(a.referenceCount--,0===a.referenceCount&&this.set.splice(t,1))},delete:function(e){var t=this._getIndex(e);-1!==t&&this.set.splice(t,1)},get:function(e){var t=this.set[this._getIndex(e)];if(t)return t.item},referenceCount:function(e){var t=this.set[this._getIndex(e)];if(t)return t.referenceCount},_getIndex:function(e){var t;return this.set.every(function(a,n){return a.item!==e||(t=n,!1)}),void 0===t?-1:t},forEach:function(e){return this.set.forEach(e)}});var weakReferenceSet=WeakReferenceSet,sortedSetJson=function(e){return null==e?e:JSON.stringify(canReflect_1_18_0_canReflect.cloneKeySort(e))},store=createCommonjsModule(function(e){var t=0,a=null,n={increment:function(){t++,clearTimeout(a)},decrement:function(){t--,0===t&&(a=setTimeout(function(){n.dispatch("end")},e.exports.requestCleanupDelay)),0>t&&(t=0)},count:function(){return t}};map$1(n);var r=canConnect_3_2_5_canConnect.behavior("constructor/store",function(e){var t={instanceStore:new weakReferenceMap,newInstanceStore:new weakReferenceSet,listStore:new weakReferenceMap,init:function(){e.init&&e.init.apply(this,arguments),this.hasOwnProperty("_requestInstances")||(this._requestInstances={}),this.hasOwnProperty("_requestLists")||(this._requestLists={}),n.on("end",function(){for(var e in this._requestInstances)this.instanceStore.deleteReference(e);for(e in this._requestInstances={},this._requestLists)this.listStore.deleteReference(e),this._requestLists[e].forEach(this.deleteInstanceReference.bind(this));this._requestLists={}}.bind(this))},_finishedRequest:function(){n.decrement(this)},addInstanceReference:function(e,t){var a=t||this.id(e);a===void 0?this.newInstanceStore.addReference(e):this.instanceStore.addReference(a,e)},createdInstance:function(t){e.createdInstance.apply(this,arguments),this.moveCreatedInstanceToInstanceStore(t)},moveCreatedInstanceToInstanceStore:function(e){var t=this.id(e);if(this.newInstanceStore.has(e)&&t!==void 0){var a=this.newInstanceStore.referenceCount(e);this.newInstanceStore.delete(e),this.instanceStore.addReference(t,e,a)}},addInstanceMetaData:function(e,t,a){var n=this.instanceStore.set[this.id(e)];n&&(n[t]=a)},getInstanceMetaData:function(e,t){var a=this.instanceStore.set[this.id(e)];if(a)return a[t]},deleteInstanceMetaData:function(e,t){var a=this.instanceStore.set[this.id(e)];delete a[t]},deleteInstanceReference:function(e){var t=this.id(e);t===void 0?this.newInstanceStore.deleteReference(e):this.instanceStore.deleteReference(this.id(e),e)},addListReference:function(e,t){var a=sortedSetJson(t||this.listQuery(e));a&&(this.listStore.addReference(a,e),e.forEach(function(e){this.addInstanceReference(e)}.bind(this)))},deleteListReference:function(e,t){var a=sortedSetJson(t||this.listQuery(e));a&&(this.listStore.deleteReference(a,e),e.forEach(this.deleteInstanceReference.bind(this)))},hydratedInstance:function(e){if(0<n.count()){var t=this.id(e);this._requestInstances[t]||(this.addInstanceReference(e),this._requestInstances[t]=e)}},hydrateInstance:function(t){var a=this.id(t);if((a||0===a)&&this.instanceStore.has(a)){var n=this.instanceStore.get(a);return this.updatedInstance(n,t),n}var r=e.hydrateInstance.call(this,t);return this.hydratedInstance(r),r},hydratedList:function(e,t){if(0<n.count()){var a=sortedSetJson(t||this.listQuery(e));a&&!this._requestLists[a]&&(this.addListReference(e,t),this._requestLists[a]=e)}},hydrateList:function(t,a){a=a||this.listQuery(t);var n=sortedSetJson(a);if(n&&this.listStore.has(n)){var r=this.listStore.get(n);return this.updatedList(r,t,a),r}var s=e.hydrateList.call(this,t,a);return this.hydratedList(s,a),s},getList:function(t){var a=this;n.increment(this);var r=e.getList.call(this,t);return r.then(function(){a._finishedRequest()},function(){a._finishedRequest()}),r},get:function(t){var a=this;n.increment(this);var r=e.get.call(this,t);return r.then(function(){a._finishedRequest()},function(){a._finishedRequest()}),r},save:function(t){var a=this;n.increment(this);var r=!this.isNew(t);r&&this.addInstanceReference(t);var s=e.save.call(this,t);return s.then(function(){r&&a.deleteInstanceReference(t),a._finishedRequest()},function(){a._finishedRequest()}),s},destroy:function(t){var a=this;this.addInstanceReference(t),n.increment(this);var r=e.destroy.call(this,t);return r.then(function(e){a._finishedRequest(),a.deleteInstanceReference(e)},function(){a._finishedRequest()}),r},updatedList:function(t,a,n){var r=t.slice(0);a.data||"number"!=typeof a.length||(a={data:a}),e.updatedList?(e.updatedList.call(this,t,a,n),t.forEach(function(e){this.addInstanceReference(e)}.bind(this))):a.data&&a.data.forEach(function(e){this.addInstanceReference(e)}.bind(this)),r.forEach(this.deleteInstanceReference.bind(this))}};return t});r.requests=n,r.requestCleanupDelay=10,e.exports=r}),each$2=canReflect_1_18_0_canReflect.each,pairs={getListData:"gotListData",createData:"createdData",updateData:"updatedData",destroyData:"destroyedData"},dataCallbackBehavior=canConnect_3_2_5_canConnect.behavior("data/callbacks",function(e){var t={};return each$2(pairs,function(a,n){t[n]=function(t,r){var s=this;return e[n].call(this,t).then(function(e){return s[a]?s[a].call(s,e,t,r):e})}}),t}),callbacks=dataCallbackBehavior,each$3=canReflect_1_18_0_canReflect.each,parse$1=canConnect_3_2_5_behavior("data/parse",function(e){var t={parseListData:function(t){e.parseListData&&(t=e.parseListData.apply(this,arguments));var a;if(Array.isArray(t))a={data:t};else{var n=this.parseListProp||"data";if(t.data=get_1(t,n),a=t,"data"!==n&&delete t[n],!Array.isArray(a.data))throw new Error("Could not get any raw data while converting using .parseListData")}for(var r=[],s=0;s<a.data.length;s++)r.push(this.parseInstanceData(a.data[s]));return a.data=r,a},parseInstanceData:function(t){return e.parseInstanceData&&(t=e.parseInstanceData.apply(this,arguments)||t),this.parseInstanceProp?get_1(t,this.parseInstanceProp)||t:t}};return each$3(pairs$1,function(a,n){t[n]=function(t){var r=this;return e[n].call(this,t).then(function(){return r[a].apply(r,arguments)})}}),t}),pairs$1={getListData:"parseListData",getData:"parseInstanceData",createData:"parseInstanceData",updateData:"parseInstanceData",destroyData:"parseInstanceData"},xhrs=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")}],_xhrf=null,originUrl=canParseUri_1_2_2_canParseUri(global_1().location.href),globalSettings={},makeXhr=function(){if(null!=_xhrf)return _xhrf();for(var e=0,t=xhrs.length;e<t;e++)try{var a=xhrs[e],n=a();if(null!=n)return _xhrf=a,n}catch(t){continue}return function(){}},contentTypes={json:"application/json",form:"application/x-www-form-urlencoded"},_xhrResp=function(t,a){try{var n=a.dataType||t.getResponseHeader("Content-Type").split(";")[0];return n&&(t.responseText||t.responseXML)?"text/xml"===n||"xml"===n?t.responseXML:"text/json"===n||"application/json"===n||"text/javascript"===n||"application/javascript"===n||"application/x-javascript"===n||"json"===n?t.responseText&&JSON.parse(t.responseText):t.responseText:t}catch(a){return t}};function ajax(t){function e(){l||a.send(h)}var a=makeXhr(),r=0,s={},i=new Promise(function(e,t){s.resolve=e,s.reject=t}),l=!1,d,p,c;i.abort=function(){l=!0,a.abort()},t=[{userAgent:"XMLHttpRequest",lang:"en",type:"GET",data:null,dataType:"json"},globalSettings,t].reduce(function(e,t){return canReflect_1_18_0_canReflect.assignDeep(e,t)});var u=!1!==t.async;if(t.contentType||(t.contentType="GET"===t.type.toUpperCase()?contentTypes.form:contentTypes.json),null==t.crossDomain)try{c=canParseUri_1_2_2_canParseUri(t.url),t.crossDomain=!!(c.protocol&&c.protocol!==originUrl.protocol||c.host&&c.host!==originUrl.host)}catch(a){t.crossDomain=!0}t.timeout&&(d=setTimeout(function(){a.abort(),t.timeoutFn&&t.timeoutFn(t.url)},t.timeout)),a.onreadystatechange=function(){try{4===a.readyState?(d&&clearTimeout(d),300>a.status?t.success&&t.success(_xhrResp(a,t)):t.error&&t.error(a,a.status,a.statusText),t.complete&&t.complete(a,a.statusText),200<=a.status&&300>a.status?s.resolve(_xhrResp(a,t)):s.reject(_xhrResp(a,t))):t.progress&&t.progress(++r)}catch(t){s.reject(t)}};var y=t.url,h=null,g=t.type.toUpperCase(),m=t.contentType===contentTypes.json,b="POST"===g||"PUT"===g;!b&&t.data&&(y+="?"+(m?JSON.stringify(t.data):canParam_1_1_2_canParam(t.data))),a.open(g,y,u);var v=t.crossDomain&&-1!==["GET","POST","HEAD"].indexOf(g);if(p="undefined"!=typeof FormData&&t.data instanceof FormData,b?p?h=t.data:m&&!v?(h="object"==typeof t.data?JSON.stringify(t.data):t.data,a.setRequestHeader("Content-Type","application/json")):(h=canParam_1_1_2_canParam(t.data),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded")):a.setRequestHeader("Content-Type",t.contentType),v||a.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.xhrFields)for(var k in t.xhrFields)a[k]=t.xhrFields[k];if(t.beforeSend){var f=t.beforeSend.call(t,a,t);if(canReflect_1_18_0_canReflect.isPromise(f))return f.then(e).catch(s.reject),i}return e(),i}var canAjax_2_4_6_canAjax=canNamespace_1_0_0_canNamespace.ajax=ajax,ajaxSetup=function(e){globalSettings=e||{}};canAjax_2_4_6_canAjax.ajaxSetup=ajaxSetup;var methodMapping={item:{GET:"getData",PUT:"updateData",DELETE:"destroyData"},list:{GET:"getListData",POST:"createData"}};function inferIdProp(e){var t=e.match(/\{(.*)\}/),a=t&&2===t.length;if(a)return t[1]}function getItemAndListUrls(e,t){t=t||inferIdProp(e)||"id";var a=new RegExp("\\/\\{"+t+"\\}.*"),n=a.test(e),r=n?e.replace(a,""):e,s=n?e:e.trim()+"/{"+t+"}";return{item:s,list:r}}var canMakeRest_0_1_4_canMakeRest=function(e,t){var a={};return canReflect_1_18_0_canReflect.eachKey(getItemAndListUrls(e,t),function(e,t){canReflect_1_18_0_canReflect.eachKey(methodMapping[t],function(t,n){a[t]={method:n,url:e}})}),a},makePromise=function(e){return e&&"function"==typeof e.then&&!canReflect_1_18_0_canReflect.isPromise(e)?new Promise(function(t,a){e.then(t,a)}):e},defaultRest=canMakeRest_0_1_4_canMakeRest("/resource/{id}"),urlBehavior=canConnect_3_2_5_behavior("data/url",function(e){var t={};return canReflect_1_18_0_canReflect.eachKey(defaultRest,function(a,n){t[n]=function(t){var r=methodMetaData[n],s;if("object"==typeof this.url){if(s=this.url.beforeSend,"function"==typeof this.url[n])return makePromise(this.url[n](t));if(this.url[n]){var o=makeAjax(this.url[n],t,a.method,this.ajax||canAjax_2_4_6_canAjax,findContentType(this.url,a.method),r,s);return makePromise(o)}}var i="string"==typeof this.url?this.url:this.url.resource;if(i){var l=canReflect_1_18_0_canReflect.getSchema(this.queryLogic).identity,d=i.replace(/\/+$/,""),p=canMakeRest_0_1_4_canMakeRest(d,l[0])[n];return makePromise(makeAjax(p.url,t,p.method,this.ajax||canAjax_2_4_6_canAjax,findContentType(this.url,p.method),r,s))}return e[name].call(this,t)}}),t}),methodMetaData={getListData:{},getData:{},createData:{},updateData:{},destroyData:{includeData:!1}},findContentType=function(e,t){if("object"==typeof e&&e.contentType){var a="application/x-www-form-urlencoded"===e.contentType||"application/json"===e.contentType;if(a)return e.contentType}return"GET"===t?"application/x-www-form-urlencoded":"application/json"};function urlParamEncoder(e,t){return encodeURIComponent(t)}var makeAjax=function(e,t,a,n,r,s,o){var i={};if("string"==typeof e){var l=e.split(/\s+/);i.url=l.pop(),l.length&&(i.type=l.pop())}else canReflect_1_18_0_canReflect.assignMap(i,e);return i.data="object"!=typeof t||Array.isArray(t)?t:canReflect_1_18_0_canReflect.assignMap(i.data||{},t),i.url=replaceWith(i.url,i.data,urlParamEncoder,!0),i.contentType=r,!1===s.includeData&&delete i.data,n(canReflect_1_18_0_canReflect.assignMap({type:a||"post",dataType:"json",beforeSend:o},i))},url=urlBehavior,indexByIdentity=function(e,t,a){var n=canReflect_1_18_0_canReflect.size(e);if(!a&&0<n&&(a=canReflect_1_18_0_canReflect.getSchema(e[0])),a||(a=canReflect_1_18_0_canReflect.getSchema(t)),!a)throw new Error("No schema to use to get identity.");for(var r=canReflect_1_18_0_canReflect.getIdentity(t,a),s=0,o;s<n;s++)if(o=canReflect_1_18_0_canReflect.getIdentity(e[s],a),r===o)return s;return-1},spliceSymbol=canSymbol_1_6_5_canSymbol.for("can.splice");function updateList(e,t,a,n){-1===a?-1!==n&&canReflect_1_18_0_canReflect.splice(e,n,0,[t()]):-1===n?canReflect_1_18_0_canReflect.splice(e,a,1,[]):n!==a&&(a<n?(canReflect_1_18_0_canReflect.splice(e,n,0,[t()]),canReflect_1_18_0_canReflect.splice(e,a,1,[])):(canReflect_1_18_0_canReflect.splice(e,a,1,[]),canReflect_1_18_0_canReflect.splice(e,n,0,[t()])))}function updateListWithItem(e,t,a,n,r,s){if(-1===a||n!==a+1&&n!==a)if(void 0!==e[spliceSymbol])updateList(e,function(){return r.hydrateInstance(t)},a,n);else{var o=r.serializeList(e);updateList(o,function(){return t},a,n),r.updatedList(e,{data:o},s)}}var realTime=canConnect_3_2_5_canConnect.behavior("real-time",function(e){var t=Promise.resolve(),a;return a={createData:function(){var a=e.createData.apply(this,arguments),n=a.catch(function(){return""});return t=Promise.all([t,n]),a},createInstance:function(e){var a=this;return new Promise(function(n){t.then(function(){setTimeout(function(){var t=a.id(e),r=a.instanceStore.get(t),s;r?n(a.updateInstance(e)):(r=a.hydrateInstance(e),s=a.serializeInstance(r),a.addInstanceReference(r),Promise.resolve(a.createdData(e,s)).then(function(){a.deleteInstanceReference(r),n(r)}))},1)})})},createdData:function(e,t,a){var n;return n=void 0===a?this.instanceStore.get(this.id(e)):this.cidStore.get(a),this.addInstanceReference(n,this.id(e)),this.createdInstance(n,e),create.call(this,this.serializeInstance(n)),void this.deleteInstanceReference(n)},updatedData:function(e,t){var a=this.instanceStore.get(this.id(t));return this.updatedInstance(a,e),void update$1.call(this,this.serializeInstance(a))},updateInstance:function(e){var t=this.id(e),a=this.instanceStore.get(t);a||(a=this.hydrateInstance(e)),this.addInstanceReference(a);var n=this.serializeInstance(a),r=this;return Promise.resolve(this.updatedData(e,n)).then(function(){return r.deleteInstanceReference(a),a})},destroyedData:function(e,t){var a=this.id(t||e),n=this.instanceStore.get(a);n||(n=this.hydrateInstance(e));var r=this.serializeInstance(n);return this.destroyedInstance(n,e),void destroy.call(this,r)},destroyInstance:function(e){var t=this.id(e),a=this.instanceStore.get(t);a||(a=this.hydrateInstance(e)),this.addInstanceReference(a);var n=this.serializeInstance(a),r=this;return Promise.resolve(this.destroyedData(e,n)).then(function(){return r.deleteInstanceReference(a),a})}},a}),create=function(e){var t=this;this.listStore.forEach(function(a,n){var r=JSON.parse(n),s=indexByIdentity(a,e,t.queryLogic.schema);if(t.queryLogic.isMember(r,e)){var o=t.queryLogic.index(r,a,e);updateListWithItem(a,e,s,o,t,r)}})},update$1=function(e){var t=this;this.listStore.forEach(function(a,n){var r=JSON.parse(n),s=indexByIdentity(a,e,t.queryLogic.schema);if(t.queryLogic.isMember(r,e)){var o=t.queryLogic.index(r,a,e);updateListWithItem(a,e,s,o,t,r)}else-1!==s&&updateListWithItem(a,e,s,-1,t,r)})},destroy=function(e){var t=this;this.listStore.forEach(function(a,n){var r=JSON.parse(n),s=indexByIdentity(a,e,t.queryLogic.schema);-1!==s&&updateListWithItem(a,e,s,-1,t,r)})},forEach=[].forEach,callbacks$1=["createdInstance","updatedInstance","destroyedInstance"],callbacksOnceBehavior=canConnect_3_2_5_canConnect.behavior("constructor/callbacks-once",function(e){var t={};return forEach.call(callbacks$1,function(a){t[a]=function(t,n){var r=this.getInstanceMetaData(t,"last-data-"+a),s=sortedSetJson(n);if(r!==s){var o=e[a].apply(this,arguments);return this.addInstanceMetaData(t,"last-data-"+a,s),o}}}),t}),callbacksOnce=callbacksOnceBehavior;function realtimeRestModel(e){var t="string"==typeof e?{url:e}:e;"undefined"==typeof t.Map&&(t.Map=map$2.extend({seal:!1},{})),"undefined"==typeof t.List&&(t.List=t.Map.List||list$1.extend({"#":t.Map}));return canConnect_3_2_5_canConnect([constructor_1,map$4,store,callbacks,parse$1,url,realTime,callbacksOnce],t)}var canRealtimeRestModel_1_1_1_canRealtimeRestModel=canNamespace_1_0_0_canNamespace.realtimeRestModel=realtimeRestModel;function restModel(e){var t="string"==typeof e?{url:e}:e;"undefined"==typeof t.Map&&(t.Map=map$2.extend({seal:!1},{})),"undefined"==typeof t.List&&(t.List=t.Map.List||list$1.extend({"#":t.Map}));var a=[base,url,parse$1,constructor_1,map$4].reduce(function(e,t){return t(e)},t);return a.init(),a}var canRestModel_1_1_1_canRestModel=canNamespace_1_0_0_canNamespace.restModel=restModel,getItems$1=function(e){return Array.isArray(e)?e:e.data},forEach$1=Array.prototype.forEach,cacheRequestsBehaviour=canConnect_3_2_5_canConnect.behavior("cache-requests",function(e){return{getDiff:function(e,t){var a=this,n;return forEach$1.call(t,function(t){var r=a.queryLogic.difference(e,t),s;if(a.queryLogic.isDefinedAndHasMembers(r)){var o=a.queryLogic.intersection(e,t);s={needed:r,cached:!!a.queryLogic.isDefinedAndHasMembers(o)&&o,count:a.queryLogic.count(r)}}else a.queryLogic.isSubset(e,t)&&(s={cached:e,count:0});s&&(!n||s.count<n.count)&&(n=s)}),n?{needed:n.needed,cached:n.cached}:{needed:e}},unionMembers:function(e,t,a,n){return{data:this.queryLogic.unionMembers(t.needed,t.cached,getItems$1(a),getItems$1(n))}},getListData:function(t){t=t||{};var a=this;return this.cacheConnection.getSets(t).then(function(n){var r=a.getDiff(t,n);if(!r.needed)return a.cacheConnection.getListData(r.cached);if(!r.cached)return e.getListData(r.needed).then(function(e){return a.cacheConnection.updateListData(getItems$1(e),r.needed).then(function(){return e})});var s=a.cacheConnection.getListData(r.cached),o=e.getListData(r.needed),i=o.then(function(e){return a.cacheConnection.updateListData(getItems$1(e),r.needed).then(function(){return e})}),l=Promise.all([s,o]).then(function(e){var n=e[0],s=e[1];return a.unionMembers(t,r,s,n)});return Promise.all([l,i]).then(function(e){return e[0]})})}}}),cacheRequests=cacheRequestsBehaviour,assign$4=canReflect_1_18_0_canReflect.assignMap,each$4=canReflect_1_18_0_canReflect.each,pairs$2={createdData:"createData",updatedData:"updateData",destroyedData:"destroyData"},callbackCache=canConnect_3_2_5_canConnect.behavior("data/callbacks-cache",function(e){var t={};return each$4(pairs$2,function(a,n){t[n]=function(t,r,s){return this.cacheConnection[a](assign$4(assign$4({},r),t)),e[n]?e[n].call(this,t,r,s):t}}),t}),callbacksCache=callbackCache,deferred=function(){var e={};return e.promise=new Promise(function(t,a){e.resolve=t,e.reject=a}),e},forEach$2=[].forEach,combineRequests=canConnect_3_2_5_canConnect.behavior("data/combine-requests",function(e){var t;return{unionPendingRequests:function(e){var t=this;e.sort(function(e,a){return t.queryLogic.isSubset(e.set,a.set)?1:t.queryLogic.isSubset(a.set,e.set)?-1:0});var a=[],n;return doubleLoop(e,{start:function(e){n={set:e.set,pendingRequests:[e]},a.push(n)},iterate:function(e){var a=t.queryLogic.union(n.set,e.set);if(t.queryLogic.isDefinedAndHasMembers(a))return n.set=a,n.pendingRequests.push(e),!0}}),Promise.resolve(a)},time:1,getListData:function(a){a=a||{};var n=this;t||(t=[],setTimeout(function(){var a=n.unionPendingRequests(t);t=null,a.then(function(t){forEach$2.call(t,function(t){var a=canReflect_1_18_0_canReflect.serialize(t.set);e.getListData(a).then(function(e){1===t.pendingRequests.length?t.pendingRequests[0].deferred.resolve(e):forEach$2.call(t.pendingRequests,function(a){a.deferred.resolve({data:n.queryLogic.filterMembers(a.set,t.set,getItems$1(e))})})},function(e){1===t.pendingRequests.length?t.pendingRequests[0].deferred.reject(e):forEach$2.call(t.pendingRequests,function(t){t.deferred.reject(e)})})})})},this.time||1));var r=deferred();return t.push({deferred:r,set:a}),r.promise}}}),combineRequests_1=combineRequests,doubleLoop=function(e,t){for(var a=0;a<e.length;){t.start(e[a]);for(var n=a+1;n<e.length;)!0===t.iterate(e[n])?e.splice(n,1):n++;a++}},canLocalStore_1_0_1_canLocalStore=canNamespace_1_0_0_canNamespace.localStore=function e(t){t.constructor=e;var a=Object.create(canMemoryStore_1_0_2_makeSimpleStore(t));return canReflect_1_18_0_canReflect.assignMap(a,{clear:function(){return localStorage.removeItem(this.name+"/queries"),localStorage.removeItem(this.name+"/records"),this._recordsMap=null,Promise.resolve()},updateQueryDataSync:function(e){localStorage.setItem(this.name+"/queries",JSON.stringify(e))},getQueryDataSync:function(){return JSON.parse(localStorage.getItem(this.name+"/queries"))||[]},getRecord:function(e){return this._recordsMap||this.getAllRecords(),this._recordsMap[e]},getAllRecords:function(){if(!this.cacheLocalStorageReads||!this._recordsMap){var e=JSON.parse(localStorage.getItem(this.name+"/records"))||{};this._recordsMap=e}var t=[];for(var a in this._recordsMap)t.push(this._recordsMap[a]);return t},destroyRecords:function(e){this._recordsMap||this.getAllRecords(),canReflect_1_18_0_canReflect.eachIndex(e,function(e){var t=canReflect_1_18_0_canReflect.getIdentity(e,this.queryLogic.schema);delete this._recordsMap[t]},this),localStorage.setItem(this.name+"/records",JSON.stringify(this._recordsMap))},updateRecordsSync:function(e){this._recordsMap||this.getAllRecords(),e.forEach(function(e){var t=canReflect_1_18_0_canReflect.getIdentity(e,this.queryLogic.schema);this._recordsMap[t]=e},this),localStorage.setItem(this.name+"/records",JSON.stringify(this._recordsMap))}}),a},localstorageCache=canLocalStore_1_0_1_canLocalStore,memoryCache=canMemoryStore_1_0_2_canMemoryStore,fallThroughCache=canConnect_3_2_5_canConnect.behavior("fall-through-cache",function(e){return{hydrateList:function(t,a){a=a||this.listQuery(t);var n=sortedSetJson(a),r=e.hydrateList.call(this,t,a);return this._getHydrateListCallbacks[n]&&(this._getHydrateListCallbacks[n].shift()(r),!this._getHydrateListCallbacks[n].length&&delete this._getHydrateListCallbacks[n]),r},_getHydrateListCallbacks:{},_getHydrateList:function(e,t){var a=sortedSetJson(e);this._getHydrateListCallbacks[a]||(this._getHydrateListCallbacks[a]=[]),this._getHydrateListCallbacks[a].push(t)},getListData:function(t){t=t||{};var a=this;return this.cacheConnection.getListData(t).then(function(n){return a._getHydrateList(t,function(n){a.addListReference(n,t),setTimeout(function(){e.getListData.call(a,t).then(function(e){a.cacheConnection.updateListData(e,t),a.updatedList(n,e,t),a.deleteListReference(n,t)},function(t){canLog_1_0_2_canLog.log("REJECTED",t)})},1)}),n},function(){var n=e.getListData.call(a,t);return n.then(function(e){a.cacheConnection.updateListData(e,t)}),n})},hydrateInstance:function(t){var a=this.id(t),n=e.hydrateInstance.apply(this,arguments);return this._getMakeInstanceCallbacks[a]&&(this._getMakeInstanceCallbacks[a].shift()(n),!this._getMakeInstanceCallbacks[a].length&&delete this._getMakeInstanceCallbacks[a]),n},_getMakeInstanceCallbacks:{},_getMakeInstance:function(e,t){this._getMakeInstanceCallbacks[e]||(this._getMakeInstanceCallbacks[e]=[]),this._getMakeInstanceCallbacks[e].push(t)},getData:function(t){var a=this;return this.cacheConnection.getData(t).then(function(n){return a._getMakeInstance(a.id(n)||a.id(t),function(n){a.addInstanceReference(n),setTimeout(function(){e.getData.call(a,t).then(function(e){a.cacheConnection.updateData(e),a.updatedInstance(n,e),a.deleteInstanceReference(n)},function(t){canLog_1_0_2_canLog.log("REJECTED",t)})},1)}),n},function(){var n=e.getData.call(a,t);return n.then(function(e){a.cacheConnection.updateData(e)}),n})}}}),fallThroughCache_1=fallThroughCache,makeRef=function(e){var t=canReflect_1_18_0_canReflect.getSchema(e.queryLogic).identity[0],a=function(){return function(n,r){"object"==typeof n&&(r=n,n=r[t]);var s=a.store.get(n);return s?(r&&!s._value&&(r instanceof e.Map?s._value=r:s._value=e.hydrateInstance(r)),s):void(this[t]=n,r&&(r instanceof e.Map?this._value=r:this._value=e.hydrateInstance(r)),0<store.requests.count()&&!a._requestInstances[n]&&(a.store.addReference(n,this),a._requestInstances[n]=this))}}();a.store=new weakReferenceMap,a._requestInstances={},a.type=function(e){return e&&"object"!=typeof e?new a(e):new a(e[t],e)};var n={promise:{get:function(){if(this._value)return Promise.resolve(this._value);var a={};return a[t]=this[t],e.Map.get(a)}},_state:{get:function(e,t){return t&&this.promise.then(function(){t("resolved")},function(){t("rejected")}),"pending"}},value:{get:function(e,t){return this._value?this._value:void(t&&this.promise.then(function(e){t(e)}))}},reason:{get:function(e,t){this._value||this.promise.catch(function(e){t(e)})}}};n[t]={type:"*",set:function(){this._value=void 0}},canDefine_2_8_0_canDefine(a.prototype,n),a.prototype.unobservedId=canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(){return this[t]}),a.prototype.isResolved=function(){return!!this._value||"resolved"===this._state},a.prototype.isRejected=function(){return"rejected"===this._state},a.prototype.isPending=function(){return!this._value&&("resolved"!==this._state||"rejected"!==this._state)},a.prototype.serialize=function(){return this[t]},canReflect_1_18_0_canReflect.assignSymbols(a.prototype,{"can.serialize":a.prototype.serialize,"can.getName":function(){return canReflect_1_18_0_canReflect.getName(this.constructor)+"{"+this[t]+"}"}});var r=a.prototype._eventSetup;a.prototype._eventSetup=function(){return a.store.addReference(this.unobservedId(),this),r.apply(this,arguments)};var s=a.prototype._eventTeardown;return a.prototype._eventTeardown=function(){return a.store.deleteReference(this.unobservedId(),this),s.apply(this,arguments)},store.requests.on("end",function(){for(var e in a._requestInstances)a.store.deleteReference(e);a._requestInstances={}}),a},ref=canConnect_3_2_5_canConnect.behavior("can/ref",function(e){return{init:function(){e.init.apply(this,arguments),this.Map.Ref=makeRef(this)}}}),$$1=global_1().$;canConnect_3_2_5_canConnect.superMap=function(e){var t=[constructor_1,map$4,ref,store,callbacks,combineRequests_1,parse$1,url,realTime,callbacksOnce];return"undefined"!=typeof localStorage&&(!e.cacheConnection&&(e.cacheConnection=canConnect_3_2_5_canConnect([localstorageCache],{name:e.name+"Cache",idProp:e.idProp,queryLogic:e.queryLogic})),t.push(callbacksCache,fallThroughCache_1)),$$1&&$$1.ajax&&(e.ajax=$$1.ajax),canConnect_3_2_5_canConnect(t,e)};var superMap=canConnect_3_2_5_canConnect.superMap,$$2=global_1().$;canConnect_3_2_5_canConnect.baseMap=function(e){return $$2&&$$2.ajax&&(e.ajax=$$2.ajax),canConnect_3_2_5_canConnect([constructor_1,map$4,ref,store,callbacks,parse$1,url,realTime,callbacksOnce],e)};var baseMap=canConnect_3_2_5_canConnect.baseMap;canConnect_3_2_5_canConnect.cacheRequests=cacheRequests,canConnect_3_2_5_canConnect.constructor=constructor_1,canConnect_3_2_5_canConnect.constructorCallbacksOnce=callbacksOnce,canConnect_3_2_5_canConnect.constructorStore=store,canConnect_3_2_5_canConnect.dataCallbacks=callbacks,canConnect_3_2_5_canConnect.dataCallbacksCache=callbacksCache,canConnect_3_2_5_canConnect.dataCombineRequests=combineRequests_1,canConnect_3_2_5_canConnect.dataLocalStorageCache=localstorageCache,canConnect_3_2_5_canConnect.dataMemoryCache=memoryCache,canConnect_3_2_5_canConnect.dataParse=parse$1,canConnect_3_2_5_canConnect.dataUrl=url,canConnect_3_2_5_canConnect.fallThroughCache=fallThroughCache_1,canConnect_3_2_5_canConnect.realTime=realTime,canConnect_3_2_5_canConnect.canMap=map$4,canConnect_3_2_5_canConnect.superMap=superMap,canConnect_3_2_5_canConnect.baseMap=baseMap;var canConnect_3_2_5_all=canConnect_3_2_5_canConnect,methodsToOverwrite=["pushState","replaceState"],dispatchSymbol$3=canSymbol_1_6_5_canSymbol.for("can.dispatch");function cleanRoot(){var e=location_1(),t=e.protocol+"//"+e.host,a=bindingProxy_1.call("root"),n=a.indexOf(t);return 0===n?a.substr(t.length):a}function getCurrentUrl(){var e=cleanRoot(),t=location_1(),a=t.pathname+t.search,n=a.indexOf(e);return a.substr(n+e.length)}function PushstateObservable(){this.replaceStateOnceKeys=[],this.replaceStateKeys=[],this.dispatchHandlers=this.dispatchHandlers.bind(this),this.anchorClickHandler=function(e){var t=PushstateObservable.prototype.shouldCallPushState.call(this,this,e);t&&PushstateObservable.prototype.anchorClickHandler.call(this,this,e)},this.keepHash=!0}PushstateObservable.prototype=Object.create(canSimpleObservable_2_5_0_canSimpleObservable.prototype),PushstateObservable.constructor=PushstateObservable,canReflect_1_18_0_canReflect.assign(PushstateObservable.prototype,{root:"/",matchSlashes:!1,paramsMatcher:/^\?(?:[^=]+=[^&]*&)*[^=]+=[^&]*/,querySeparator:"?",dispatchHandlers:function(){var e=this._value;this._value=getCurrentUrl(),e!==this._value&&this[dispatchSymbol$3](this._value,e)},shouldCallPushState:function(e,t){if(t.isDefaultPrevented?!t.isDefaultPrevented():!0!==t.defaultPrevented){if("javascript://"===e.href)return;if("_blank"===e.target)return;if(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return;var a=e.host||window.location.host;if(window.location.host===a){var n=cleanRoot(),r,s,o;if(e instanceof HTMLAnchorElement?(r=e.pathname,s=e.href,o=r+e.search):"http://www.w3.org/1999/xlink"===e.namespaceURI&&(r=s=e.getAttributeNS("http://www.w3.org/1999/xlink","href"),o=s),void 0!==r&&0===r.indexOf(n)){var i=o.substr(n.length);if(void 0!==canRoute_4_4_9_canRoute.rule(i)){0<=s.indexOf("#")&&(this.keepHash=!0);var l=window.location.pathname+window.location.search,d=o!==l||e.hash===window.location.hash;return d&&t.preventDefault&&t.preventDefault(),!0}return!1}}}},anchorClickHandler:function(e){var t=e.href?e.href:e.getAttributeNS("http://www.w3.org/1999/xlink","href");window.history.pushState(null,null,t)},onBound:function(){if(!isNode()){var e=document$1(),t=global_1();this._value=getCurrentUrl(),canDomEvents_1_3_11_canDomEvents.addDelegateListener(e.documentElement,"click","a",this.anchorClickHandler);var a=this.originalMethods={},n=this.dispatchHandlers;canReflect_1_18_0_canReflect.eachKey(methodsToOverwrite,function(e){this.originalMethods[e]=t.history[e],t.history[e]=function(r,s,o){var i=0===o.indexOf("http"),l=location_1(),d=l.search+l.hash;(!i&&o!==l.pathname+d||i&&o!==l.href+d)&&(a[e].apply(t.history,arguments),n())}},this),canDomEvents_1_3_11_canDomEvents.addEventListener(t,"popstate",this.dispatchHandlers)}},onUnbound:function(){if(!isNode()){var e=document$1(),t=global_1();canDomEvents_1_3_11_canDomEvents.removeDelegateListener(e.documentElement,"click","a",this.anchorClickHandler),canReflect_1_18_0_canReflect.eachKey(methodsToOverwrite,function(e){t.history[e]=this.originalMethods[e]},this),canDomEvents_1_3_11_canDomEvents.removeEventListener(t,"popstate",this.dispatchHandlers)}},get:function(){return canObservationRecorder_1_3_1_canObservationRecorder.add(this),getCurrentUrl()},set:function(e){var t=canRoute_4_4_9_canRoute.deparam(e),a=canRoute_4_4_9_canRoute.deparam(getCurrentUrl()),n="pushState",r={};this.keepHash&&-1===e.indexOf("#")&&window.location.hash&&(e+=window.location.hash),map$3(a,t).forEach(function(e){return r[e.key]=!0}),this.replaceStateKeys.length&&this.replaceStateKeys.forEach(function(e){r[e]&&(n="replaceState")}),this.replaceStateOnceKeys.length&&this.replaceStateOnceKeys.forEach(function(e,t,a){r[e]&&(n="replaceState",a.splice(t,1))}),window.history[n](null,null,bindingProxy_1.call("root")+e)},replaceStateOn:function(){canReflect_1_18_0_canReflect.addValues(this.replaceStateKeys,canReflect_1_18_0_canReflect.toArray(arguments))},replaceStateOnce:function(){canReflect_1_18_0_canReflect.addValues(this.replaceStateOnceKeys,canReflect_1_18_0_canReflect.toArray(arguments))},replaceStateOff:function(){canReflect_1_18_0_canReflect.removeValues(this.replaceStateKeys,canReflect_1_18_0_canReflect.toArray(arguments)),canReflect_1_18_0_canReflect.removeValues(this.replaceStateOnceKeys,canReflect_1_18_0_canReflect.toArray(arguments))}}),canReflect_1_18_0_canReflect.assignSymbols(PushstateObservable.prototype,{"can.getValue":PushstateObservable.prototype.get,"can.setValue":PushstateObservable.prototype.set});var canRoutePushstate_5_0_14_canRoutePushstate=PushstateObservable;function shouldCheckSet(e,t,a){return"set"===e.type&&t&&a&&"object"==typeof t&&"object"==typeof a}function makeIdentityFromMapSchema$1(e){if(e.identity&&e.identity.length)return function(t,a){var n=canReflect_1_18_0_canReflect.getIdentity(t,e),r=canReflect_1_18_0_canReflect.getIdentity(a,e);return n===r}}function makeDiffListIdentityComparison(e,t,n,r){var s=canReflect_1_18_0_canReflect.getSchema(e),o=canReflect_1_18_0_canReflect.size(e),i,l;return null!=s&&null!=s.values&&(i=canReflect_1_18_0_canReflect.getSchema(s.values)),null==i&&0<o&&(i=canReflect_1_18_0_canReflect.getSchema(canReflect_1_18_0_canReflect.getKeyValue(e,0))),i&&(l=makeIdentityFromMapSchema$1(i)),function(e,t,a){if(canReflect_1_18_0_canReflect.isPrimitive(e))return e===t;if(canReflect_1_18_0_canReflect.isPrimitive(t))return e===t;if(l&&l(e,t)){var s=diffDeep(e,t,n?n+"."+a:""+a);return r.push.apply(r,s),!0}return 0===diffDeep(e,t).length}}function diffDeep(e,t,a){if(e&&canReflect_1_18_0_canReflect.isMoreListLikeThanMapLike(e)){var n=[],r=makeDiffListIdentityComparison(e,t,a,n),s=list(e,t,r).map(function(e){return a&&(e.key=a),e});return n.concat(s)}a=a?a+".":"";var o=map$3(e,t),i=[];return o.forEach(function(n){var r=n.key;n.key=a+n.key;var s=e&&canReflect_1_18_0_canReflect.getKeyValue(e,r),o=t&&canReflect_1_18_0_canReflect.getKeyValue(t,r);if(shouldCheckSet(n,s,o)){var l=diffDeep(s,o,n.key);i.push.apply(i,l)}else i.push(n)}),i}var deep=diffDeep,diff={deep:deep,list:list,map:map$3,mergeDeep:mergeDeep,Patcher:patcher},canDiff_1_5_0_canDiff=canNamespace_1_0_0_canNamespace.diff=diff;function makeMap$2(e){var t={},a=e.split(",");return a.forEach(function(e){t[e]=!0}),t}var canMakeMap_1_2_2_canMakeMap=makeMap$2,addJqueryEvents=canNamespace_1_0_0_canNamespace.addJQueryEvents=function(e){var t=e.event.special,a=[];for(var n in t)if(!canDomEvents_1_3_11_canDomEvents._eventRegistry.has(n)){var r={defaultEventType:n,addEventListener:function(e,t,a){$(e).on(t,a)},removeEventListener:function(e,t,a){$(e).off(t,a)}},s=canDomEvents_1_3_11_canDomEvents.addEvent(r);a.push(s)}return function(){a.forEach(function(e){e()})}};function makeMutationEvent(e,t,a){var n=new Map;return{_subscriptions:n,defaultEventType:e,addEventListener:function(e,r,s){var o=this.dispatch,i=n.get(e);i||(i={removeListener:null,listeners:new Set},n.set(e,i)),0===i.listeners.size&&(i.removeListener=t(e,function(t){var n={type:r};for(var s in t)n[s]=t[s];o(e,n,!1!==a)})),i.listeners.add(s),e.addEventListener(r,s)},removeEventListener:function(e,t,a){e.removeEventListener(t,a);var r=n.get(e);r&&(r.listeners["delete"](a),0===r.listeners.size&&(r.removeListener(),n["delete"](e)))}}}var events$1=canNamespace_1_0_0_canNamespace.domMutateDomEvents={attributes:makeMutationEvent("attributes",canDomMutate_1_3_11_canDomMutate.onNodeAttributeChange),inserted:makeMutationEvent("inserted",canDomMutate_1_3_11_canDomMutate.onNodeInsertion,!1),removed:makeMutationEvent("removed",canDomMutate_1_3_11_canDomMutate.onNodeRemoval)},canDomMutate_1_3_11_domEvents=canNamespace_1_0_0_canNamespace.domMutateDomEvents=events$1;function flatten(e){return e.reduce(function(e,t){return e.concat(t)},[])}function makeInterfaceValidator(e){var t=flatten(e);return function(e){var a=t.reduce(function(t,a){return a in e?t:t.concat(a)},[]);return a.length?{message:"missing expected properties",related:a}:void 0}}var canValidateInterface_1_0_3_index=makeInterfaceValidator;export default canNamespace_1_0_0_canNamespace;export{canDefine_2_8_0_canDefine as define,map$2 as DefineMap,list$1 as DefineList,canValue_1_1_1_canValue as value,canObservation_4_2_0_canObservation as Observation,canObservationRecorder_1_3_1_canObservationRecorder as ObservationRecorder,canSimpleMap_4_3_2_canSimpleMap as SimpleMap,canBind_1_5_1_canBind as bind,map$1 as mapEventBindings,value as valueEventBindings,canSimpleObservable_2_5_0_canSimpleObservable as SimpleObservable,canComponent_4_6_2_canComponent as Component,canStache_4_17_21_canStache as stache,canStacheBindings_4_10_9_canStacheBindings as stacheBindings,canStacheRouteHelpers_1_2_1_canStacheRouteHelpers as stacheRouteHelpers,canViewCallbacks_4_4_1_canViewCallbacks as viewCallbacks,canViewLive_4_2_8_canViewLive as viewLive,canViewModel_4_0_3_canViewModel as viewModel,canViewNodelist_4_3_4_canViewNodelist as nodeList,canViewParser_4_1_3_canViewParser as viewParser,canViewScope_4_13_6_canViewScope as Scope,canViewTarget_4_1_6_canViewTarget as target,canFixture_3_1_7_fixture as fixture,canQueryLogic_1_2_2_canQueryLogic as QueryLogic,canRealtimeRestModel_1_1_1_canRealtimeRestModel as realtimeRestModel,canRestModel_1_1_1_canRestModel as restModel,canConnect_3_2_5_all as connect,canLocalStore_1_0_1_canLocalStore as localStore,canMemoryStore_1_0_2_canMemoryStore as memoryStore,canRoute_4_4_9_canRoute as route,canRouteHash_1_0_2_canRouteHash as RouteHash,canRoutePushstate_5_0_14_canRoutePushstate as RoutePushstate,canParam_1_1_2_canParam as param,canDeparam_1_2_1_canDeparam as deparam,canAssign_1_3_3_canAssign as assign,canDefineLazyValue_1_1_1_defineLazyValue as defineLazyValue,canDiff_1_5_0_canDiff as diff,canGlobals_1_2_2_canGlobals as globals,canKey_1_2_1_canKey as key,canKeyTree_1_2_2_canKeyTree as KeyTree,canMakeMap_1_2_2_canMakeMap as makeMap,canParseUri_1_2_2_canParseUri as parseURI,canQueues_1_3_1_canQueues as queues,canString_1_1_0_canString as string,canStringToAny_1_2_1_canStringToAny as stringToAny,canAjax_2_4_6_canAjax as ajax,canAttributeEncoder_1_1_4_canAttributeEncoder as attributeEncoder,canChildNodes_1_2_1_canChildNodes as childNodes,canControl_4_4_3_canControl as Control,canDomData_1_0_3_canDomData as domData,canDomEvents_1_3_11_canDomEvents as domEvents,addJqueryEvents as addJQueryEvents,canDomMutate_1_3_11_canDomMutate as domMutate,canDomMutate_1_3_11_node as domMutateNode,canDomMutate_1_3_11_domEvents as domMutateDomEvents,canFragment_1_3_1_canFragment as fragment,canValidateInterface_1_0_3_index as makeInterfaceValidator,canCid_1_3_1_canCid as cid,canConstruct_3_5_6_canConstruct as Construct,maybeBoolean as MaybeBoolean,maybeDate as MaybeDate,maybeNumber as MaybeNumber,maybeString as MaybeString,canNamespace_1_0_0_canNamespace as can,canReflect_1_18_0_canReflect as Reflect,canReflectDependencies_1_1_2_canReflectDependencies as reflectDependencies,canReflectPromise_2_2_1_canReflectPromise as reflectPromise};